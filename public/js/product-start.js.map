{"version":3,"sources":["product-start.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product-start.js","sourcesContent":["$(function( ){\n    \n    var filters = {};\n    \n    var filepath = $(\"input[name=filepath]\").val( );\n    $(\"input[name=filepath]\").remove( );\n    \n    $(\".filter-items ul li\").on(\"click\", function( e ){\n        \n        var removeItem = false;\n        \n        if( $(this).hasClass(\"chosen-filter\") ){\n            $(this).removeClass('chosen-filter');\n            removeItem = true;\n        }else{\n            $(this).parent( ).find(\"li\").removeClass('chosen-filter');\n            $(this).addClass('chosen-filter');    \n        }\n        \n        var overlayHeight = $(\".product-loading-overlay\").parent( ).height( );\n        \n        $(\".product-loading-overlay\").css({\n            height: overlayHeight + \"px\",\n            display: \"table\"\n        });\n        \n        if( parseInt( $(this).data(\"amount\") ) > 0 ){\n        \n            var type = $(this).data('filter-type');\n\n            switch( type ){\n\t\t\t\tcase \"price\":\n\t\t\t\t\tif( removeItem ){\n                        delete filters.price;\n                    }else{\n                        var price = $(this).data(\"price\");\n\t\t\t\t\t\tfilters.price = price;    \n                    }\n\t\t\t\tbreak;\n                case \"category\":\n\n                    if( removeItem ){\n                        delete filters.cat_id;\n                    }else{\n                        var cat_id = $(this).data(\"cat-id\");\n\n                        filters.cat_id = cat_id    \n                    }\n\n                break;\n                case \"rating\":\n\n                    if( removeItem ){\n                        delete filters.rating;\n                    }else{\n                        var rating = $(this).data(\"rating\");\n\n                        filters.rating = rating;        \n                    }\n\n                break;\n            }\n            \n            $.ajax({\n                method: \"post\",\n                url: \"/products/filter\",\n                data: filters,\n                dataType: \"json\",\n                success: function( resp ){\n\n                    if( resp.status == 1 ){\n\n                        if( resp.data.length == 0 ){\n                        \t$(\".product-loading-overlay\").hide( );\n                        }else{\n\n                            var prdList = new Array( );\n\n                            $.each(resp.data, function(count, item){\n\n                                var html = \"\";\n\n                                html =  \"<div class='col-lg-6 col-md-6 margin-top-10'>\";\n                                html += \"   <div class='product-module'>\";\n                                html += \"       <div class='product-module-top'>\";\n                                html += \"           <a href='/product/\" + item.product_alias + \"'><img src='\" + item.image + \"' align='left' /></a>\";\n                                html += \"           <div class='product-module-name'><a href='/product/\" + item.product_alias + \"'>\" + item.name + \"</a></div>\";\n                                html += \"           <div class='product-module-org-name'>\";\n                                html += \"               <span class='product-price'>\" + item.price + \"</span> from \" + item.org_name.stripSlashes( );  \n                                html += \"           </div>\";\n                                html += \"           <div class='rating'>\";\n\n                                for( var i = 1 ; i < 6 ; i++ ){\n                                    if( i <= item.rating ){\n                                        html += \"       <span class='star fill' >\";\n                                        html += \"          <i data-icon='&#xe017;' class='pwi-icon-star pwi-icon-2em'></i>\";\n                                        html += \"       </span>\";\n                                    }else{\n                                        html += \"       <span class='star' >\";\n                                        html += \"          <i data-icon='&#xe017;' class='pwi-icon-star pwi-icon-2em'></i>\";\n                                        html += \"       </span>\";\n                                    }\n                                }\n                                html += \"           </div>\";\n                                html += \"           <div class='product-module-desc'>\";\n\n                                if( item.descExp.length < 50  ){\n                                    html +=             item.sdesc;\n                                }else{\n                                    for( var i = 0 ; i < item.descExp.length ; i++ ){\n\n                                        if( i != 50 ){\n                                            html += item.descExp[i] + \" \";\n                                        }else{\n                                            html += \"<a href='' class='readmore'>...See More</a>\";\n                                            html += \"<span class='more'>\" + item.descExp[i];\n                                        }\n                                    }\n                                    html += \"</span><a href='#' class='readless'>Show Less</a>\";\n                                }\n\n                                html += \"           </div>\";\n                                html += \"       </div>\";\n                                html += \"   <div style='clear: both;'></div>\";\n                                html += \"   </div>\";\n                                html += \"</div>\";\n\n                                prdList.push( html );\n                            });\n\n                            $(\".product-module-list\")\n                            .html( \"\" )\n                            .html( prdList.join('') );\n\n                            $(\".product-loading-overlay\").hide( );\n                        }\n                    }\n                }\n            });\n        }\n    });\n    \n    /**\n\t*\n\t* Checkout process for products\n\t*\n\t*/\n\n\t$(\".buy-now\").on(\"click\", function( ){\n\t\tvar alias = $(this).data('alias');\n\n\t\tlocation.href = '/product/' + alias + '/purchase';\n\t});\n\t\n\t\n\tvar paypal_username = $(\"input[name=paypalUn]\").val( );\n    var user_id         = $(\"form[name=productCheckoutForm]\").find(\"input[name=user_id]\").val( );\n\n    //Get Project Data\n    \n    var product_name \t= $(\"input[name=product_name]\").val( );\n    var org_name \t\t= $(\"input[name=org_name]\").val( );\n    var $checkout \t\t= $(\"#productCheckout\");\n    var $container \t\t= $(\"#productCheckout\").find(\".checkout\");\n    var $details    \t= $container.find(\".details\");\n    var $review  \t\t= $container.find(\".review\");\n    var product_id \t\t= $(\".add-to-cart\").data('id');\n    \n    var data \t\t\t= {user_id: user_id, id: product_id, shipping: parseFloat( $(\"input[name=shipping]\").val( ) )};\n    \n    var number_of_steps = 3;\n    \n    /**\n\t*\n\t* Initial step to open up the lightbox to continue with the product checkout\n\t*\n\t*/\n    \n    $(\".add-to-cart\").on(\"click\", function( ){\n\t    \n        //$(this).prop('disabled', 'true');\n        \n\t\tvar modifiers = [];\n        var errors    = [];\n        var product_alias = $(this).data('alias');\n        \n        $(\".error\").hide( );\n\n\t\t$(\".product-modifiers select\").each(function( i ){\n\t        \n\t        var name \t\t= $(this).find(\"option:first\").text( );\n\t\t\t\n\t\t\tvar value \t\t= $(this).find(\":selected\").val( );\n\t\t\tvar valueText \t= $(this).find(\":selected\").text( );\n\t\t\t\n\t\t\tif( value == 0 ){\n\t\t\t\terrors.push($(this).attr(\"name\") + \"|\" + \"Please select a \" + name);\n\t\t\t}else{\n\t\t\t\tmodifiers.push(\"<div class='modifier'><b>\" + name.replace(\"Select \", \"\") + \"</b>: \" + valueText + \"</div>\");\n\t\t\t}\n\t\t});\n\t\t\n\t\tif( $(\"select[name=quantity]\").find(\":selected\").val( ) == \"0\" ){\n\t\t\terrors.push(\"quantity|Please Input a Quantity\");\n\t\t}\n\t\t\n\t\tif( errors.length == 0 ){\n\t\t\t\n\t\t\tvar price \t = parseFloat( $(\".price\").data('price') ).formatMoney(2, ',', '.');\n\t\t\t\n\t\t\tvar quantity = parseInt( $(\"select[name=quantity]\").find(\":selected\").val( ) );\n\t\t\t\n\t\t\tlocation.href = \"/product/\" + product_alias + \"/purchase?quantity=\" + quantity + \"&modifiers=\" + encodeURIComponent( data.modifierIds );\n\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tfor(var x in errors){\n\t\t\t\t\n\t\t\t\tvar error = errors[x].split(\"|\");\n\t\t\t\t\n\t\t\t\t$(\".\" + error[0] + \"-error\").html(error[1]).show( );\n\t\t\t}\n\t\t}\n    });\n    \n    /*\n\t*\n\t* Create event for getting quantity amount for selected modifiers\n\t*\n\t*/\n\t\n\tvar modifierOptions = [];\n\tvar combo = \"\";\n\t\n\t$(\".product-modifiers select\").on(\"change\", function( i ){\n\t\t\n\t\tvar allSelected = true;\n\t\t\n\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\n\t\t\tif( parseInt( $(this).find(\":selected\").val( ) ) == 0 ){\n\t\t\t\tallSelected = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif( allSelected ){\n\t\t\t\n\t\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\tmodifierOptions.push( parseInt( $(this).find(\":selected\").val( ) ) );\t\n\t\t\t});\n\t\t\t\n\t\t\tmodifierOptions = modifierOptions.reverse( );\n\t\t\t\t\n\t\t\tcombo = modifierOptions.join( );\n\t\t\t\n\t\t\tdata.modifierIds = combo;\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\tmethod: \"get\",\n\t\t\t\turl: \"/products/getQuantity\",\n\t\t\t\tdata: \"options=\" + combo + \"&id=\" + product_id,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tbeforeSend: function( ){\n\n\t\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\t\t$(this).remove( );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Getting Quantity ...\");\n\t\t\t\t},\n\t\t\t\tsuccess: function( resp ){\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Select Quantity\");\n\t\t\t\t\tmodifierOptions = [];\n\t\t\t\t\t\n\t\t\t\t\tif( parseInt( resp.count ) > 0 ){\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor( var i = 1 ; i <= resp.count ; i++ ){\n\t\t\t\t\t\t\t$(\"select[name=quantity]\").append(\"<option value='\" + i + \"'>\" + i + \"</option>\");\n\t\t\t\t\t\t\t$details.find(\"select[name=product-quantity]\").append(\"<option value='\" + i + \"'>\" + i + \"</option>\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tdata.modifierId = resp.modifier_id;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif( parseInt( resp.price ) > 0 ){\n\t\t\t\t\t\t\t$(\".price\").data(\"price\", resp.price);\n\t\t\t\t\t\t\t$(\".price\").html(\"$\" + parseFloat( resp.price ) + \".00\");\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\t\n\t\t\tif( $(\"select[name=quantity]\").length > 1 ){\n\t\t\t\t\n\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\n\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\tremove( $(this) );\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t}\n\t});\n    \n    /*\n\t*    \n\t* Create event for updating quantity on checkout\n\t*   \n\t*/\n    \n    $details.find(\"select[name=product-quantity]\").on(\"change\", function( ){\n\t    \n\t    var value = parseInt( $(this).find(\":selected\").val( ) );\n\t    \n\t    data.quantity = value;\n\t    \n\t    $details.find(\".product-amount\").find(\"span\").html( \"$\" + (data.price * data.quantity) + \".00\");\n\t    \n    });\n    \n    \n    /**\n\t*\n\t* Step 1 Continue checkout     \n\t*    \n\t*/\n    \n    $details.find('.continueCheckout').on(\"click\", function( ){\n\t    \n\t    var formData = $('form[name=productCheckoutForm]').serialize( );\n        \n\t\tvar $button = $(this);\n\t\t\n\t\t$.ajax({\n            url: \"/product/validateCheckout\",\n            method: \"POST\",\n            data: formData,\n            beforeSend: function( ){\n                \n                //clear any error messages\n                $(\".error\").html( \"\" ).addClass('hidden');\n                \n                //change button to show processing\n\t\t\t\t$button.html( \"Validating...\");\n\t\t        $button.prop(\"disabled\", true);\n            },\n            success: function( resp ){\n\t            \n\t            $button.html( \"review order\");\n\t\t        $button.prop(\"disabled\", false);\n\t\t        \n\t\t        if( resp.status ){\n\t\t\t        \n\t\t\t        var $form = $('form[name=productCheckoutForm]');\n\t\t\t        \n\t\t\t        \n\t\t\t        data.first_name\t\t\t= $form.find(\"input[name='first_name']\").val( );\n\t\t\t        data.last_name\t\t\t= $form.find(\"input[name='last_name']\").val( );\n\t\t\t        data.email\t\t\t\t= $form.find(\"input[name='email']\").val( );\n\t\t\t        data.shippingAddress1 \t= $form.find(\"input[name='shippingAddress1']\").val( );\n\t\t\t        data.shippingAddress2 \t= $form.find(\"input[name='shippingAddress2']\").val( );\n\t\t\t        data.shippingcity \t\t= $form.find(\"input[name='shippingCity']\").val( );\n\t\t\t        data.shippingstate\t\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").text( );\n\t\t\t        data.shippingstateId\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").val( );\n\t\t\t        data.shippingzip\t\t= $form.find(\"input[name='shippingZip']\").val( );\n\t\t\t        data.shippingcountry\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").text( );\n\t\t\t        data.shippingcountryId\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").val( );\n\t\t\t        data.cc_number\t\t\t= $form.find(\"input[name=cc_number]\").val( );\n\t                data.name_on_card  \t\t= $form.find(\"input[name=name_on_card]\").val( );\n\t                data.exp_date\t\t\t= $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( );\n\t                data.ccv \t\t\t\t= $form.find(\"input[name=ccv]\").val( );\n\t\t\t        data.billingaddress1\t= $form.find(\"input[name='billingAddress1']\").val( );\n\t\t\t        data.billingaddress2    = $form.find(\"input[name='billingAddress2']\").val( );\n\t\t\t        data.billingcity\t\t= $form.find(\"input[name='billingCity']\").val( );\n\t\t\t        data.billingstate \t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n\t\t\t        data.billingstateId\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n\t\t\t        data.billingzip\t\t\t= $form.find(\"input[name='billingZip']\").val( );\n\t\t\t        data.billingcountry\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n\t\t\t        data.billingcountryId\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\t\t\t        \n\t\t\t\t\tvar shipping;\n\n\t\t\t\t\tvar cc_mask = data.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\n\t\t\t\t\tdata.shipping = parseFloat( data.shipping ).formatMoney(2, ',', '.');\n\t\t\t\t\t\n\t\t\t\t\tif( parseInt( data.shipping) == 0 ){\n\t\t\t\t\t\tshipping = 0.00;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tshipping = parseFloat( data.shipping );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar subTotal = parseFloat( data.price ) * parseInt( data.quantity );\n\t\t\t\t\t\n\t\t\t\t\tvar tax = (subTotal/100) * parseFloat( resp.taxCode.tax_percentage );\n\t\t\t\t\t\n\t\t\t\t\tdata.tax = parseFloat(tax).formatMoney(2, ',', '.');\n\t\t\t\t\t\n\t\t\t\t\tvar total = parseFloat(subTotal) + parseFloat( tax ) + parseFloat( data.shipping);\n\n\t\t\t\t\ttotal = total.formatMoney(2, ',', '.');\n\n\t\t\t\t\t$review.find(\".shippingaddress1\").text( data.shippingAddress1 );\n\t\n\t                $review.find(\".shippingaddress2\").text( data.shippingAddress2 );\n\t\n\t                $review.find(\".shippingcity\").text( data.shippingcity );\n\t\n\t                $review.find(\".shippingstate\").text( data.shippingstate );\n\t\n\t                $review.find(\".shippingzip\").text( data.shippingzip );\n\t\n\t                $review.find(\".shippingcountry\").text( data.shippingcountry );\n\n\t                $review.find(\".cc-num\").text( cc_mask );\n\n\t                $review.find(\".cc-name\").text( data.name_on_card );\n\n\t                $review.find(\".cc-expdate\").text( $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"/\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( ) );\n\n\t                $review.find(\".cc-ccv\").text( data.ccv );\n\n\t\t\t\t\t$review.find(\".billingaddress1\").text( data.billingaddress1 );\n\t\n\t                $review.find(\".billingaddress2\").text( data.billingaddress2 );\n\t\n\t                $review.find(\".billingcity\").text( data.billingcity );\n\t\n\t                $review.find(\".billingstate\").text( data.billingstate );\n\t\n\t                $review.find(\".billingzip\").text( data.billingzip );\n\t\n\t                $review.find(\".billingcountry\").text( data.billingcountry );\n\t                \n\t                $review.find(\".item-price\").text( \"$\" + parseFloat(data.price * data.quantity).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".item-tax\").text( \"$\" + parseFloat( tax ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".item-shipping\").text( \"$\" + parseFloat(shipping).formatMoney(2, ',', '.') )\n\t                \n\t                $review.find(\".item-total\").text(\"$\" + parseFloat( total ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".product-amount span\").html( \"$\" + parseFloat( data.price ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".quantity span\").html( data.quantity );\n\t                \n\t                $review.find(\".total span\").html( parseFloat( subTotal ).formatMoney(2, ',', '.') );\n\n\t                $review.find(\".product-total-amount\").html( \"$\" + total );\n\t                \n\t\t\t\t\t$review.css(\"margin-left\", \"0px\");\n\t                \n\t                $details.css(\"margin-left\", \"-590px\");\t         \n\t                \n\t\t        }else{\n\t\t\t        \n\t\t\t        var errors = resp.errors;\n                    \n                    for( var key in errors ){\n                        $(\".\" + key + \"-error\").html( errors[key] ).removeClass( 'hidden' ).show( );\n                    }\n\n                    $button.html( \"review order\");\n\t\t        \t$button.prop(\"disabled\", false);\n\t\t\t\t}\n            }\n        });\n\t});\n    \n    $review.find(\".edit-button\").on(\"click\", function( ){\n\t    \n\t\t$details.css(\"margin-left\", \"0px\");\n\n        $review.css(\"margin-left\", \"9999999px\");\n\t    \n    });\n    \n    /*\n    *\n    * Actions for step 3 ( Order Review )\n    *\n    */\n    \n    $review.find(\".checkout-button\").on(\"click\", function( ){\n    \n    \tvar order_id = 0;\n    \t\n    \t$.ajax({\n\t    \tmethod: \"post\",\n\t    \turl: \"/products/setPendingTransaction\",\n\t    \tdata: data,\n\t    \tdataType: \"json\",\n\t    \tsuccess: function( resp ){\n\t\t    \t\n\t\t    \torder_id = resp.order_id;\n\t\t    \t\n\t\t    \t //find the paypalStdForm\n                var $checkoutForm = $(\"form[name=paypalStdCheckout]\");\n                \n                //Input values into the form\n                $checkoutForm.find(\"input[name=cmd]\").val(\"_xclick\");\n                $checkoutForm.find(\"input[name=return]\").val(window.location.protocol + \"//\" +  window.location.host + \"/thankyou\");\n                $checkoutForm.find(\"input[name=notify_url]\").val(window.location.protocol + \"//\" +  window.location.host + \"/products/ipn\");\n\n                $checkoutForm.find(\"input[name=amount]\").val( data.price );\n                \n                $checkoutForm.find(\"input[name=quantity]\").val( data.quantity ); //new\n                \n                $checkoutForm.find(\"input[name=shipping]\").val( data.shipping ); //new\n                \n                $checkoutForm.find(\"input[name=tax]\").val( data.tax ); // new\n                \n\t\t\t\t$checkoutForm.find(\"input[name=custom]\").val( order_id );\n\n\t\t\t\t$checkoutForm.find(\"input[name=email]\").val( data.email );\n                \n                $checkoutForm.find(\"input[name=business]\").val( paypal_username );\n                \n                $checkoutForm.find(\"input[name=first_name]\").val( data.first_name );\n                \n                $checkoutForm.find(\"input[name=last_name]\").val( data.last_name );\n                \n                $checkoutForm.find(\"input[name=address1]\").val( data.billingaddress1 );\n                \n                $checkoutForm.find(\"input[name=address2]\").val( data.billingaddress2 );\n                \n                $checkoutForm.find(\"input[name=city]\").val( data.billingcity );\n                \n                $checkoutForm.find(\"input[name=state]\").val( data.billingstate );\n                \n                $checkoutForm.find(\"input[name=zip]\").val( data.billingzip );\n                \n                $checkoutForm.find(\"input[name=country]\").val( data.billingcountry );\n                \n                $checkoutForm.trigger(\"submit\");\n\t\t    \t\n\t\t    \t\n\t    \t}\n    \t});\n    \n    });\n});"],"sourceRoot":"/source/"}