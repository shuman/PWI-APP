{"version":3,"sources":["donate-mobile.js","fund-mobile.js","purchase-mobile.js","donate.js","fund.js","purchase.js","map-style.js","country-start.js","org-start.js","cause-start.js","product-start.js","crowdfunding-start.js","mobileAdjust.js","jquery-te-1.4.0.min.js","org-admin.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["\nvar donateObj = {};\n\n$(function( ){\n\t\n\n    $(document).on(\"pagechange\", function( e, data){\n\n        var page = $(this)[0].activeElement.id;\n\n        if( page == \"donate-page-two\" || page == \"donate-page-two\" || page == \"thank-you\" ){\n            if( typeof donateObj.amount !== \"undefined\" ){\n                $(\"input[name=donationAmt]\").val( donateObj.amount );\n            }else{\n                $.mobile.pageContainer.pagecontainer(\"change\", \"#donate-page-one\");\n            }        \n        }\n    });\n\n    var id = \"\";\n\tvar type = \"\";\n\tvar user_id = \"\";\n\tvar paypal_username = \"\";\n    var payment_gateway = \"\";\n\n\tif( $(\"input[name=id]\").length > 0 ){\n\t\tid = $(\"input[name=id]\").val( );\n\t}\n\n\tif( $(\"input[name=pagetype]\").length > 0 ){\n\t\ttype = $(\"input[name=pagetype]\").val( );\n\t}\n\n\tif( $(\"input[name=user_id]\").length > 0 ){\n\t\tuser_id = $(\"input[name=user_id]\").val( );\n\t}\n\n\tif( $(\"input[name=paypalUn]\").length > 0 ){\n\t\tpaypal_username = $(\"input[name=paypalUn]\").val( );\n\t}\n\n    if( $(\"input[name=payment_gateway]\").length > 0 ){\n        payment_gateway = $(\"input[name=payment_gateway]\").val( );\n    }\n\n    $(\"#back-to-site\").on(\"click\", function( ){\n        location.href = \"/\";\n    });\n\n\t$(document).on(\"pagecreate\", \"#donate-login\", function( ){\n\n\t\tvar hash = window.location.hash;\n\n\t\t$(\".button-login\").each( function( ){\n\n\t\t\tvar href = $(this).find(\"a\").attr(\"href\");\n\n\t\t\t$(this).find(\"a\").attr(\"href\", href + \"?mobilepage=donate-login\");\t\t\t\n\n\t\t});\n\t\t\n\t\tif( document.referrer != \"\" ){\n\t\t\tvar urlSplit = document.referrer.split(\"#\");\n\n\t\t\tif( urlSplit.length == 1 ){\n\t\t\t\t$.mobile.pageContainer.pagecontainer(\"change\", \"#donate-page-one\");\n\t\t\t}\n\t\t}\n\t});\n\n\t$(document).on(\"click\", \".continue\", function( e ){\n\n\t\tvar donation = $(\"input[name=donationAmt]\").val( );\n\t\tvar $errorBox = $(\".donationAmountError\");\n\t\tvar error    = 0;\n\n\t\tif( isNaN( parseFloat( donation) ) ){\n\t\t\t\n\t\t\t$errorBox.html( \"Please Enter a Number.\").show( );\n\t\t\terror = 1;\n\n\t\t\tsetTimeout( function( ){ $errorBox.html(\"\").fadeOut( ); }, 3000);\n\n\t\t\te.preventDefault( );\n\t\t\te.stopPropagation( );\n\t\t}\n\n\t\tif( error == 0 ){\n\t\t\tdonateObj.amount = parseFloat(donation).formatMoney(2, ',', '.');\n\n\t\t\t$(\".donationAmount\").html( \"$\" + parseFloat(donation).formatMoney(2, ',', '.') );\t\n\t\t}\n\t});\n\n\t$(\"#continue-to-review\").on(\"click\", function( ){\n\n        var expYear = $('form[name=donationCheckoutForm]').find(\"input[name=exp_date_year]\").val( );\n\n        if( expYear.length == 4 ){\n            expYear = expYear.substring(2,4);\n\n            $('form[name=donationCheckoutForm]').find(\"input[name=exp_date_year]\").val( expYear );\n        }\n        \n        var formData = $('form[name=donationCheckoutForm]').serialize( );\n\n        var $button = $(this);\n        \n        $.ajax({\n            url: \"/validateDonation\",\n            method: \"POST\",\n            data: formData,\n            beforeSend: function( ){\n                \n                //clear any error messages\n                $(\".error\").html( \"\" ).hide( );\n                \n                //change button to show processing\n                $button.html( \"Validating...\");\n                $button.prop(\"disabled\", true);\n            },\n            success: function( resp ){\n\n                if( resp.status ){\n                    $button.html( \"Processing...\");\n                \n                    var $form = $('form[name=donationCheckoutForm]');\n\n                    var expYear = $form.find(\"input[name=exp_date_year]\").val( );\n\n                    if( expYear.length == 4 ){\n                        expYear = expYear.substring(2,4);\n                    }\n\n                    donateObj.first_name        = $form.find(\"input[name=first_name]\").val( );\n                    donateObj.last_name         = $form.find(\"input[name=last_name]\").val( );\n                    donateObj.email             = $form.find(\"input[name=email]\").val( );\n                    donateObj.cc_number         = $form.find(\"input[name=cc_number]\").val( );\n                    donateObj.name_on_card      = $form.find(\"input[name=name_on_card]\").val( );\n                    donateObj.exp_date          = $form.find(\"input[name=exp_date_month]\").val( ) + \"\" + expYear;\n                    donateObj.ccv               = $form.find(\"input[name=ccv]\").val( );\n                    donateObj.billingAddr1      = $form.find(\"input[name=billingAddress1]\").val( );\n                    donateObj.billingAddr2      = $form.find(\"input[name=billingAddress2]\").val( );\n                    donateObj.billingCity       = $form.find(\"input[name=billingCity]\").val( );\n                    donateObj.billingState      = $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n                    donateObj.billingStateId    = $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n                    donateObj.billingZip        = $form.find(\"input[name=billingZip]\").val( );\n                    donateObj.billingCountry    = $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n                    donateObj.billingCountryId  = $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\n                    var cc_mask = donateObj.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\n                    $reviewPage = $(\"#donate-page-three\");\n                    $thankYou   = $(\"#thank-you\");\n\n                    var billingAddress = \"<p>Billing Address</p>\" + donateObj.billingAddr1 + \"<br />\";\n                    if( donateObj.billingAddr2 != \"\" ){\n                        billingAddress += donateObj.billingAddr2 + \"<br />\";\n                    }\n\n                    billingAddress += donateObj.billingCity + \", \" + donateObj.billingState + \" \" + donateObj.billingZip + \" <br />\" + donateObj.billingCountry;\n\n                    var creditCardInformation = \"Card Number: \" + cc_mask + \"<br />\";\n                    creditCardInformation += \"Name: \" + donateObj.name_on_card + \"<br />\";\n                    creditCardInformation += \"Exp. Date:\" + $form.find(\"input[name=exp_date_month]\").val( ) + \"/\" + expYear + \"<br />\";\n                    creditCardInformation += \"CVV: \" + donateObj.ccv;\n\n                    $reviewPage.find(\".billingInformationReview\").html( billingAddress );\n                    $thankYou.find(\".billingInformationReview\").html( billingAddress );\n\n                    $reviewPage.find(\".creditCardInformation\").html( creditCardInformation );\n                    $thankYou.find(\".creditCardInformation\").html( creditCardInformation );\n\n                    $reviewPage.find(\".billingTotalReview\").text( \"$\" + donateObj.amount );\n                    $thankYou.find(\".billingTotalReview\").text(\"$\" + donateObj.amount );\n                    \n                    $button.val( \"review order\");\n                    $button.prop(\"disabled\", false);\n                    \n                    $.mobile.pageContainer.pagecontainer(\"change\", \"#donate-page-three\");\n                }else{\n                    for( var key in resp.errors ){\n                        $(\".\" + key + \"-error\").html( resp.errors[key] ).show( );\n                    }\n\n                    $button.html( \"review order\");\n                    $button.prop(\"disabled\", false);\n                }\n            }\n        });\n    });\n\n    $(\"#continue-to-paypal\").on(\"click\", function( ){\n\n    \t$donationId = \"\";\n\n        var $button = $(this);\n        \n        var d = new Date( );\n        \n        var now = d.getYear( ) + \"-\" + d.getMonth( ) + \"-\" + d.getDate( ) + \" \" + d.getHours( ) + \":\" + d.getMinutes( ) + \":\" + d.getMilliseconds( );\n\n        var donationData = {\n            user_id:                user_id, \n            item_id:                id, \n            item_type:              type, \n            billing_full_name:      donateObj.first_name + \" \" + donateObj.last_name, \n            first_name:             donateObj.first_name, \n            last_name:              donateObj.last_name, \n            email:                  donateObj.email,\n            billing_address_line1:  donateObj.billingAddr1, \n            billing_address_line2:  donateObj.billingAddr2, \n            billing_city:           donateObj.billingCity, \n            billing_state:          donateObj.billingStateId,  \n            billing_country:        donateObj.billingCountryId, \n            billing_zip:            donateObj.billingZip, \n            donation_amount:        donateObj.amount,\n            cc_number:              donateObj.cc_number,\n            ccv:                    donateObj.ccv,\n            exp_date:               donateObj.exp_date,\n            payment_gateway:        payment_gateway \n        };\n        \n        $.ajax({\n            method: \"post\",\n            url: \"/setPendingDonation\",\n            data: donationData,\n            beforeSend: function( ){\n\n                $button.html( \"Processing...\");\n                $button.prop(\"disabled\", true);\n            },\n            dataType: \"json\",\n            success: function( data ){\n                \n                dataId = data.id;\n\n                $button.html( \"Checkout\");\n                $button.prop(\"disabled\", false);\n                \n                if( payment_gateway == 3 ){\n\n                     //find the paypalStdForm\n                    var $checkoutForm = $(\"form[name=paypalStdCheckout]\");\n                    \n                    //Input values into the form\n                    $checkoutForm.find(\"input[name=cmd]\").val(\"_donations\");\n                    $checkoutForm.find(\"input[name=return]\").val(window.location.protocol + \"//\" +  window.location.host + \"/thankyou\");\n                    $checkoutForm.find(\"input[name=notify_url]\").val(window.location.protocol + \"//\" +  window.location.host + \"/ipn\");\n\n                    $checkoutForm.find(\"input[name=amount]\").val( donateObj.amount );\n\n                    $checkoutForm.find(\"input[name=custom]\").val( dataId );\n                    \n                    $checkoutForm.find(\"input[name=business]\").val( paypal_username );\n                    \n                    $checkoutForm.find(\"input[name=first_name]\").val( donateObj.first_name );\n                    \n                    $checkoutForm.find(\"input[name=last_name]\").val( donateObj.last_name );\n\n                    $checkoutForm.find(\"input[name=email]\").val( donateObj.email );\n                    \n                    $checkoutForm.find(\"input[name=address1]\").val( donateObj.billingAddr1 );\n                    \n                    $checkoutForm.find(\"input[name=address2]\").val( donateObj.billingAddr2 );\n                    \n                    $checkoutForm.find(\"input[name=city]\").val( donateObj.billingCity );\n                    \n                    $checkoutForm.find(\"input[name=state]\").val( donateObj.billingState );\n                    \n                    $checkoutForm.find(\"input[name=zip]\").val( donateObj.billingZip );\n                    \n                    $checkoutForm.find(\"input[name=country]\").val( donateObj.billingCountry );\n                    \n                    $checkoutForm.trigger(\"submit\");\n                }else{\n\n                    $(\"#thank-you\").find(\".transaction-id\").html( data.txnId );\n\n                     $.mobile.pageContainer.pagecontainer(\"change\", \"#thank-you\");   \n                }\n            }\n        })\n    });\n\n    //Action for Shipping Address Selection\n    $(\"select[name=userAddresses]\").on(\"change\", function( ){\n        \n        var addressSelected = $(this).find(\":selected\").val( );\n        \n        if( addressSelected == 0 ){\n            $(\"input[name=billingAddress1]\").val( \"\" );\n            $(\"input[name=billingAddress2]\").val( \"\" );\n            $(\"input[name=billingCity]\").val( \"\" );\n            $(\"select[name=billingState] option\").each( function( i ){\n                if( i > 0 ){\n                    $(this).remove( );\n                }\n            });\n            $(\"input[name=billingZip]\").val( \"\" );\n            $(\"select[name=billingCountry]>option:eq(0)\").prop(\"selected\", true);\n        }else{\n            \n            var addressData = addressSelected.split(\"|\");\n            \n            $(\"input[name=billingAddress1]\").val( addressData[2] );\n            $(\"input[name=billingAddress2]\").val( addressData[3] );\n            $(\"input[name=billingCity]\").val( addressData[4] );\n            $(\"input[name=billingZip]\").val( addressData[6] );\n            \n            $(\"select[name=billingCountry]\").find(\"option[value=\" + addressData[7] + \"]\").prop(\"selected\", true);\n\n            $(\"select[name=billingCountry]\").trigger(\"change\");\n\n            setTimeout( function( ){\n                $(\"select[name=billingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n            }, 1000);\n        }\n    });\n});","String.prototype.capitalizeFirstLetter = function() {\n    return this.charAt(0).toUpperCase() + this.slice(1);\n}\n\nvar fundObj = {};\n \n$(function( ){\n\n    var page;\n\n    setTimeout(function () {\n        page = $(':mobile-pagecontainer').pagecontainer('getActivePage')[0].id;\n\n        if( page == \"fund-page-two\" || page == \"fund-page-three\" || page == \"thank-you\" ){\n            if( typeof fundObj.amount !== \"undefined\" ){\n                $(\"input[name=donationAmt]\").val( fundObj.amount );\n            }else{\n                $.mobile.pageContainer.pagecontainer(\"change\", \"#fund-page-one\");\n            }        \n        }\n    }, 1000);\n\n    fundObj.id \t\t\t= $(\"div[data-role=main]\").find(\"input[name=id]\").val( );\n\tfundObj.projectName = $(\"div[data-role=main]\").find(\"input[name=entityName]\").val( );\n\n\tvar userId \t\t\t= $(\"div[data-role=main]\").find(\"input[name=user_id]\").val( );\n\tvar paypal_username = $(\"div[data-role=main]\").find(\"input[name=paypalUn]\").val( );\n    var payment_gateway = $(\"div[data-role=main]\").find(\"input[name=payment_gateway]\").val( );\n\n    var $incentive \t\t= $(\".fund-incentives-list\").find(\".incentive\");\n\n\t//Select Incentive on first page of checkout\n    $incentive.on(\"click\", function( ){\n\n    \tfundObj.incentive \t\t= $(this).data('incentive-id');\n     \tfundObj.incentiveName \t= $(this).find(\".title\").text( );\n\t\tfundObj.type \t\t\t= 'incentive';\n\n     \tif( $(this).find(\"input[name=shippingRequired]\").val( ) == \"Y\" ){\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=showShipping]\").val(\"Y\");\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".shipping-info\").slideDown( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").show( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=sameAsShipping]\").prop('checked', false);\n\t\t}else{\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=showShipping]\").val(\"N\");\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".shipping-info\").slideUp( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").hide( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=sameAsShipping]\").prop('checked', false);\n\t\t}\n\n        if( ! $(this).hasClass('selected') ){\n            $(\".fund-incentives-list\").find(\".incentive\").each( function( ){\n\n                if( $(this).hasClass('selected') ){\n\n                \tvar p = $(this).find(\".info>.price\").html( );\n\n                \t$(this).find('.donation').find(\"input[name=donationAmt]\").val( p.replace(\"$\", \"\").trim( ) );\n\n                    $(this).find('.donation').slideUp( );\n                    $(this).removeClass('selected');\n                }\n            });\n\n            if( $(\".details-fund\").hasClass('selected') ){\n\n                $(\".details-fund\").find('.donation').slideUp( );\n                $(\".details-fund\").find('.donation').find('input[type=text]').val(\"\");\n                $(\".details-fund\").removeClass('selected');\n            }\n\n            $(this).addClass('selected');\n            $(this).find(\".donation\").slideDown( );    \n        }\n    });\n\n    //Select the contribute button on the Incentive Page\n    $(\".details-fund\").on(\"click\", function( ){\n\n    \tfundObj.incentive \t\t= \"\";\n    \tfundObj.type\t  \t\t= 'fund';\n    \tfundObj.incentiveName \t= \"\";\n\n    \t$(\"form[name=fundCheckoutForm]\").find(\"input[name=showShipping]\").val(\"N\");\n\t\t$(\"form[name=fundCheckoutForm]\").find(\".shipping-info\").slideUp( );\n\n        if( ! $(this).hasClass('selected') ){\n            $(\".fund-incentives-list\").find(\".incentive\").each( function( ){\n\n                if( $(this).hasClass('selected') ){\n\n                \tvar p = $(this).find(\".info>.price\").html( );\n\n                \t$(this).find('.donation').find(\"input[name=donationAmt]\").val( p.replace(\"$\", \"\").trim( ) );\n\n                    $(this).find('.donation').slideUp( );\n                    $(this).removeClass('selected');\n                }\n            });\n\n            $(this).addClass('selected');\n            $(this).find(\".donation\").slideDown( );\n        }\n    });\n\n    $(document).on(\"click\", \"#back-to-site\", function( e ){\n\n        var alias = $(this).data('alias');\n\n        location.href = '/crowdfunding/' + alias;\n\n    });\n\n    $(document).on(\"click\", \".continue-button\", function( e ){\n\t\t\n\t\tvar donation \t= $(this).parent( ).parent( ).find(\"input[name=fundAmt]\").val( );\n\t\tvar $errorBox \t= $(\".donationAmountError\");\n\t\tvar error    \t= 0;\n\t\tvar $this\t\t= $(this);\n\n\t\tif( isNaN( parseFloat( donation) ) ){\n\t\t\t\n\t\t\t$errorBox.html( \"Please Enter a Number.\").show( );\n\t\t\terror = 1;\n\n\t\t\tsetTimeout( function( ){ $errorBox.html(\"\").fadeOut( ); }, 3000);\n\n\t\t\te.preventDefault( );\n\t\t\te.stopPropagation( );\n\t\t}\n\n\t\tif( error == 0 ){\n\t\t\tfundObj.amount = parseFloat(donation).formatMoney(2, ',', '.');\n\n\t\t\t$(\".donationAmount\").html( \"$\" + parseFloat(donation).formatMoney(2, ',', '.') );\t\n\n\t\t\tvar $pageTwo = $(\"#fund-page-two\")\n\t\t\t\t\t\t\t.find(\"[data-role=main]\");\n\n\t\t\t$pageTwo.find(\".fund-type\").html( fundObj.type.capitalizeFirstLetter( ) );\n\t\t\t$pageTwo.find(\".donation-amount\").html( \"$\" + fundObj.amount );\n\n\t\t\tif( fundObj.type == \"incentive\" ){\n\n\t\t\t\t$pageTwo.find(\".sameAsShipping\").hide( );\n\n\t\t\t\tif( $this.parent( ).parent( ).find(\"input[name=shippingRequired]\").val( ) == \"Y\"){\n\t\t\t\t\t$pageTwo.find(\"input[name=showShipping]\").val(\"Y\");\n\t\t\t\t\t$pageTwo.find(\".shipping-info\").removeClass('hidden');\n\n\t\t\t\t\t$pageTwo.find(\".sameAsShipping\").show( );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$pageTwo.find(\".incentive-data\").css(\"display\",\"table\");\n\t\t\t\t$pageTwo.find(\".incentive-name\").html( fundObj.incentiveName );\n\t\t\t\t$pageTwo.find(\".donation-edit\").hide( );\n\t\t\t\t$pageTwo\n\t\t\t\t.find(\".incentive-desc\")\n\t\t\t\t.html( $(\"#fund-page-one\")\n\t\t\t\t\t\t.find(\"[data-incentive-id=\" + fundObj.incentive + \"]\")\n\t\t\t\t\t\t.find(\".description\")\n\t\t\t\t\t\t.html( ) \n\t\t\t\t);\n\t\t\t}else{\n\t\t\t\t$pageTwo.find(\"input[name=showShipping]\").val(\"N\");\n\t\t\t\t$pageTwo.find(\".shipping-info\").addClass('hidden');\n\t\t\t\t$pageTwo.find(\".donation-edit\").show( );\n\t\t\t\t$pageTwo.find(\".sameAsShipping\").hide( );\n\n\t\t\t\t$pageTwo.find(\".incentive-name\").html( \"\" );\n\t\t\t\t$pageTwo\n\t\t\t\t.find(\".incentive-desc\")\n\t\t\t\t.html( \"\" );\n\t\t\t}\n\t\t}\n\t});\n\n    //Action for checking out for Step 2 ( Details Page );\n    $(\"#continue-to-review\").on(\"click\", function( ){\n        \n        var $button = $(this);\n\n        var expYear = $('form[name=fundCheckoutForm]').find(\"input[name=exp_date_year]\").val( );\n\n        if( expYear.length == 4 ){\n            expYear = expYear.substring(2,4);\n\n            $('form[name=fundCheckoutForm]').find(\"input[name=exp_date_year]\").val( expYear );\n        }\n\n        var formData = $('form[name=fundCheckoutForm]').serialize( );\n        \n        $.ajax({\n            url: \"/crowdfunding/validateFunding\",\n            method: \"POST\",\n            data: formData,\n            beforeSend: function( ){\n                \n                //clear any error messages\n                $(\".error\").html( \"\" ).hide( );\n                \n                //change button to show processing\n                $button.html( \"Validating...\");\n                $button.prop(\"disabled\", true);\n            },\n            success: function( ){\n\n                $button.html( \"review order\" );\n                $button.prop(\"disabled\", false);\n                \n                var $form = $('form[name=fundCheckoutForm]');\n\n                var expYear = $form.find(\"input[name=exp_date_year]\").val( );\n\n                if( expYear.length == 4 ){\n                    expYear = expYear.substring(2,4);\n                }\n\n                fundObj.first_name \t\t= $form.find(\"input[name=first_name]\").val( );\n                fundObj.last_name  \t\t= $form.find(\"input[name=last_name]\").val( );\n                fundObj.email\t\t\t= $form.find(\"input[name=email]\").val( );\n                fundObj.cc_number       = $form.find(\"input[name=cc_number]\").val( );\n                fundObj.name_on_card    = $form.find(\"input[name=name_on_card]\").val( );\n                fundObj.exp_date        = $form.find(\"input[name=exp_date_month]\").val( ) + \"\" + expYear;\n                fundObj.exp_date_m      = $form.find(\"input[name=exp_date_month]\").val( ); \n                fundObj.exp_date_y      = expYear;\n                fundObj.ccv             = $form.find(\"input[name=ccv]\").val( );\n\n                var cc_mask = fundObj.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\n                fundObj.saveShippingAddress = false;\n\n                if( $form.find(\"input[name=showShipping]\").val( ) == \"Y\" ){\n                \tfundObj.shippingAddr1 \t\t= $form.find(\"input[name=shippingAddress1]\").val( );\n                \tfundObj.shippingAddr2 \t\t= $form.find(\"input[name=shippingAddress2]\").val( );\n                \tfundObj.shippingCity \t\t= $form.find(\"input[name=shippingCity]\").val( );\n                \tfundObj.shippingState \t\t= $form.find(\"select[name=shippingState]\").find(\"option:selected\").text( );\n                \tfundObj.shippingStateId \t= $form.find(\"select[name=shippingState]\").find(\"option:selected\").val( );\n                \tfundObj.shippingZip \t\t= $form.find(\"input[name=shippingZip]\").val( );\n                \tfundObj.shippingCountry \t= $form.find(\"select[name=shippingCountry]\").find(\"option:selected\").text( );\n                \tfundObj.shippingCountryId \t= $form.find(\"select[name=shippingCountry]\").find(\"option:selected\").val( );\n\n                \tif( $form.find(\"input[name=saveShippingAddress]\").is(\":checked\") ){\n                \t\tfundObj.saveShippingAddress = true;\n                \t}\n                }\n\t\t\t\t\n                fundObj.billingAddr1 \t\t\t= $form.find(\"input[name=billingAddress1]\").val( );\n                fundObj.billingAddr2 \t\t\t= $form.find(\"input[name=billingAddress2]\").val( );\n                fundObj.billingCity \t\t\t= $form.find(\"input[name=billingCity]\").val( );\n                fundObj.billingState \t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n                fundObj.billingStateId\t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n                fundObj.billingZip \t\t\t\t= $form.find(\"input[name=billingZip]\").val( );\n                fundObj.billingCountry \t\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n                fundObj.billingCountryId \t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\n                fundObj.saveBillingAddress = false;\n\n                if( $form.find(\"input[name=saveBillingAddress]\").is(\":checked\") ){\n            \t\tfundObj.saveBillingAddress = true;\n            \t}\n                \n                var $pageThree = $(\"#fund-page-three\");\n                var $thankYou  = $(\"#thank-you\");\n                    \n                if( fundObj.type == \"incentive\" ){\n\n                \tvar $chosenIncentive = \n\t                $(\".fund-incentives-list\").find(\"[data-incentive-id=\" + fundObj.incentive + \"]\");\n\n\t\t\t\t\t$pageThree.find(\".order-review-incentive\").find(\".header\").prepend( \"Incentive\" );\n                    $thankYou.find(\".order-review-incentive\").find(\".header\").prepend( \"Incentive\" );\n                    \n                    $pageThree.find(\".incentive-title\").html( $chosenIncentive.find(\".title\").text( ) ).show( ); \n                    $thankYou.find(\".incentive-title\").html( $chosenIncentive.find(\".title\").text( ) ).show( ); \n                    \n                    $pageThree.find(\".incentive-description\").html( $chosenIncentive.find(\".description\").text( ) ).show( );\n                    $thankYou.find(\".incentive-description\").html( $chosenIncentive.find(\".description\").text( ) ).show( );\n                    \n                }else{\n                    $pageThree.find(\".order-review-incentive\").find(\".header\").prepend( \"Fund Amount\" );\n                    $thankYou.find(\".order-review-incentive\").find(\".header\").prepend( \"Fund Amount\" );\n\n                    $pageThree.find(\".incentive-title\").hide( );\n                    $thankYou.find(\".incentive-title\").hide( );\n\n                    $pageThree.find(\".incentive-description\").hide( );\n                    $thankYou.find(\".incentive-description\").hide( );\t\n                }\n                \n                $pageThree.find(\".donation-amount\").html( \"$\" + fundObj.amount );\n                $thankYou.find(\".donation-amount\").html( \"$\" + fundObj.amount );\n\n                if( $form.find(\"input[name=showShipping]\").val( ) == \"Y\" ){\n\n                    var shippingAddress = fundObj.shippingAddr1;\n\n                    if( fundObj.shippingAddr2 != \"\" ){\n                        shippingAddress += fundObj.shippingAddr2;\n                    }\n\n                    shippingAddress += fundObj.shippingCity + \", \" + fundObj.shippingState + \" \" + fundObj.shippingZip;\n                    shippingAddress += \"<br />\" + fundObj.shippingCountry;\n\n                    $pageThree.find(\".shipping-address\").html( shippingAddress );\n                    $thankYou.find(\".shippingInformationReview\").html( shippingAddress );\n\n                \t$pageThree.find(\".order-review-shipping-address\").show( );\n                    $thankYou.find(\".shipping-container\").show( );\n                    \n\t            }else{\n\t\t\t\t\t$(\".order-review-shipping-address\").hide( );\n                    $thankYou.find(\".shipping-container\").hide( );\n\t\t\t\t}\n\n                var creditCardInformation = \"Card Number: \" + cc_mask + \"<br />\";\n                    creditCardInformation += \"Name: \" + fundObj.name_on_card + \"<br />\";\n                    creditCardInformation += \"Exp. Date:\" + $form.find(\"input[name=exp_date_month]\").val( ) + \"/\" + expYear + \"<br />\";\n                    creditCardInformation += \"CVV: \" + fundObj.ccv;\n\n\t\t\t\t$pageThree.find(\".credit-card-information\").html( creditCardInformation );\n                $thankYou.find(\".creditCardInformation\").html( creditCardInformation );\n\n                var billingAddress = fundObj.billingAddr1 + \"<br />\";\n                if( fundObj.billingAddr2 != \"\" ){\n                    billingAddress += fundObj.billingAddr2 + \"<br />\";\n                }\n\n                billingAddress += fundObj.billingCity + \", \" + fundObj.billingState + \" \" + fundObj.billingZip + \" <br />\" + fundObj.billingCountry;\n                \n                $pageThree.find(\".billing-address\").html( billingAddress );\n                $thankYou.find(\".billingInformationReview\").html( billingAddress );\n                \n                $button.val( \"review order\");\n                $button.prop(\"disabled\", false);\n\n                $.mobile.pageContainer.pagecontainer(\"change\", \"#fund-page-three\");\n            },\n            statusCode: {\n                422: function( jqXHR, textStatus, errorThrown ){\n                    \n                    $button.html( \"review order\");\n                    $button.prop(\"disabled\", false);\n                    \n                    var errors = JSON.parse( jqXHR.responseText );\n                    \n                    for( var key in errors ){\n                        $(\".\" + key + \"-error\").html( errors[key] ).removeClass( 'hidden' ).show( );\n                    }\n\n                    $('html,body').scrollTop(0);\n                }\n            }\n        });\n\t});\n\n\t$(\".checkout-button\").on(\"click\", function( ){\n        \n        $donationId = \"\";\n\n        var $button = $(this);\n        \n        var project_data = {\n            \"user_id\" :                 userId,\n            \"project_id\" :              fundObj.id,\n            \"incentive_id\" :            fundObj.incentive,\n            \"project_title\" :           fundObj.projectName,\n            \"incentive_title\" :         fundObj.incentiveName,\n            \"donation_amount\" :         fundObj.amount,\n            \"cc_number\":                fundObj.cc_number,\n            \"ccv\":                      fundObj.ccv,\n            \"exp_date\":                 fundObj.exp_date,\n            \"first_name\":               fundObj.first_name,\n            \"last_name\":                fundObj.last_name,\n            \"email\":                    fundObj.email, \n            \"billing_full_name\":        fundObj.first_name + \" \" + fundObj.last_name,\n            \"billing_first_name\":       fundObj.first_name,\n            \"billing_last_name\" :       fundObj.last_name,\n            \"billing_email\":            fundObj.email,\n            \"billing_address_line1\":    fundObj.billingAddr1,\n            \"billing_address_line2\":    fundObj.billingAddr2,\n            \"billing_city\":             fundObj.billingCity,\n            \"billing_state\":            fundObj.billingStateId,\n            \"billing_zip\":              fundObj.billingZip,\n            \"billing_country\":          fundObj.billingCountryId,\n            \"shipping_full_name\":       fundObj.first_name + \" \" + fundObj.last_name,\n            \"shipping_email\":           fundObj.email,\n            \"shipping_address_line1\":   fundObj.shippingAddr1,\n            \"shipping_address_line2\":   fundObj.shippingAddr2,\n            \"shipping_city\":            fundObj.shippingCity,\n            \"shipping_state\":           fundObj.shippingStateId,\n            \"shipping_zip\":             fundObj.shippingZip,\n            \"shipping_country\":         fundObj.shippingCountryId,\n            \"saveShippingAddress\": \t\tfundObj.saveShippingAddress,\n            \"saveBillingAddress\": \t\tfundObj.saveBillingAddress,\n            \"hasShippingData\":          fundObj.hasShippingData,\n            \"payment_gateway\":          payment_gateway\n        };\n\n        $.ajax({\n            method: \"post\",\n            url: \"/crowdfunding/setPendingDonation\",\n            data: project_data,\n            beforeSend: function( ){\n                $button.html( \"Processing...\");\n                $button.prop(\"disabled\", true);\n            },\n            dataType: \"json\",\n            success: function( data ){\n\n                $button.html( \"Place Order\");\n                $button.prop(\"disabled\", false);\n                \n                dataId = data.id;\n                \n                if( payment_gateway == 3 ){\n\n                     //find the paypalStdForm\n                    var $checkoutForm = $(\"form[name=paypalStdCheckout]\");\n                    \n                    //Input values into the form\n                    $(\"input[name=cmd]\").val(\"_donations\");\n                    $(\"input[name=return]\").val(window.location.protocol + \"//\" +  window.location.host + \"/thankyou\");\n                    $(\"input[name=notify_url]\").val(window.location.protocol + \"//\" +  window.location.host + \"/crowdfunding/ipn\");\n\n                    $(\"input[name=amount]\").val( fundObj.amount );\n\n                    $(\"input[name=custom]\").val( dataId + \"|\" + fundObj.incentive );\n                    \n                    $(\"input[name=business]\").val( paypal_username );\n                    \n                    $(\"input[name=first_name]\").val( fundObj.first_name );\n                    \n                    $(\"input[name=last_name]\").val( fundObj.last_name );\n\n                    $(\"input[name=email]\").val( fundObj.email );\n                    \n                    $(\"input[name=address1]\").val( fundObj.billingAddr1 );\n                    \n                    $(\"input[name=address2]\").val( fundObj.billingAddr2 );\n                    \n                    $(\"input[name=city]\").val( fundObj.billingCity );\n                    \n                    $(\"input[name=state]\").val( fundObj.billingState );\n                    \n                    $(\"input[name=zip]\").val( fundObj.billingZip );\n                    \n                    $(\"input[name=country]\").val( fundObj.billingCountry );\n                    \n                    $checkoutForm.trigger(\"submit\");\n                }else{\n                    $(\"#thank-you\").find(\".transaction-id\").html( data.txnId );\n\n                     $.mobile.pageContainer.pagecontainer(\"change\", \"#thank-you\"); \n                }\n            }\n        });\n    });\n});","$(function( ){\n\n\t/**\n\t*\n\t* Checkout process for products\n\t*\n\t*/\n\n\tsetTimeout(function () {\n        page = $(':mobile-pagecontainer').pagecontainer('getActivePage')[0].id;\n\n        if( page == \"purchase-page-one\" || page == \"purchase-page-two\" || page == \"thank-you\" ){\n            if( typeof data.price === \"undefined\" ){\n                location.href = \"/product/\" + $(\"input[name=alias]\").val( );\n            }        \n        }\n    }, 1000);\n\t\n\tvar paypal_username = $(\"input[name=paypalUn]\").val( );\n    var user_id         = $(\"form[name=purchaseCheckoutForm]\").find(\"input[name=user_id]\").val( );\n\n    //Get Project Data\n    \n    var product_name \t= $(\"input[name=product_name]\").val( );\n    var org_name \t\t= $(\"input[name=org_name]\").val( );\n    var product_id \t\t= $(\".add-to-cart\").data('id');\n    var payment_gateway = 2;\n    \n    var data \t\t\t= {user_id: user_id, id: product_id, shipping: parseFloat( $(\"input[name=shipping]\").val( ) ), saveShipping: false, saveBilling: false, payment_gateway: payment_gateway};\n\n    $(document).on(\"click\", \"#back-to-site\", function( e ){\n\n        var alias = $(this).data('alias');\n\n        location.href = '/';\n\n    });\n    \n    /**\n\t*\n\t* Initial step to open up the lightbox to continue with the product checkout\n\t*\n\t*/\n    \n    $(\".add-to-cart\").on(\"click\", function( ){\n\t    \n        //$(this).prop('disabled', 'true');\n        \n\t\tvar modifiers = [];\n        var errors    = [];\n        var product_alias = $(this).data('alias');\n        \n        $(\".error\").hide( );\n\n\t\t$(\".product-modifiers select\").each(function( i ){\n\t        \n\t        var name \t\t= $(this).find(\"option:first\").text( );\n\t\t\t\n\t\t\tvar value \t\t= $(this).find(\":selected\").val( );\n\t\t\tvar valueText \t= $(this).find(\":selected\").text( );\n\n\t\t\tvar modId \t\t= $(this).data('mod-id');\n\n\t\t\tif( value == 0 ){\n\t\t\t\terrors.push($(this).attr(\"name\") + \"|\" + \"Please select a \" + name);\n\t\t\t}else{\n\t\t\t\tmodifiers.push(\"<div class='modifier'><b>\" + name.replace(\"Select \", \"\") + \"</b>: \" + valueText + \"</div>\");\n\t\t\t\t$(\"#purchase-page-one, #purchase-page-two, #thank-you\")\n\t\t\t\t.find(\".name[data-id=\" + modId + \"]\")\n\t\t\t\t.html( name.replace(\"Select\",\"\") );\n\n\t\t\t\t$(\"#purchase-page-one, #purchase-page-two, #thank-you\")\n\t\t\t\t.find(\".value[data-id=\" + modId + \"]\")\n\t\t\t\t.html( valueText );\n\t\t\t}\n\t\t});\n\t\t\n\t\tif( $(\"select[name=quantity]\").find(\":selected\").val( ) == \"0\" ){\n\t\t\terrors.push(\"quantity|Please Input a Quantity\");\n\t\t}\n\t\t\n\t\tif( errors.length == 0 ){\n\t\t\t\n\t\t\tdata.price \t = parseFloat( $(\".price\").data('price') ).formatMoney(2, ',', '.');\n\t\t\t\n\t\t\tdata.quantity = parseInt( $(\"select[name=quantity]\").find(\":selected\").val( ) );\n\n\t\t\t$(\"#purchase-page-one, #purchase-page-two, #thank-you\")\n\t\t\t.find(\".quantity\")\n\t\t\t.html( data.quantity );\n\n\t\t\t$(\"#purchase-page-one, #purchase-page-two, #thank-you\")\n\t\t\t.find(\".price\")\n\t\t\t.html( \"$\" + data.price );\n\n\t\t\t$.mobile.pageContainer.pagecontainer(\"change\", \"#purchase-page-one\");\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tfor(var x in errors){\n\t\t\t\t\n\t\t\t\tvar error = errors[x].split(\"|\");\n\t\t\t\t\n\t\t\t\t$(\".\" + error[0] + \"-error\").html(error[1]).show( );\n\t\t\t}\n\t\t}\n    });\n    \n    /*\n\t*\n\t* Create event for getting quantity amount for selected modifiers\n\t*\n\t*/\n\t\n\tvar modifierOptions = [];\n\tvar combo = \"\";\n\t\n\t$(\".product-modifiers select\").on(\"change\", function( i ){\n\t\t\n\t\tvar allSelected = true;\n\t\t\n\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\n\t\t\tif( parseInt( $(this).find(\":selected\").val( ) ) == 0 ){\n\t\t\t\tallSelected = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif( allSelected ){\n\t\t\t\n\t\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\tmodifierOptions.push( parseInt( $(this).find(\":selected\").val( ) ) );\t\n\t\t\t});\n\t\t\t\n\t\t\tmodifierOptions = modifierOptions.reverse( );\n\t\t\t\t\n\t\t\tcombo = modifierOptions.join( );\n\t\t\t\n\t\t\tdata.modifierId = combo;\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\tmethod: \"get\",\n\t\t\t\turl: \"/products/getQuantity\",\n\t\t\t\tdata: \"options=\" + combo + \"&id=\" + product_id,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tbeforeSend: function( ){\n\n\t\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\t\t$(this).remove( );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Getting Quantity ...\");\n\t\t\t\t},\n\t\t\t\tsuccess: function( resp ){\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Select Quantity\");\n\t\t\t\t\tmodifierOptions = [];\n\t\t\t\t\t\n\t\t\t\t\tif( parseInt( resp.count ) > 0 ){\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor( var i = 1 ; i <= resp.count ; i++ ){\n\t\t\t\t\t\t\t$(\"select[name=quantity]\").append(\"<option value='\" + i + \"'>\" + i + \"</option>\");\n\t\t\t\t\t\t\t//$details.find(\"select[name=product-quantity]\").append(\"<option value='\" + i + \"'>\" + i + \"</option>\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//data.modifierId = resp.modifier_id;\n\t\t\t\t\t\t\n\t\t\t\t\t\t$(\".price\").data(\"price\", resp.price);\n\t\t\t\t\t\t$(\".price\").html(\"$\" + parseFloat( resp.price ) + \".00\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\t\n\t\t\tif( $(\"select[name=quantity]\").length > 1 ){\n\t\t\t\t\n\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\n\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\tremove( $(this) );\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t}\n\t});\n    \n    /**\n\t*\n\t* Step 1 Continue checkout     \n\t*    \n\t*/\n    \n    $(\"#purchase-page-one\").find('.continue-button').on(\"click\", function( ){\n\n    \tvar expYear = $('form[name=purchaseCheckoutForm]').find(\"input[name=exp_date_year]\").val( );\n\n        if( expYear.length == 4 ){\n            expYear = expYear.substring(2,4);\n\n            $('form[name=purchaseCheckoutForm]').find(\"input[name=exp_date_year]\").val( expYear );\n        }\n\t    \n\t    var formData = $('form[name=purchaseCheckoutForm]').serialize( );\n\n\t    console.log( formData );\n\n\t    var $button = $(this);\n\t\t\n\t\t$.ajax({\n            url: \"/product/validateCheckout\",\n            method: \"POST\",\n            data: formData,\n            beforeSend: function( ){\n                \n                //clear any error messages\n                $(\".error\").html( \"\" ).addClass('hidden');\n                \n                //change button to show processing\n\t\t\t\t$button.html( \"Validating...\");\n\t\t        $button.prop(\"disabled\", true);\n            },\n            success: function( resp ){\n\t            \n\t            $button.html( \"review order\");\n\t\t        $button.prop(\"disabled\", false);\n\t\t        \n\t\t        if( resp.status ){\n\n\t\t        \tvar $form = $('form[name=purchaseCheckoutForm]');\n\n\t\t        \tvar expYear = $form.find(\"input[name=exp_date_year]\").val( );\n\n\t                if( expYear.length == 4 ){\n\t                    expYear = expYear.substring(2,4);\n\t                }\n\t\t\t        \n\t\t\t        data.first_name\t\t\t\t= $form.find(\"input[name='first_name']\").val( );\n\t\t\t        data.last_name\t\t\t\t= $form.find(\"input[name='last_name']\").val( );\n\t\t\t        data.email\t\t\t\t\t= $form.find(\"input[name='email']\").val( );\n\t\t\t        data.shipping_address_line1 = $form.find(\"input[name='shippingAddress1']\").val( );\n\t\t\t        data.shipping_address_line2 = $form.find(\"input[name='shippingAddress2']\").val( );\n\t\t\t        data.shipping_city  \t\t= $form.find(\"input[name='shippingCity']\").val( );\n\t\t\t        data.shipping_state\t\t\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").text( );\n\t\t\t        data.shippingstateId\t\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").val( );\n\t\t\t        data.shipping_zip\t\t\t= $form.find(\"input[name='shippingZip']\").val( );\n\t\t\t        data.shipping_country\t\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").text( );\n\t\t\t        data.shippingcountryId\t\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").val( );\n\t\t\t        data.billing_address_line1\t= $form.find(\"input[name='billingAddress1']\").val( );\n\t\t\t        data.billing_address_line2  = $form.find(\"input[name='billingAddress2']\").val( );\n\t\t\t        data.billing_city\t\t\t= $form.find(\"input[name='billingCity']\").val( );\n\t\t\t        data.billing_state \t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n\t\t\t        data.billingstateId\t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n\t\t\t        data.billing_zip\t\t\t= $form.find(\"input[name='billingZip']\").val( );\n\t\t\t        data.billing_country\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n\t\t\t        data.billingcountryId\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\t\t\t        data.cc_number\t\t\t\t= $form.find(\"input[name=cc_number]\").val( );\n                \tdata.name_on_card  \t\t\t= $form.find(\"input[name=name_on_card]\").val( );\n                \tdata.exp_date\t\t\t\t= $form.find(\"input[name=exp_date_month]\").val( ) + \"\" + expYear;\n                \tdata.ccv \t\t\t\t\t= $form.find(\"input[name=ccv]\").val( );\n\n                \tvar cc_mask = data.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\t\t\t\t        \n\t\t\t        var shipping;\n\n\t\t\t\t\tvar $review \t= $(\"#purchase-page-two\");\n\t\t\t\t\tvar $thankYou \t= $(\"#thank-you\");\n\n\t\t\t\t\tdata.shipping = parseFloat( data.shipping ).formatMoney(2, ',', '.');\n\t\t\t\t\t\n\t\t\t\t\tif( parseInt( data.shipping) == 0 ){\n\t\t\t\t\t\tshipping = 0.00;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tshipping = parseFloat( data.shipping );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar subTotal = parseFloat( data.price ) * parseInt( data.quantity );\n\t\t\t\t\t\n\t\t\t\t\tvar tax = (subTotal/100) * parseFloat( resp.taxCode.tax_percentage );\n\t\t\t\t\t\n\t\t\t\t\tdata.tax = parseFloat(tax).formatMoney(2, ',', '.');\n\t\t\t\t\t\n\t\t\t\t\tvar total = parseFloat(subTotal) + parseFloat( tax ) + parseFloat( data.shipping);\n\n\t\t\t\t\ttotal = total.formatMoney(2, ',', '.');\n\n\t\t\t\t\tvar shippingAddress = data.shipping_address_line1 + \"<br />\";\n\n\t\t\t\t\tif( data.shipping_address_line2 != \"\" ){\n\t\t\t\t\t\tshippingAddress += data.shipping_address_line2 + \"<br />\";\n\t\t\t\t\t}\n\n\t\t\t\t\tshippingAddress += data.shipping_city + \", \" + data.shipping_state + \" \" + data.shipping_zip;\n\t\t\t\t\tshippingAddress += \"<br />\" + data.shipping_country;\n\t\t\t\t\t\n\t\t\t\t\t$review.find(\".shipping-address\").html( shippingAddress );\n\t\t\t\t\t$thankYou.find(\".shippingInformationReview\").html( shippingAddress );\n\n\t\t\t\t\tvar billingAddress = data.billing_address_line1 + \"<br />\";\n\n\t\t\t\t\tif( data.billing_address_line2 != \"\" ){\n\t\t\t\t\t\tbillingAddress += data.billing_address_line2 + \"<br />\";\n\t\t\t\t\t}\n\n\t\t\t\t\tbillingAddress += data.billing_city + \", \" + data.billing_state + \" \" + data.billing_zip;\n\t\t\t\t\tbillingAddress += \"<br />\" + data.billing_country;\n\t\n\t                $review.find(\".billing-address\").html( billingAddress );\n\t                $thankYou.find(\".billingInformationReview\").html( billingAddress );\n\n\t                var creditCardInformation = \"Card Number: \" + cc_mask + \"<br />\";\n                    creditCardInformation += \"Name: \" + data.name_on_card + \"<br />\";\n                    creditCardInformation += \"Exp. Date:\" + $form.find(\"input[name=exp_date_month]\").val( ) + \"/\" + expYear + \"<br />\";\n                    creditCardInformation += \"CVV: \" + data.ccv;\n\n\t\t\t\t\t$review.find(\".credit-card-information\").html( creditCardInformation );\n                \t$thankYou.find(\".creditCardInformation\").html( creditCardInformation );\n\t                \n\t                $review.find(\".item-price\").text( \"$\" + parseFloat(data.price * data.quantity).formatMoney(2, ',', '.') );\n\t                $thankYou.find(\".item-price\").text( \"$\" + parseFloat(data.price * data.quantity).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".item-tax\").text( \"$\" + parseFloat( tax ).formatMoney(2, ',', '.') );\n\t                $thankYou.find(\".item-tax\").text( \"$\" + parseFloat( tax ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".item-shipping\").text( \"$\" + parseFloat(shipping).formatMoney(2, ',', '.') )\n\t                $thankYou.find(\".item-shipping\").text( \"$\" + parseFloat(shipping).formatMoney(2, ',', '.') )\n\t                \n\t                $review.find(\".item-total\").text(\"$\" + parseFloat( total ).formatMoney(2, ',', '.') );\n\t                $thankYou.find(\".item-total\").text(\"$\" + parseFloat( total ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".product-amount span\").html( \"$\" + parseFloat( data.price ).formatMoney(2, ',', '.') );\n\t                $thankYou.find(\".product-amount span\").html( \"$\" + parseFloat( data.price ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".quantity\").html( data.quantity );\n\t                $thankYou.find(\".quantity\").html( data.quantity );\n\t                \n\t                $review.find(\".total span\").html( parseFloat( subTotal ).formatMoney(2, ',', '.') );\n\t                $thankYou.find(\".total span\").html( parseFloat( subTotal ).formatMoney(2, ',', '.') );\n\n\t                $review.find(\".product-total-amount\").html( \"$\" + total );\n\t                $thankYou.find(\".product-total-amount\").html( \"$\" + total );\n\n\t                $.mobile.pageContainer.pagecontainer(\"change\", \"#purchase-page-two\");\n\t                \n\t            }else{\n\t\t\t        \n\t\t\t        var errors = resp.errors;\n                    \n                    for( var key in errors ){\n                        $(\".\" + key + \"-error\").html( errors[key] ).removeClass( 'hidden' ).show( );\n                    }\n\n                    $button.html( \"review order\");\n\t\t        \t$button.prop(\"disabled\", false);\n\t\t\t\t}\n            }\n        });\n\t});\n    \n    /*\n    *\n    * Actions for step 3 ( Order Review )\n    *\n    */\n    \n    $(\"#purchase-page-two\").find(\".checkout-button\").on(\"click\", function( ){\n    \n    \tvar order_id = 0;\n\n    \tdata.saveBilling \t= false;\n    \tdata.saveShipping \t= false;\n\n    \tvar $button = $(this);\n\n    \tif( $('form[name=purchaseCheckoutForm]').find(\"input[name=saveShippingAddress]\").is(\":checked\") ){\n    \t\tdata.saveShipping = true;\n    \t}\n\n    \tif( $('form[name=purchaseCheckoutForm]').find(\"input[name=saveBillingAddress]\").is(\":checked\") ){\n    \t\tdata.saveBilling = true;\n    \t}\n\n    \t$.ajax({\n\t    \tmethod: \"post\",\n\t    \turl: \"/products/setPendingTransaction\",\n\t    \tdata: data,\n\t    \tdataType: \"json\",\n\t    \tsuccess: function( resp ){\n\t\t    \t\n\t\t    \t//order_id = resp.order_id;\n\t\t    \t\n\t\t    \t$(\"#thank-you\").find(\".transaction-id\").html( resp.txnId );\n\n                $.mobile.pageContainer.pagecontainer(\"change\", \"#thank-you\"); \n\t\t    }\n    \t});\n    });\n});","$(function( ){\n\t\n\tvar donationObj \t= {};\n\tvar userId \t\t\t= $(\"input[name=user_id]\").val( );\n\tvar paypal_username = $(\"input[name=paypal_un]\").val( );\n\tvar payment_gateway = $(\"input[name=payment_gateway]\").val( );\n\n\t$(\"input[name=user_id]\").remove( );\n\t$(\"input[name=paypal_un]\").remove( );\n\t$(\"input[name=payment_gateway]\").remove( );\n\n\tvar id \t\t= $(\"input[name=donate_id]\").val( );\n\tvar type \t= $(\"input[name=type]\").val( );\n\n\tif( $(\"input[name=donationAmt]\").length > 0 && $(\"input[name=donationAmt]\").val( ) != \"\" ){\n\t\tdonationObj.amount = parseFloat( $(\"input[name=donationAmt]\").val( ) ).formatMoney(2, ',', '.');\n\t}else{\n\t\tdonationObj.amount = 0.00\n\t}\n\n\t$(\".chg-amount\").on(\"click\", function( ){\n\n\t\tvar $parent = $(this).parent( ).parent( );\n\n\t\t$parent.find(\"span\").hide( );\n\n\t\t$parent.find(\"input[type=text]\").removeClass('hidden');\n\n\t\t$(this)\n\t\t.removeClass('chg-amount')\n\t\t.addClass('save-amount')\n\t\t.css('width', '45%')\n\t\t.html('Save');\n\n\t\t$(this).parent( ).find(\".cancel-amount\").removeClass('hidden');\n\t});\n\n\t$(document).on(\"click\", \".save-amount\", function( ){\n\n\t\tvar $this = $(this);\n\n\t\tvar donation = $(\"input[name=donation]\").val( );\n\n\t\tvar $parent = $(this).parent( ).parent( );\n\n\t\tif( isNaN( parseFloat( donation) ) ){\n\n\t\t}else{\n\t\t\tdonationObj.amount = parseFloat( donation ).formatMoney(2, ',','.');\n\n\t\t\t$parent.find(\"span\").html( \"$\" + donationObj.amount );\n\n\t\t\t$parent.find(\"input[type=text]\").val(\"\").addClass('hidden');\n\n\t\t\t$(this)\n\t\t\t.removeClass('save-amount')\n\t\t\t.addClass('chg-amount')\n\t\t\t.val('Change Amount');\n\t\t}\n\t});\n\n\t$(\".cancel-amount\").on(\"click\", function( ){\n\n\t\tvar $parent = $(this).parent( ).parent( );\n\n\t\t//reset donation text box, if it has been filled.\n\t\t$(\"input[name=donation]\").val(\"\").addClass('hidden');\n\n\t\t$parent.find(\".donate-button\")\n\t\t.removeClass('save-amount')\n\t\t.addClass('chg-amount')\n\t\t.css('width', '100%')\n\t\t.html('Change Amount');\n\n\t\t$parent.find(\"span\").show( );\n\n\t\t$(this).addClass('hidden');\n\t});\n\n\t$(\".continueCheckout\").on(\"click\", function( ){\n        \n        var formData = $('form[name=donationCheckoutForm]').serialize( );\n        var type = $(\"input[name=saveAddress]\").data('type');\n        \n        var $button = $(this);\n        \n        $.ajax({\n            url: \"/validateDonation\",\n            method: \"POST\",\n            data: formData + \"&type=\" + type + \"&payment_gateway=\" + payment_gateway,\n            beforeSend: function( ){\n                \n                //clear any error messages\n                $(\".error\").html( \"\" ).hide( );\n                \n                //change button to show processing\n                $button.html( \"Validating...\");\n                $button.prop(\"disabled\", true);\n            },\n            success: function( resp ){\n                \n            \tif( resp.status ){\n\n            \t\tvar $form = $('form[name=donationCheckoutForm]');\n\n\t                donationObj.first_name \t\t= $form.find(\"input[name=first_name]\").val( );\n\t                donationObj.last_name \t\t= $form.find(\"input[name=last_name]\").val( );\n\t                donationObj.email\t\t\t= $form.find(\"input[name=email]\").val( );\n\t                donationObj.cc_number\t\t= $form.find(\"input[name=cc_number]\").val( );\n\t                donationObj.name_on_card  \t= $form.find(\"input[name=name_on_card]\").val( );\n\t                donationObj.exp_date\t\t= $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( );\n\t                donationObj.ccv \t\t\t= $form.find(\"input[name=ccv]\").val( );\n\t                donationObj.billingAddr1  \t= $form.find(\"input[name=billingAddress1]\").val( );\n\t                donationObj.billingAddr2 \t= $form.find(\"input[name=billingAddress2]\").val( );\n\t                donationObj.billingCity   \t= $form.find(\"input[name=billingCity]\").val( );\n\t                donationObj.billingState \t= $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n                    donationObj.billingStateId \t= $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n\t                donationObj.billingZip \t\t= $form.find(\"input[name=billingZip]\").val( );\n\t                donationObj.billingCountry  = $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n                    donationObj.billingCountryId= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\t\t\t\t\tdonationObj.saveAddress\t\t= $form.find(\"input[name=saveAddress]\").is(\":checked\");\n\t\t\t\t\tdonationObj.saveAddressType = type;\n\n\t\t\t\t\t$review \t= $(\".donation-review\");\n\t                $donateForm = $(\".donation-checkout\");\n\t                \n\t                $review.find(\".donation-amount\").html( \"$\" + donationObj.amount );\n\n\t                if( payment_gateway != 3 ){\n\t                \tvar cc_mask = donationObj.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\t                    \n\t\t                $review.find(\".cc-num\").text( cc_mask );\n\n\t\t                $review.find(\".cc-name\").text( donationObj.name_on_card );\n\n\t\t                $review.find(\".cc-expdate\").text( $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"/\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( ) );\n\n\t\t                $review.find(\".cc-ccv\").text( donationObj.ccv );\n\t                }\n\n\t                $review.find(\".billingaddress1\").text( donationObj.billingAddr1 );\n\n\t                $review.find(\".billingaddress2\").text( donationObj.billingAddr2 );\n\n\t                $review.find(\".billingcity\").text( donationObj.billingCity );\n\n\t                $review.find(\".billingstate\").text( donationObj.billingState );\n\n\t                $review.find(\".billingzip\").text( donationObj.billingZip );\n\n\t                $review.find(\".billingcountry\").text( donationObj.billingCountry );\n\t                \n\t                $button.html( \"review order\");\n\t                $button.prop(\"disabled\", false);\n\n\t                $donateForm.slideUp(\"slow\", function( ){\n\t                \t$review.slideDown(\"slow\");\n\n\t                \t$(\"html, body\").animate({scrollTop: 0},800);\n\t                });\n\t\t\t\t}else{\n\n\t\t\t\t\tfor( var key in resp.errors ){\n                        $(\".\" + key + \"-error\").html( resp.errors[key] ).show( );\n                    }\n\n                    $button.html( \"review order\");\n                    $button.prop(\"disabled\", false);\n\t\t\t\t}\n\t\t\t}\n        });\n    });\n\n    $(\".checkout-button\").on(\"click\", function( ){\n        \n        $donationId = \"\";\n\n        var $button = $(this);\n\n        var donationData = {\n        \tuser_id: \t\t\t\tuserId, \n        \titem_id: \t\t\t\tid, \n        \titem_type: \t\t\t\ttype, \n        \temail: \t\t\t\t\tdonationObj.email, \n        \tbilling_full_name: \t\tdonationObj.first_name + \" \" + donationObj.last_name, \n        \tfirst_name: \t\t\tdonationObj.first_name, \n        \tlast_name: \t\t\t\tdonationObj.last_name, \n        \tcc_number: \t\t\t\tdonationObj.cc_number,\n        \tccv: \t\t\t\t\tdonationObj.ccv,\n        \texp_date: \t\t\t\tdonationObj.exp_date,\n        \tbilling_address_line1: \tdonationObj.billingAddr1, \n        \tbilling_address_line2: \tdonationObj.billingAddr2, \n        \tbilling_city: \t\t\tdonationObj.billingCity, \n        \tbilling_state: \t\t\tdonationObj.billingStateId,  \n        \tbilling_country: \t\tdonationObj.billingCountryId, \n        \tbilling_zip: \t\t\tdonationObj.billingZip, \n        \tdonation_amount: \t\tdonationObj.amount, \n        \tsaveAddress: \t\t\tdonationObj.saveAddress, \n        \ttype: \t\t\t\t\tdonationObj.saveAddressType, \n        \tpayment_gateway: \t\tpayment_gateway \n        }; \n        \n        $.ajax({\n            method: \"post\",\n            url: \"/setPendingDonation\",\n            beforeSend: function( ){\n            \t//change button to show processing\n                \n                $button.html( \"Processing...\");\n                //$button.prop(\"disabled\", true);\n\n            },\n            data: donationData,\n            dataType: \"json\",\n            success: function( data ){\n\n            \t$button.html( \"Checkout\");\n                //$button.prop(\"disabled\", false);\n                \n            \tdataId = data.id;\n                \n                if( payment_gateway == 3 ){\n                 //find the paypalStdForm\n                \n\t                var $checkoutForm = $(\"form[name=paypalStdCheckout]\");\n\t                \n\t                //Input values into the form\n\t                $(\"input[name=cmd]\").val(\"_donations\");\n\t                $(\"input[name=return]\").val(window.location.protocol + \"//\" +  window.location.host + \"/thankyou\");\n\t                $(\"input[name=notify_url]\").val(window.location.protocol + \"//\" +  window.location.host + \"/ipn\");\n\n\t                $(\"input[name=amount]\").val( donationObj.amount );\n\n\t                $(\"input[name=custom]\").val( dataId );\n\t                \n\t                $(\"input[name=business]\").val( paypal_username );\n\t                \n\t                $(\"input[name=first_name]\").val( donationObj.first_name );\n\n\t                $(\"input[name=email]\").val( donationObj.email );\n\t                \n\t                $(\"input[name=last_name]\").val( donationObj.last_name );\n\t                \n\t                $(\"input[name=address1]\").val( donationObj.billingAddr1 );\n\t                \n\t                $(\"input[name=address2]\").val( donationObj.billingAddr2 );\n\t                \n\t                $(\"input[name=city]\").val( donationObj.billingCity );\n\t                \n\t                $(\"input[name=state]\").val( donationObj.billingState );\n\t                \n\t                $(\"input[name=zip]\").val( donationObj.billingZip );\n\t                \n\t                $(\"input[name=country]\").val( donationObj.billingCountry );\n\t                \n\t                $checkoutForm.trigger(\"submit\");\n\t            }else{\n\n\t            \tconsole.dir( data );\n\n\t            \tif( data.status ){\n\n\t            \t\tconsole.log( \"should be true\");\n\t            \t\tconsole.log( data.status );\n\t            \t\n\t\t            \t$(\".thank-you-message\").removeClass('hidden');\n\n\t\t            \t$(\"h1.text-center\").remove( );\n\n\t\t            \t$(\".donation-review-header\").remove( );\n\n\t\t            \t$(\"button.edit-button\").remove( );\n\n\t\t            \t$(\"button.checkout-button\").remove( );\n\n\t\t            \t$(\".donation-review\").find(\".order-review\").prepend(\"<div class='donation-reference'><p class='header'>Reference Number</p>\" + data.txnId + \"</div><hr />\");\n\t\t            }else{\n\t\t            \tconsole.log( \"should be false\");\n\t\t            \tconsole.log( data.status );\n\t\t            \t$(\".donation-review\").find(\".error\").html( data.text ).show( );\t\n\t\t            }\n\t            }\n            }\n        })\n    });\n\n\t//Action for Shipping Address Selection\n    $(\"select[name=userAddresses]\").on(\"change\", function( ){\n        \n        var addressSelected = $(this).find(\":selected\").val( );\n        \n        if( addressSelected == 0 ){\n            $(\"input[name=billingAddress1]\").val( \"\" );\n            $(\"input[name=billingAddress2]\").val( \"\" );\n            $(\"input[name=billingCity]\").val( \"\" );\n            $(\"select[name=billingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            $(\"input[name=billingZip]\").val( \"\" );\n            $(\"select[name=billingCountry]>option:eq(0)\").prop(\"selected\", true);\n        }else{\n            \n            var addressData = addressSelected.split(\"|\");\n            \n            $(\"input[name=billingAddress1]\").val( addressData[2] );\n            $(\"input[name=billingAddress2]\").val( addressData[3] );\n            $(\"input[name=billingCity]\").val( addressData[4] );\n            $(\"input[name=billingZip]\").val( addressData[6] );\n            \n\t\t\t$(\"select[name=billingCountry]\").find(\"option[value=\" + addressData[7] + \"]\").prop(\"selected\", true);\n\n\t\t\t$(\"select[name=billingCountry]\").trigger(\"change\");\n\n\t\t\tsetTimeout( function( ){\n\t\t\t\t$(\"select[name=billingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n\t\t\t}, 1000);\n\t\t}\n    });\n\n    $(\".edit-button\").on(\"click\", function( e ){\n\n    \t$review \t= $(\".donation-review\");\n\t    $donateForm = $(\".donation-checkout\");\n\n\t    $review.slideUp(\"slow\", function( ){\n        \t$donateForm.slideDown(\"slow\");\n        });\n\t});\n\n});","$(function( ){\n\n\t//Declare Fund Object\n\tvar fundObj \t \t= {};\n\n\t/** Read all hidden fields that came from Controller and delete the fields after read **/\n\tvar userId \t\t\t= $(\"input[name=user_id]\").val( );\n\t$(\"input[name=user_id]\").remove( );\n\n\tvar paypal_username = $(\"input[name=paypal_un]\").val( );\n\t$(\"input[name=paypal_un]\").remove( );\n\n\tvar payment_gateway = $(\"input[name=payment_gateway]\").val( );\n\t$(\"input[name=payment_gateway]\").remove( );\n\n\tvar id \t\t\t\t= $(\"input[name=projectId]\").val( );\n\t$(\"input[name=projectId]\").remove( );\n\n\tvar $incentive \t\t= $(\".fund-incentives-list\").find(\".incentive\");\n\t\n\tvar project_title\t= $(\"input[name=title]\").val( );\n\t$(\"input[name=title]\").remove( );\n\n\t/** End Read hidden fields **/\n\n\tif( $(\"input[name=donationAmt]\").length > 0 && $(\"input[name=donationAmt]\").val( ) != \"\" ){\n\t\tfundObj.amount = parseFloat( $(\"input[name=donationAmt]\").val( ) ).formatMoney(2, ',', '.');\n\t}else{\n\t\tfundObj.amount = 0.00\n\t}\n\t\n\tif( $(\"input[name=incentiveId]\").length > 0 && $(\"input[name=incentiveId]\").val( ) != \"\" ){\n\t\tfundObj.incentive = $(\"input[name=incentiveId]\").val( );\n\t\tfundObj.type \t  = \"incentive\";\n\n\t\tvar $fundedItem = $(\"[data-incentive-id=\" + fundObj.incentive + \"]\");\n\n\t\tfundObj.incentiveName \t= $fundedItem.find(\".title\").text( );\n\n\t\tif( $fundedItem.find(\"input[name=shippingRequired]\").val( ) == \"Y\" ){\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=showShipping]\").val(\"Y\");\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".shipping-info\").show( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".shippingHR\").show( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").show( );\n\t\t}else{\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").hide( );\n\t\t}\n\n\t}else{\n\n\t\tfundObj.incentive = \"\";\n\t\tfundObj.type \t  = \"fund\";\n\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").hide( );\n\t}\t\n\n\tif( $(\"select[name=userAddressesBilling]\").children(\"option\").length == 1 ){\n\t\t$(\"select[name=userAddressesBilling]\").parent( ).hide( );\n\t}\n\n\tif( $(\"select[name=userAddresses]\").children(\"option\").length == 1 ){\n\t\t$(\"select[name=userAddresses]\").parent( ).hide( );\n\t} \n\n\t//Select Incentive on first page of checkout\n     $incentive.on(\"click\", function( ){\n\n     \tfundObj.incentive \t\t= $(this).data('incentive-id');\n     \tfundObj.incentiveName \t= $(this).find(\".title\").text( );\n\t\tfundObj.type \t\t\t= 'incentive';\n\n     \tif( $(this).find(\"input[name=shippingRequired]\").val( ) == \"Y\" ){\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=showShipping]\").val(\"Y\");\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".shipping-info\").slideDown( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").show( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=sameAsShipping]\").prop('checked', false);\n\t\t}else{\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=showShipping]\").val(\"N\");\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".shipping-info\").slideUp( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").hide( );\n\t\t\t$(\"form[name=fundCheckoutForm]\").find(\"input[name=sameAsShipping]\").prop('checked', false);\n\t\t}\n\n        if( ! $(this).hasClass('selected') ){\n            $(\".fund-incentives-list\").find(\".incentive\").each( function( ){\n\n                if( $(this).hasClass('selected') ){\n\n                \tvar p = $(this).find(\".info>.price\").html( );\n\n                \t$(this).find('.donation').find(\"input[name=donationAmt]\").val( p.replace(\"$\", \"\").trim( ) );\n\n                    $(this).find('.donation').slideUp( );\n                    $(this).removeClass('selected');\n                }\n            });\n\n            if( $(\".fund-options\").find(\".details-fund\").hasClass('selected') ){\n\n                $(\".details-fund\").find('.donation').slideUp( );\n                $(\".details-fund\").find('.donation').find('input[type=text]').val(\"\");\n                $(\".details-fund\").removeClass('selected');\n            }\n\n            $(this).addClass('selected');\n            $(this).find(\".donation\").slideDown( );    \n        }\n    });\n\n    //Select the contribute button on the Incentive Page\n    $(\".fund-options\").find(\".details-fund\").on(\"click\", function( ){\n\n    \tfundObj.incentive \t\t= \"\";\n    \tfundObj.type\t  \t\t= 'fund';\n    \tfundObj.incentiveName \t= \"\";\n\n    \t$(\"form[name=fundCheckoutForm]\").find(\"input[name=showShipping]\").val(\"N\");\n\t\t$(\"form[name=fundCheckoutForm]\").find(\".shipping-info\").slideUp( );\n\t\t$(\"form[name=fundCheckoutForm]\").find(\".sameAsShipping-wrapper\").hide( );\n\n        if( ! $(this).hasClass('selected') ){\n            $(\".fund-incentives-list\").find(\".incentive\").each( function( ){\n\n                if( $(this).hasClass('selected') ){\n\n                \tvar p = $(this).find(\".info>.price\").html( );\n\n                \t$(this).find('.donation').find(\"input[name=donationAmt]\").val( p.replace(\"$\", \"\").trim( ) );\n\n                    $(this).find('.donation').slideUp( );\n                    $(this).removeClass('selected');\n                }\n            });\n\n            $(this).addClass('selected');\n            $(this).find(\".donation\").slideDown( );\n        }\n    });\n\n    //Action for Shipping Address Selection\n    $(\"select[name=userAddresses]\").on(\"change\", function( ){\n        \n        var addressSelected = $(this).find(\":selected\").val( );\n        \n        if( addressSelected == 0 ){\n            $(\"input[name=shippingAddress1]\").val( \"\" );\n            $(\"input[name=shippingAddress2]\").val( \"\" );\n            $(\"input[name=shippingCity]\").val( \"\" );\n            $(\"select[name=shippingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            $(\"input[name=shippingZip]\").val( \"\" );\n            $(\"select[name=shippingCountry]>option:eq(0)\").prop(\"selected\", true);\n        }else{\n            \n            var addressData = addressSelected.split(\"|\");\n\n            \n        \t$(\"input[name=shippingAddress1]\").val( addressData[2] );\n         \t$(\"input[name=shippingAddress2]\").val( addressData[3] );\n            $(\"input[name=shippingCity]\").val( addressData[4] );\n            $(\"input[name=shippingZip]\").val( addressData[6] );\n\n            $(\"select[name=shippingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            \n\t\t\t$(\"select[name=shippingCountry]\").find(\"option[value=\" + addressData[7] + \"]\").prop(\"selected\", true);\n\n\t\t\t$(\"select[name=shippingCountry]\").trigger(\"change\");\n\n            setTimeout( function( ){\n            \t$(\"select[name=shippingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n\t\t\t}, 1000);\n        }\n    });\n    \n      //Action for Shipping Address Selection\n    $(\"select[name=userAddressesBilling]\").on(\"change\", function( ){\n        \n        var addressSelected = $(this).find(\":selected\").val( );\n        \n        if( addressSelected == 0 ){\n            $(\"input[name=billingAddress1]\").val( \"\" );\n            $(\"input[name=billingAddress2]\").val( \"\" );\n            $(\"input[name=billingCity]\").val( \"\" );\n            $(\"select[name=billingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            $(\"input[name=billingZip]\").val( \"\" );\n            $(\"select[name=billingCountry]>option:eq(0)\").prop(\"selected\", true);\n        }else{\n            \n            var addressData = addressSelected.split(\"|\");\n            \n            $(\"input[name=billingAddress1]\").val( addressData[2] );\n            $(\"input[name=billingAddress2]\").val( addressData[3] );\n            $(\"input[name=billingCity]\").val( addressData[4] );\n            $(\"input[name=billingZip]\").val( addressData[6] );\n            \n\t\t\t$(\"select[name=billingCountry]\").find(\"option[value=\" + addressData[7] + \"]\").prop(\"selected\", true);\n\n\t\t\t$(\"select[name=billingCountry]\").trigger(\"change\");\n\n            setTimeout( function( ){\n            \t$(\"select[name=billingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n\t\t\t}, 1000);\n\t\t\t\n        }\n    });\n\n    $(\".sameAsShipping\").on(\"change\", function( ){\n\n    \tif( $(this).is(\":checked\") ){\n\n    \t\t$(\"input[name=billingAddress1]\").val( $(\"input[name=shippingAddress1]\").val( ) );\n            $(\"input[name=billingAddress2]\").val( $(\"input[name=shippingAddress2]\").val( ) );\n            $(\"input[name=billingCity]\").val( $(\"input[name=shippingCity]\").val( ) );\n            $(\"input[name=billingZip]\").val( $(\"input[name=shippingZip]\").val( ) );\n\n            $(\"select[name=billingCountry]\").find(\"option[value=\" + $(\"select[name=shippingCountry]\").find(\"option:selected\").val( ) + \"]\").prop(\"selected\", true);\n\n\t\t\t$(\"select[name=billingCountry]\").trigger(\"change\");            \n\n\t\t\t$(\"select[name=billingState]\").find(\"option[value=\" + $(\"select[name=shippingState]\").find(\"option:selected\").val( ) + \"]\").prop(\"selected\", true);\n\t\t\t\n\t\t}\n\t});\n\n    //Action for checking out for Step 2 ( Details Page );\n    $(\".continueCheckout\").on(\"click\", function( ){\n        \n        var formData = $('form[name=fundCheckoutForm]').serialize( );\n        \n        var $button = $(this);\n\n        var error = \"\";\n\n        $(\".fund-error\").html( \"\" ).hide( );\n\n        if( fundObj.type == \"incentive\" ){\n        \tif( fundObj.incentive != \"\" ){\n\n        \t\tvar amount = $(\"[data-incentive-id=\" + fundObj.incentive + \"]\").find(\"input[name=donationAmt]\").val( );\n\n        \t\tif( amount == \"\" ){\n        \t\t\terror = \"Please Enter an Amount to Fund.\";\n        \t\t}else{\n        \t\t\tif( isNaN( parseFloat( amount ) ) ){\n        \t\t\t\terror = \"The donated amount must be a number.\";\n        \t\t\t}else{\n        \t\t\t\tfundObj.amount = parseFloat( amount ).formatMoney(2, ',', '.');\n        \t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n        \t\terror = \"Please Select an Incentive.\";\n        \t}\n        }else{\n\n        \tvar amount = $(\".details-fund\").find(\"input[name=donationAmt]\").val( );\n\n        \tif( amount == \"\" ){\n        \t\terror = \"Please Enter an Amount to Fund.\";\n        \t}else{\n        \t\tif( isNaN( parseFloat( amount ) ) ){\n    \t\t\t\terror = \"The donated amount must be a number.\";\n    \t\t\t}else{\n    \t\t\t\tfundObj.amount = parseFloat( amount ).formatMoney(2, ',', '.');\n    \t\t\t}\n        \t}\n        }\t\n\n        if( error == \"\" ){\n        \n\t        $.ajax({\n\t            url: \"/crowdfunding/validateFunding\",\n\t            method: \"POST\",\n\t            data: formData,\n\t            beforeSend: function( ){\n\t                \n\t                //clear any error messages\n\t                $(\".error\").html( \"\" ).hide( );\n\t                \n\t                //change button to show processing\n\t                $button.html( \"Validating...\");\n\t                $button.prop(\"disabled\", true);\n\t            },\n\t            success: function( ){\n\t                \n\t                $button.html( \"review order\");\n\t                $button.prop(\"disabled\", false);\n\t                \n\t                var $form = $('form[name=fundCheckoutForm]');\n\n\t                fundObj.first_name \t\t= $form.find(\"input[name=first_name]\").val( );\n\t                fundObj.last_name  \t\t= $form.find(\"input[name=last_name]\").val( );\n\t                fundObj.email\t\t\t= $form.find(\"input[name=email]\").val( );\n\t                fundObj.cc_number\t\t= $form.find(\"input[name=cc_number]\").val( );\n\t                fundObj.name_on_card  \t= $form.find(\"input[name=name_on_card]\").val( );\n\t                fundObj.exp_date\t\t= $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( );\n\t                fundObj.exp_date_m\t\t= $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ); \n\t                fundObj.exp_date_y \t\t= $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").text( );\n\t                fundObj.ccv \t\t\t= $form.find(\"input[name=ccv]\").val( );\n\n\t                var cc_mask = fundObj.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\n\t\t\t\t\tfundObj.saveShippingAddress = false;\n\n\t\t\t\t\tif( $form.find(\"input[name=showShipping]\").val( ) == \"Y\" ){\n\n\t                \tfundObj.hasShippingData\t\t= 1;\n\n\t                \tfundObj.shippingAddr1 \t\t= $form.find(\"input[name=shippingAddress1]\").val( );\n\t                \tfundObj.shippingAddr2 \t\t= $form.find(\"input[name=shippingAddress2]\").val( );\n\t                \tfundObj.shippingCity \t\t= $form.find(\"input[name=shippingCity]\").val( );\n\t                \tfundObj.shippingState \t\t= $form.find(\"select[name=shippingState]\").find(\"option:selected\").text( );\n\t                \tfundObj.shippingStateId \t= $form.find(\"select[name=shippingState]\").find(\"option:selected\").val( );\n\t                \tfundObj.shippingZip \t\t= $form.find(\"input[name=shippingZip]\").val( );\n\t                \tfundObj.shippingCountry \t= $form.find(\"select[name=shippingCountry]\").find(\"option:selected\").text( );\n\t                \tfundObj.shippingCountryId \t= $form.find(\"select[name=shippingCountry]\").find(\"option:selected\").val( );\n\n\t                \tif( $form.find(\"input[name=saveShippingAddress]\").is(\":checked\") ){\n\t                \t\tfundObj.saveShippingAddress = true;\n\t                \t}\n\t                }else{\n\t                \tfundObj.hasShippingData = 0;\n\t                }\n\n\t                fundObj.billingAddr1 \t\t\t= $form.find(\"input[name=billingAddress1]\").val( );\n\t                fundObj.billingAddr2 \t\t\t= $form.find(\"input[name=billingAddress2]\").val( );\n\t                fundObj.billingCity \t\t\t= $form.find(\"input[name=billingCity]\").val( );\n\t                fundObj.billingState \t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n\t                fundObj.billingStateId\t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n\t                fundObj.billingZip \t\t\t\t= $form.find(\"input[name=billingZip]\").val( );\n\t                fundObj.billingCountry \t\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n\t                fundObj.billingCountryId \t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\n\t                fundObj.saveBillingAddress = false;\n\n\t                if( $form.find(\"input[name=saveBillingAddress]\").is(\":checked\") ){\n                \t\tfundObj.saveBillingAddress = true;\n                \t}\n\t                \n\t                var $review = $(\".fund-review\");\n\t                    \n\t                if( fundObj.type == \"incentive\" ){\n\n\t                \tvar $chosenIncentive = \n\t\t                $(\".fund-incentives-list\").find(\"[data-incentive-id=\" + fundObj.incentive + \"]\");\n\n\t\t\t\t\t\t$review.find(\".order-review-incentive\").find(\".header\").html( \"Incentive\" );\n\t                    \n\t                    $review.find(\".incentive-title\").html( $chosenIncentive.find(\".title\").text( ) ); \n\t                    \n\t                    $review.find(\".incentive-description\").html( $chosenIncentive.find(\".description\").text( ) );\n\t                    \n\t                }else{\n\t                    $review.find(\".order-review-incentive\").find(\".header\").html( \"Fund Amount\" );\n\t                }\n\t                \n\t                $review.find(\".donation-amount\").html( \"$\" + fundObj.amount );\n\n\t                if( $form.find(\"input[name=showShipping]\").val( ) == \"Y\" ){\n\n\t                \t$(\".order-review-shipping-address\").show( );\n\t                    \n\t\t                $review.find(\".shippingaddress1\").text( fundObj.shippingAddr1 );\n\n\t\t                $review.find(\".shippingaddress2\").text( fundObj.shippingAddr2 );\n\n\t\t                $review.find(\".shippingcity\").text( fundObj.shippingCity );\n\n\t\t                $review.find(\".shippingstate\").text( fundObj.shippingState );\n\n\t\t                $review.find(\".shippingzip\").text( fundObj.shippingZip );\n\n\t\t                $review.find(\".shippingcountry\").text( fundObj.shippingCountry );\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$(\".order-review-shipping-address\").hide( );\n\t\t\t\t\t\t$(\".order-review-shipping-address\").prev( ).hide( );\n\t\t\t\t\t}\n\n\t\t\t\t\t$review.find(\".cc-num\").text( cc_mask );\n\n\t                $review.find(\".cc-name\").text( fundObj.name_on_card );\n\n\t                $review.find(\".cc-expdate\").text( fundObj.exp_date );\n\n\t                $review.find(\".cc-ccv\").text( fundObj.ccv );\n\t                \n\t\t\t\t\t$review.find(\".billingaddress1\").text( fundObj.billingAddr1 );\n\n\t                $review.find(\".billingaddress2\").text( fundObj.billingAddr2 );\n\n\t                $review.find(\".billingcity\").text( fundObj.billingCity );\n\n\t                $review.find(\".billingstate\").text( fundObj.billingState );\n\n\t                $review.find(\".billingzip\").text( fundObj.billingZip );\n\n\t                $review.find(\".billingcountry\").text( fundObj.billingCountry );\n\t                \n\t                $button.val( \"review order\");\n\t                $button.prop(\"disabled\", false);\n\n\t                $(\".donation-checkout\").slideUp(\"slow\", function( ){\n\n\t                \t$(\".project-fund-title, .project-fund-organization\").addClass('text-center');\n\n\t                \t$(\".fund-review\").slideDown(\"slow\");\n\t                });\n\t            },\n\t            statusCode: {\n\t                422: function( jqXHR, textStatus, errorThrown ){\n\t                    \n\t                    $button.html( \"review order\");\n\t                    $button.prop(\"disabled\", false);\n\t                    \n\t                    var errors = JSON.parse( jqXHR.responseText );\n\t                    \n\t                    for( var key in errors ){\n\t                        $(\".\" + key + \"-error\").html( errors[key] ).removeClass( 'hidden' ).show( );\n\t                    }\n\n\t                    $(\"html, body\").animate({scrollTop: 0},800);\n\t                }\n\t            }\n\t        });\n\t\t}else{\n\t\t\t$(\".fund-error\").html( error ).show( );\n\t\t\t$('html,body').scrollTop(0);\n\t\t}\n    });\n\n\t$(\".checkout-button\").on(\"click\", function( ){\n        \n        $donationId = \"\";\n        \n        var project_data = {\n            \"user_id\" :                 userId,\n            \"project_id\" :              id,\n            \"incentive_id\" :            fundObj.incentive,\n            \"project_title\" :           project_title,\n            \"incentive_title\" :         fundObj.incentiveName,\n            \"donation_amount\" :         fundObj.amount,\n            \"cc_number\": \t\t\t\tfundObj.cc_number,\n        \t\"ccv\": \t\t\t\t\t\tfundObj.ccv,\n        \t\"exp_date\": \t\t\t\tfundObj.exp_date,\n        \t\"first_name\":  \t\t\t\tfundObj.first_name,\n        \t\"last_name\": \t\t\t\tfundObj.last_name,\n        \t\"email\": \t\t\t\t\tfundObj.email, \n            \"billing_full_name\":        fundObj.first_name + \" \" + fundObj.last_name,\n            \"billing_first_name\":       fundObj.first_name,\n            \"billing_last_name\" :       fundObj.last_name,\n            \"billing_email\":            fundObj.email,\n            \"billing_address_line1\":    fundObj.billingAddr1,\n            \"billing_address_line2\":    fundObj.billingAddr2,\n            \"billing_city\":             fundObj.billingCity,\n            \"billing_state\":            fundObj.billingStateId,\n            \"billing_zip\":              fundObj.billingZip,\n            \"billing_country\":          fundObj.billingCountryId,\n            \"shipping_full_name\":       fundObj.first_name + \" \" + fundObj.last_name,\n            \"shipping_email\":           fundObj.email,\n            \"shipping_address_line1\":   fundObj.shippingAddr1,\n            \"shipping_address_line2\":   fundObj.shippingAddr2,\n            \"shipping_city\":            fundObj.shippingCity,\n            \"shipping_state\":           fundObj.shippingStateId,\n            \"shipping_zip\":             fundObj.shippingZip,\n            \"shipping_country\":         fundObj.shippingCountryId,\n            \"saveShippingAddress\": \t\tfundObj.saveShippingAddress,\n            \"saveBillingAddress\": \t\tfundObj.saveBillingAddress,\n            \"hasShippingData\": \t\t\tfundObj.hasShippingData,\n            \"payment_gateway\": \t\t\tpayment_gateway\n        };\n\n        $.ajax({\n            method: \"post\",\n            url: \"/crowdfunding/setPendingDonation\",\n            data: project_data,\n            dataType: \"json\",\n            success: function( data ){\n                \n                dataId = data.id;\n                \n                if( payment_gateway == 3 ){\n                 //find the paypalStdForm\n                \n\t                var $checkoutForm = $(\"form[name=paypalStdCheckout]\");\n\t                \n\t                //Input values into the form\n\t                $(\"input[name=cmd]\").val(\"_donations\");\n\t                $(\"input[name=return]\").val(window.location.protocol + \"//\" +  window.location.host + \"/thankyou\");\n\t                $(\"input[name=notify_url]\").val(window.location.protocol + \"//\" +  window.location.host + \"/project/ipn\");\n\n\t                $(\"input[name=amount]\").val( fundObj.amount );\n\n\t                $(\"input[name=custom]\").val( dataId + \"|\" + fundObj.incentive );\n\t                \n\t                $(\"input[name=business]\").val( paypal_username );\n\t                \n\t                $(\"input[name=first_name]\").val( fundObj.first_name );\n\t                \n\t                $(\"input[name=last_name]\").val( fundObj.last_name );\n\n\t                $(\"input[name=email]\").val( fundObj.email );\n\t                \n\t                $(\"input[name=address1]\").val( fundObj.billingAddr1 );\n\t                \n\t                $(\"input[name=address2]\").val( fundObj.billingAddr2 );\n\t                \n\t                $(\"input[name=city]\").val( fundObj.billingCity );\n\t                \n\t                $(\"input[name=state]\").val( fundObj.billingState );\n\t                \n\t                $(\"input[name=zip]\").val( fundObj.billingZip );\n\t                \n\t                $(\"input[name=country]\").val( fundObj.billingCountry );\n\t                \n\t                $checkoutForm.trigger(\"submit\");\n\t            }else{\n\n\t            \tif( data.status ){\n\n\t            \t\t$(\".project-fund-title\")\n\t            \t\t.html(\"<div class='checkout-thank-you-message'>Thank you for your Donation!</div><div style='font-size:12px;'> You will recieve an email shortly.</div>\");\n\n\t            \t\t$(\".project-fund-organization\")\n\t            \t\t.remove( );\n\n\t            \t\t$(\".fund-review\")\n\t            \t\t.find(\".header:first\")\n\t            \t\t.remove( );\n\n\t            \t\t$(\".order-review-incentive\")\n\t            \t\t.html(\"<p class='header'>Reference Number</p><div>\" + data.txnId + \"</div>\")\n\n\t            \t\t$(\"button.checkout-button\")\n\t            \t\t.remove( );\n\n\t            \t\t$(\"html, body\").animate({ scrollTop: \"0px\" });\n\t            \t}\n\t            }\n            }\n        });\n    });\n\n\t//Action for Shipping Address Selection\n    $(\"select[name=userAddresses]\").on(\"change\", function( ){\n        \n        var addressSelected = $(this).find(\":selected\").val( );\n        \n        if( addressSelected == 0 ){\n            $(\"input[name=billingAddress1]\").val( \"\" );\n            $(\"input[name=billingAddress2]\").val( \"\" );\n            $(\"input[name=billingCity]\").val( \"\" );\n            $(\"select[name=billingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            $(\"input[name=billingZip]\").val( \"\" );\n            $(\"select[name=billingCountry]>option:eq(0)\").prop(\"selected\", true);\n        }else{\n            \n            var addressData = addressSelected.split(\"|\");\n            \n            $(\"input[name=billingAddress1]\").val( addressData[2] );\n            $(\"input[name=billingAddress2]\").val( addressData[3] );\n            $(\"input[name=billingCity]\").val( addressData[4] );\n            $(\"input[name=billingZip]\").val( addressData[6] );\n            \n\t\t\t$(\"select[name=billingCountry]\").find(\"option[value=\" + addressData[7] + \"]\").prop(\"selected\", true);\n\n\t\t\t$(\"select[name=billingCountry]\").trigger(\"change\");\n\n\t\t\tsetTimeout( function( ){\n\t\t\t\t$(\"select[name=billingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n\t\t\t}, 1000);\n\t\t}\n    });\n\n    $(\".edit-button\").on(\"click\", function( e ){\n\n    \t$review \t= $(\".fund-review\");\n\t    $donateForm = $(\".donation-checkout\");\n\n\t    $review.slideUp(\"slow\", function( ){\n        \t$donateForm.slideDown(\"slow\");\n        });\n\t});\n});","$(function( ){\n\t\n\tvar data \t \t \t= {};\n\tvar userId \t\t\t= $(\"input[name=user_id]\").val( );\n\tvar paypal_username = $(\"input[name=paypal_un]\").val( );\n\tvar payment_gateway = $(\"input[name=payment_gateway]\").val( );\n\n\tvar productId \t\t= $(\"input[name=productId]\").val( );\n\tvar shipping \t\t= $(\"input[name=shipping_cost]\").val( );\n\n\tvar modifierIds  \t= $(\"input[name=modifierIds]\").val( );\n\n\tdata.shipping \t\t\t= shipping;\n\tdata.id \t\t\t\t= productId;\n\tdata.user_id\t\t\t= userId;\n\tdata.modifierId     \t= modifierIds;\n\tdata.payment_gateway \t= payment_gateway;\n\n\t//Action for Shipping Address Selection\n    $(\"select[name=userAddresses]\").on(\"change\", function( ){\n        \n        var addressSelected = $(this).find(\":selected\").val( );\n        \n        if( addressSelected == 0 ){\n            $(\"input[name=shippingAddress1]\").val( \"\" );\n            $(\"input[name=shippingAddress2]\").val( \"\" );\n            $(\"input[name=shippingCity]\").val( \"\" );\n            $(\"select[name=shippingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            $(\"input[name=shippingZip]\").val( \"\" );\n            $(\"select[name=shippingCountry]>option:eq(0)\").prop(\"selected\", true);\n        }else{\n            \n            var addressData = addressSelected.split(\"|\");\n\n            $(\"input[name=shippingAddress1]\").val( addressData[2] );\n         \t$(\"input[name=shippingAddress2]\").val( addressData[3] );\n            $(\"input[name=shippingCity]\").val( addressData[4] );\n            $(\"input[name=shippingZip]\").val( addressData[6] );\n\n            $(\"select[name=shippingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            \n\t\t\t$(\"select[name=shippingCountry]\").find(\"option[value=\" + addressData[7] + \"]\").prop(\"selected\", true);\n\n\t\t\t$(\"select[name=shippingCountry]\").trigger(\"change\");\n\n            setTimeout( function( ){\n            \t$(\"select[name=shippingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n\t\t\t}, 1000);\n        }\n    });\n    \n      //Action for Shipping Address Selection\n    $(\"select[name=userAddressesBilling]\").on(\"change\", function( ){\n        \n        var addressSelected = $(this).find(\":selected\").val( );\n        \n        if( addressSelected == 0 ){\n            $(\"input[name=billingAddress1]\").val( \"\" );\n            $(\"input[name=billingAddress2]\").val( \"\" );\n            $(\"input[name=billingCity]\").val( \"\" );\n            $(\"select[name=billingState] option\").each( function( i ){\n            \tif( i > 0 ){\n            \t\t$(this).remove( );\n            \t}\n            });\n            $(\"input[name=billingZip]\").val( \"\" );\n            $(\"select[name=billingCountry]>option:eq(0)\").prop(\"selected\", true);\n\n            setTimeout( function( ){\n            \t$(\"select[name=billingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n\t\t\t}, 1000);\n        }else{\n            \n            var addressData = addressSelected.split(\"|\");\n            \n            $(\"input[name=billingAddress1]\").val( addressData[2] );\n            $(\"input[name=billingAddress2]\").val( addressData[3] );\n            $(\"input[name=billingCity]\").val( addressData[4] );\n            $(\"input[name=billingZip]\").val( addressData[6] );\n            \n\t\t\t$(\"select[name=billingCountry]\").find(\"option[value=\" + addressData[7] + \"]\").prop(\"selected\", true);\n\n\t\t\t$(\"select[name=billingCountry]\").trigger(\"change\");\n\n            $(\"select[name=billingState]\").find(\"option[value=\" + addressData[5] + \"]\").prop(\"selected\", true);\n\t\t\t\n        }\n    });\n\n    var modifierOptions = [];\n\tvar combo = \"\";\n\n\t$(\".product-modifiers select\").on(\"change\", function( i ){\n\t\t\n\t\tvar allSelected = true;\n\t\t\n\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\n\t\t\tif( parseInt( $(this).find(\":selected\").val( ) ) == 0 ){\n\t\t\t\tallSelected = false;\n\t\t\t}\n\t\t});\n\n\t\tif( allSelected ){\n\t\t\t\n\t\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\tmodifierOptions.push( parseInt( $(this).find(\":selected\").val( ) ) );\t\n\t\t\t});\n\t\t\t\n\t\t\tmodifierOptions = modifierOptions.reverse( );\n\t\t\t\t\n\t\t\tcombo = modifierOptions.join( );\n\t\t\t\n\t\t\tdata.modifierId = combo;\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\tmethod: \"get\",\n\t\t\t\turl: \"/products/getQuantity\",\n\t\t\t\tdata: \"options=\" + combo + \"&id=\" + data.id,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tbeforeSend: function( ){\n\n\t\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\t\t$(this).remove( );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Getting Quantity ...\");\n\t\t\t\t},\n\t\t\t\tsuccess: function( resp ){\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Select Quantity\");\n\t\t\t\t\tmodifierOptions = [];\n\t\t\t\t\t\n\t\t\t\t\tif( parseInt( resp.count ) > 0 ){\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor( var i = 1 ; i <= resp.count ; i++ ){\n\t\t\t\t\t\t\t$(\"select[name=quantity]\").append(\"<option value='\" + i + \"'>\" + i + \"</option>\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//data.modifierId = resp.modifier_id;\n\t\t\t\t\t\t\n\t\t\t\t\t\t$(\".price\").data(\"price\", resp.price );\n\t\t\t\t\t\t$(\".price\").html(\"$\" + parseFloat( resp.price ).formatMoney(2, ',', '.') );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\t\n\t\t\tif( $(\"select[name=quantity]\").length > 1 ){\n\t\t\t\t\n\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\n\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\tremove( $(this) );\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t}\n\t});\n\n\t$(\"select[name=quantity]\").on(\"change\", function( ){\n\n\t\tif( $(this).find(\"option:selected\").val( ) == 0 ){\n\t\t\t$(\".price\").html( \"$\" + parseFloat( $(\".price\").data(\"price\") ).formatMoney(2, ',', '.') );\n\t\t}else{\n\t\t\t$(\".price\").html( \"$\" + parseFloat( ($(this).find(\"option:selected\").val( ) * $(\".price\").data('price') ) ).formatMoney(2, ',', '.') );\t\n\t\t}\n\t});\n\n\t$('.continueCheckout').on(\"click\", function( ){\n\t    \n\t    var formData = $('form[name=purchaseCheckoutForm]').serialize( );\n        \n\t\tvar $button = $(this);\n\n\t\tvar modifiers = [];\n        var errors    = [];\n        var product_alias = $(this).data('alias');\n        \n        $(\".error\").hide( );\n\n\t\t$(\".product-modifiers select\").each(function( i ){\n\t        \n\t        var name \t\t= $(this).find(\"option:first\").text( );\n\t\t\t\n\t\t\tvar value \t\t= $(this).find(\":selected\").val( );\n\t\t\tvar valueText \t= $(this).find(\":selected\").text( );\n\t\t\t\n\t\t\tif( value == 0 ){\n\t\t\t\terrors.push($(this).attr(\"name\") + \"|\" + \"Please select a \" + name);\n\t\t\t}else{\n\t\t\t\tmodifiers.push(\"<div class='modifier'><b>\" + name.replace(\"Select \", \"\") + \"</b>: \" + valueText + \"</div>\");\n\t\t\t}\n\t\t});\n\t\t\n\t\tif( $(\"select[name=quantity]\").find(\":selected\").val( ) == \"0\" ){\n\t\t\terrors.push(\"quantity|Please Input a Quantity\");\n\t\t}\n\n\t\tif( errors.length == 0 ){\n\t\t\n\t\t\t$.ajax({\n\t            url: \"/product/validateCheckout\",\n\t            method: \"POST\",\n\t            data: formData,\n\t            beforeSend: function( ){\n\t                \n\t                //clear any error messages\n\t                $(\".error\").html( \"\" ).addClass('hidden');\n\t                \n\t                //change button to show processing\n\t\t\t\t\t$button.html( \"Validating...\");\n\t\t\t        $button.prop(\"disabled\", true);\n\t            },\n\t            success: function( resp ){\n\t\t            \n\t\t            $button.html( \"review order\");\n\t\t\t        $button.prop(\"disabled\", false);\n\t\t\t        \n\t\t\t        if( resp.status ){\n\t\t\t\t        \n\t\t\t\t        var $form = $('form[name=purchaseCheckoutForm]');\n\t\t\t\t        \n\t\t\t\t        data.first_name\t\t\t\t\t= $form.find(\"input[name='first_name']\").val( );\n\t\t\t\t        data.last_name\t\t\t\t\t= $form.find(\"input[name='last_name']\").val( );\n\t\t\t\t        data.email\t\t\t\t\t\t= $form.find(\"input[name='email']\").val( );\n\t\t\t\t        data.shipping_address_line1 \t= $form.find(\"input[name='shippingAddress1']\").val( );\n\t\t\t\t        data.shipping_address_line2 \t= $form.find(\"input[name='shippingAddress2']\").val( );\n\t\t\t\t        data.shipping_city \t\t\t\t= $form.find(\"input[name='shippingCity']\").val( );\n\t\t\t\t        data.shipping_state\t\t\t\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").text( );\n\t\t\t\t        data.shippingstateId\t\t\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").val( );\n\t\t\t\t        data.shipping_zip\t\t\t\t= $form.find(\"input[name='shippingZip']\").val( );\n\t\t\t\t        data.shipping_country\t\t\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").text( );\n\t\t\t\t        data.shippingcountryId\t\t\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").val( );\n\t\t\t\t        data.cc_number\t\t\t\t\t= $form.find(\"input[name=cc_number]\").val( );\n\t                \tdata.name_on_card  \t\t\t\t= $form.find(\"input[name=name_on_card]\").val( );\n\t                \tdata.exp_date\t\t\t\t\t= $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( );\n\t                \tdata.ccv \t\t\t\t\t\t= $form.find(\"input[name=ccv]\").val( );\n\t\t\t\t        data.billing_address_line1\t\t= $form.find(\"input[name='billingAddress1']\").val( );\n\t\t\t\t        data.billing_address_line2    \t= $form.find(\"input[name='billingAddress2']\").val( );\n\t\t\t\t        data.billing_city\t\t\t\t= $form.find(\"input[name='billingCity']\").val( );\n\t\t\t\t        data.billing_state \t\t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n\t\t\t\t        data.billingstateId\t\t\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n\t\t\t\t        data.billing_zip\t\t\t\t= $form.find(\"input[name='billingZip']\").val( );\n\t\t\t\t        data.billing_country\t\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n\t\t\t\t        data.billingcountryId\t\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\t\t\t\t        \n\t\t\t\t\t\tvar shipping;\n\n\t\t\t\t\t\tvar $review = $(\".purchase-review\");\n\n\t\t\t\t\t\tvar cc_mask = data.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\n\t\t\t\t\t\tdata.shipping = parseFloat( data.shipping ).formatMoney(2, ',', '.');\n\t\t\t\t\t\t\n\t\t\t\t\t\tif( parseInt( data.shipping) == 0 ){\n\t\t\t\t\t\t\tshipping = 0.00;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tshipping = parseFloat( data.shipping );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata.price \t\t= parseFloat( $(\".price\").data(\"price\") ).formatMoney(2, ',', '.');\n\t\t\t\t\t\tdata.quantity \t= parseInt( $(\"select[name=quantity]\").find(\":selected\").val( ) );\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar subTotal = parseFloat( data.price ) * parseInt( data.quantity );\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar tax = (subTotal/100) * parseFloat( resp.taxCode.tax_percentage );\n\t\t\t\t\t\t\n\t\t\t\t\t\tdata.tax = parseFloat(tax).formatMoney(2, ',', '.');\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar total = parseFloat(subTotal) + parseFloat( tax ) + parseFloat( data.shipping);\n\n\t\t\t\t\t\ttotal = total.formatMoney(2, ',', '.');\n\n\t\t\t\t\t\t$review.find(\".shippingaddress1\").text( data.shipping_address_line1 );\n\t\t\t\t\t\t\n\t\t\t\t\t\t$review.find(\".shippingaddress2\").text( data.shipping_address_line2 );\n\t\t                \n\t\t\t\t\t\t$review.find(\".shippingcity\").text( data.shipping_city );\n\t\t                \n\t\t\t\t\t\t$review.find(\".shippingstate\").text( data.shipping_state );\n\t\t\n\t\t                $review.find(\".shippingzip\").text( data.shipping_zip );\n\t\t\n\t\t                $review.find(\".shippingcountry\").text( data.shipping_country );\n\t\t\n\t\t                $review.find(\".billingaddress1\").text( data.billing_address_line1 );\n\t\t\n\t\t                $review.find(\".billingaddress2\").text( data.billing_address_line2 );\n\t\t\n\t\t                $review.find(\".billingcity\").text( data.billing_city );\n\t\t\n\t\t                $review.find(\".billingstate\").text( data.billing_state );\n\t\t\n\t\t                $review.find(\".billingzip\").text( data.billing_zip );\n\t\t\n\t\t                $review.find(\".billingcountry\").text( data.billing_country );\n\n\t\t                $review.find(\".cc-num\").text( cc_mask );\n\n\t                \t$review.find(\".cc-name\").text( data.name_on_card );\n\n\t                \t$review.find(\".cc-expdate\").text( $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"/\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( ) );\n\n\t                \t$review.find(\".cc-ccv\").text( data.ccv );\n\t\t                \n\t\t                $review.find(\".item-price\").text( \"$\" + parseFloat(data.price * data.quantity).formatMoney(2, ',', '.') );\n\t\t                \n\t\t                $review.find(\".item-tax\").text( \"$\" + parseFloat( tax ).formatMoney(2, ',', '.') );\n\t\t                \n\t\t                $review.find(\".item-shipping\").text( \"$\" + parseFloat(shipping).formatMoney(2, ',', '.') )\n\t\t                \n\t\t                $review.find(\".item-total\").text(\"$\" + parseFloat( total ).formatMoney(2, ',', '.') );\n\t\t                \n\t\t                $review.find(\".product-amount span\").html( \"$\" + parseFloat( data.price ).formatMoney(2, ',', '.') );\n\t\t                \n\t\t                $review.find(\".quantity span\").html( data.quantity );\n\t\t                \n\t\t                $review.find(\".total span\").html( \"$\" + parseFloat( subTotal ).formatMoney(2, ',', '.') );\n\n\t\t                $review.find(\".product-total-amount\").html( \"$\" + total );\n\t\t                \n\t\t\t\t\t\t$(\".product-checkout\").slideUp(\"slow\", function( ){\n\t\t                \t$review.slideDown(\"slow\");\n\t\t                });\n\n\t\t                console.log( \"after validate \" );\n\t\t                console.log( data );\n\t\t                \n\t\t\t        }else{\n\t\t\t\t        \n\t\t\t\t        var errors = resp.errors;\n\t                    \n\t                    for( var key in errors ){\n\t                        $(\".\" + key + \"-error\").html( errors[key] ).removeClass( 'hidden' ).show( );\n\t                    }\n\n\t                    $button.html( \"review order\");\n\t\t\t        \t$button.prop(\"disabled\", false);\n\t\t\t\t\t}\n\t            }\n\t        });\n\t\t}else{\n\n\t\t\t$(\"html, body\").animate({ scrollTop: \"0px\" });\n\n\t\t\tfor(var x in errors){\n\t\t\t\t\n\t\t\t\tvar error = errors[x].split(\"|\");\n\t\t\t\t\n\t\t\t\t$(\".\" + error[0] + \"-error\").html(error[1]).show( );\n\t\t\t}\n\t\t}\n\t});\n\n\t$(\".checkout-button\").on(\"click\", function( ){\n    \n    \tvar order_id = 0;\n\n    \tdata.saveBilling \t= false;\n    \tdata.saveShipping \t= false;\n\n    \tconsole.log( data );\n\n    \tvar $button = $(this);\n\n    \tif( $('form[name=purchaseCheckoutForm]').find(\"input[name=saveShippingAddress]\").is(\":checked\") ){\n    \t\tdata.saveShipping = true;\n    \t}\n\n    \tif( $('form[name=purchaseCheckoutForm]').find(\"input[name=saveBillingAddress]\").is(\":checked\") ){\n    \t\tdata.saveBilling = true;\n    \t}\n    \t\n    \t$.ajax({\n\t    \tmethod: \"post\",\n\t    \turl: \"/products/setPendingTransaction\",\n\t    \tbeforeSend: function( ){\n\t                \n                //change button to show processing\n\t\t\t\t$button.html( \"Purchasing...\");\n\t\t        $button.prop(\"disabled\", true);\n            },\n\t    \tdata: data,\n\t    \tdataType: \"json\",\n\t    \tsuccess: function( resp ){\n\n\t    \t\t$button.html( \"Place Order\");\n\t\t        $button.prop(\"disabled\", false);\n\n\t\t\t\tif( resp.status ){\n\n\t\t\t\t\t$(\".purchase-review\")\n\t\t\t\t\t.find(\".header:first\")\n\t\t\t\t\t.html(\"<div class='checkout-thank-you-message'>Thank you for your Purchase!</div><div> You will recieve an email shortly.</div>\");\n\n\t\t    \t\t$(\".purchase-review\")\n\t\t    \t\t.find(\".order-review-incentive\")\n\t\t    \t\t.html(\"<p class='header'>Reference Number</p><div>\" + resp.txnId + \"</div>\");\n\n\t\t    \t\t$(\"button.edit-button\")\n\t\t    \t\t.remove( );\n\n\t\t    \t\t$button\n\t\t    \t\t.remove( );\n\n\t\t    \t\t$(\"html, body\").animate({ scrollTop: \"0px\" });\n\t\t\t\t}else{\n\t\t    \t\t$(\".purchase-review\")\n\t\t    \t\t.find(\"order-error\")\n\t\t    \t\t.html( resp.reason );\n\t\t    \t}\n\t\t    }\n    \t});\n    });\n\n    $(\".edit-button\").on(\"click\", function( e ){\n\n    \tvar $review = $(\".purchase-review\");\n\n    \t$review.slideUp(\"slow\", function( ){\n    \t\t$(\".product-checkout\").show( );;\t\n    \t});\n\t});\n});\n","var styles = [\n\t  {\n\t      \"featureType\": \"landscape\",\n\t      \"elementType\": \"geometry\",\n\t      \"stylers\": [\n\t      { \"color\": \"#33aef4\" },\n\t      { \"visibility\": \"on\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"poi\",\n\t      \"elementType\": \"geometry.fill\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"road\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"administrative\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"simplified\" },\n\t      { \"color\": \"#0581c6\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"administrative.province\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"administrative.locality\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"administrative.locality\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"administrative.neighborhood\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"administrative.land_parcel\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"poi\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"administrative.country\",\n\t      \"elementType\": \"geometry.stroke\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"on\" },\n\t      { \"color\": \"#0581c6\" }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"water\",\n\t      \"elementType\": \"geometry\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"simplified\" },\n\t      { \"color\": \"#33aef4\" },\n\t      { \"lightness\": 65 }\n\t    ]\n\t  }, {\n\t      \"featureType\": \"water\",\n\t      \"elementType\": \"labels\",\n\t      \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t  }, {\n\t}, {\n\t    \"featureType\": \"landscape\",\n\t    \"elementType\": \"labels\",\n\t    \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t}, {\n\t    \"featureType\": \"transit\",\n\t    \"stylers\": [\n\t      { \"visibility\": \"off\" }\n\t    ]\n\t}, {\n\t}\n\t];","$(function( ){\n    \n    $chartColorArray = [\"#eeaef4\", \"#f1657f\", \"#f4b533\", \"#dA4a4a\", \"#e4272d\", \"#6e33f4\", \"#3375f4\", \"#f433dc\", \"#33f4a6\", \"#42da5e\", \"#ff0000\", \"#fff000\", \"#ffff00\", \"#ee00000\", \"#eeee00\"];\n    \n    setHeight( );\n    \n    /* Trigger Country Causes to Toggle */\n    \n    $(\".countryCauseName\").on(\"click\", function( ){\n        \n        var cause = $(this).data(\"cause\");\n        \n        $(\".countryCauseName\").removeClass(\"active\");\n        \n        $(this).addClass(\"active\");\n        \n        $(\".country-cause-description\").addClass(\"hidden\");\n        \n        $(\".\" + cause + \"-description\").removeClass(\"hidden\");\n        \n    });\n\n    var chartSize = parseInt( $(\".charts\").width( ) * .95 );\n\n    $(\".charts\").find(\"canvas\").css({\n        width: chartSize + \"px\",\n        height: chartSize + \"px\"\n    });\n\n    $(window).on(\"resize\", function( ){\n\n        var chartSize = parseInt( $(\".charts\").width( ) * .95 );\n\n        $(\".charts\").find(\"canvas\").css({\n            width: chartSize + \"px\",\n            height: chartSize + \"px\"\n        });\n    });\n    \n    /* End Country Causes to Toggle */\n    \n    /* Start Country Map Script */\n\n    if( $(\"input[name=latitude]\").length > 0 ){\n    \n        var bounds = new google.maps.LatLngBounds( );\n        var map;\n        \n        var initialZoom = 0;\n        var zoomFactor = 3;\n        \n        var lat = $(\"input[name=latitude]\").val( );\n        var lng = $(\"input[name=longitude]\").val( );\n        \n        var mapCanvas = document.getElementById('map');\n        \n        var mapOptions = {\n            zoom: 3,\n            center: new google.maps.LatLng( lat, lng),\n            myTypeid: google.maps.MapTypeId.ROADMAP,\n            styles: styles,\n            animatedZoom: true,\n            disableDefaultUI: true\n        };\n        \n        map = new google.maps.Map(mapCanvas, mapOptions);\n\n        var myLatLng = {lat: parseFloat( lat ), lng: parseFloat( lng )};\n\n        var marker = new google.maps.Marker({\n                        position: myLatLng,\n                        map: map,\n                        animation: google.maps.Animation.DROP,\n                    });\n    }\n    \n    /* End Country Map Script */\n    \n    /* Start Country Chart Script */\n    \n    $(\".charts\").each( function( i ){\n        \n        var chartData = [];\n        \n        var names = $(this).find(\"input[name='item_name[]']\");\n        \n        var percentage = $(this).find(\"input[name='item_percentage[]']\");\n        \n        var showChart = true;\n        \n        for( var i = 0 ; i < names.length ; i++ ){\n            \n            if( isNaN( parseFloat( $(percentage[i]).val( ) ) ) ){\n\t            showChart = false;\n            }\n            \n            chartData.push({\n                'label': $(names[i]).val( ),\n                'value': parseFloat( $(percentage[i]).val( ) ),\n                'color': $chartColorArray[i],\n                'highlight': $chartColorArray[i]\n            });\n        }\n        \n        if( showChart ){\n        \n\t        var $ctx = $(this).find(\"canvas\");\n\t            \n\t        var PieChart = new Chart( $ctx[0].getContext(\"2d\") ).Pie(\n\t            chartData,{\n\t             legendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>\"   \n\t        });\n\t        \n\t\t\tvar legend = PieChart.generateLegend( );\n\t        $(this).find(\".chart-legend\").html( legend );\n\t    }else{\n\t\t    $(this).hide( );\n\t    }\n    });\n    \n    /* End Country Chart Script */\n    \n    \n    /*\n    *\n    * Begin Checkout Process for Current Country\n    *\n    */\n    \n\tvar $checkout    = $(\"#countryCheckout\");\n    var $container   = $checkout.find(\".checkout\");\n    var $donation    = $container.find(\".donation\");\n\n    var country_alis = \"\";\n    \n    //Action for triggering the country donation lightbox\n    $(\".donate-button\").on({\n        mouseover: function( ){\n            $(this).css('cursor','pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');    \n        },\n        click: function( ){\n\n            country_alias = $(this).data('alias');\n            \n            $checkout.css(\"display\",\"table\");\n        }\n    });\n    \n    //Close out country checkout\n    $(\".exit-country-checkout\").on({\n        \n        mouseover: function( ){\n            $(this).css('cursor', 'pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');\n        },\n        click: function( ){\n        \n           //clear any selected incentive\n            $donation.find(\"input\").val( \"\" );\n            \n            //clear all form fields on the checkout page\n            $(\"form[name=donationCheckoutForm]\")[0].reset( );\n\n            $checkout.hide( );\n\n             //$('.fund-project').prop('disabled', 'false');\n        }\n    });\n    \n    /*\n    *\n    * Step 1 ( Donation Amount / Login ) actions \n    *\n    */\n    \n    $donation.find(\".continue\").on(\"click\", function( ){\n        \n        var amount = $donation.find(\"input[name=donationAmt]\").val( );\n        \n        var hasErrors = false;\n        \n        if( isNaN( parseInt( amount ) ) || isNaN( parseFloat( amount  ) ) ){\n           hasErrors = true;\n        }\n\n        if( ! hasErrors ){\n            \n            $.ajax({\n                url: \"/storeDonation\",\n                method: \"POST\",\n                data: {amount: parseFloat(amount.replace(\",\",\"\")).formatMoney(2, ',', '.'), type: \"country\"},\n                dataType: \"json\",\n                success: function( resp ){\n                    location.href = '/country/' + country_alias + '/donation';\n                }\n            });\n        }\n    });\n});","$(function( ){\n    \n    var lastInfoWindowOpened;\n    var orgId = $(\"input[name=orgId]\").val( );\n    var userId = \"\";\n\n    if( $(\"input[name=userId]\").length > 0 ){\n    \tuserId = $(\"input[name=userId]\").val( );\n    }\n    \n    setHeight( );\n    \n    /* Trigger Country Causes to Toggle */\n    \n    $(\".cause-name\").on(\"click\", function( ){\n        \n        var cause = $(this).data(\"cause\");\n        \n        $(\".cause-name\").removeClass(\"active\");\n        \n        $(this).addClass(\"active\");\n        \n        $(\".cause-description\").addClass(\"hidden\");\n        \n        $(\".\" + cause + \"-description\").removeClass(\"hidden\");\n        \n    });\n    \n\t/* End Country Causes to Toggle */\n    \n    /* Impact Areas Map */\n    \n    var bounds      = new google.maps.LatLngBounds( );\n    var infowindow  = new google.maps.InfoWindow( );\n    var markers     = new Array( );\n    var infoWindows = new Array( );\n    \n    var countries = new Array( );\n    \n\tif( $(\".area-list .row\").length > 0 ){\n\t    \n\t    $(\".area-list .row\").each( function( ){\n\t        \n\t        $obj = new Object( );\n\t        \n\t        $obj.name = $(this).find(\".country-name\").text( );\n\t        \n\t        $obj.lat = parseFloat( $(this).find(\"input[name=lat]\").val( ) );\n\t        $obj.lng = parseFloat( $(this).find(\"input[name=lng]\").val( ) );\n\t        \n\t        $obj.alias = $(this).find(\"input[name=alias]\").val( );\n\t        \n\t        countries.push( $obj );\n\t        \n\t    });\n\t    \n\t    var mapCanvas = document.getElementById('map');\n\t    \n\t\n\t    var mapOptions = {\n\t      zoom: 3,\n\t      center: new google.maps.LatLng( countries[0].lat, countries[0].lng), \n\t      mapTypeId: google.maps.MapTypeId.ROADMAP,\n\t      styles: styles,\n\t      animatedZoom: true\n\t    }\n\t    \n\t    var map = new google.maps.Map(mapCanvas, mapOptions);\n\t    \n\t    map.addListener(\"mouseover\", function( ){\n\t\t        \n\t       map.setOptions({disableDefaultUI: false});\n\t    });\n\t\n\t    map.addListener(\"mouseout\", function( ){\n\t\n\t       map.setOptions({disableDefaultUI: true\t});\n\t    });\n\t    \n\t    if( countries.length == 1 ){\n\t\t    \n\t\t    var iWindow = new google.maps.InfoWindow({\n\t\t               content: \"<b>\" + countries[0].name + \"</b><br /><a href='/country/\" + countries[0].alias + \"'>View Country</a>\"});\n\t\t               \n\t\t    var marker = new google.maps.Marker({\n\t\t                position: {lat: countries[0].lat, lng: countries[0].lng},\n\t\t                map: map,\n\t\t                animation: google.maps.Animation.DROP,\n\t\t                title: countries[0].name,\n\t\t                infowindow: iWindow\n\t\t            });\n\t\t            \n\t\t    google.maps.event.addListener(marker, \"click\", function( ){\n\t\t        this.infowindow.open(map, this);\n\t\t    });\n\n\t\t    \n\t    }else{\n\t\t    for( x in countries ){\n\t        \n\t\t        var iWindow =  new google.maps.InfoWindow({\n\t\t               content: \"<b>\" + countries[x].name + \"</b><br /><a href='/country/\" + countries[x].alias + \"'>View Country</a>\"\n\t\t            });\n\t\t        \n\t\t        markers.push( new google.maps.Marker({\n\t\t                position: {lat: countries[x].lat, lng: countries[x].lng},\n\t\t                map: map,\n\t\t                animation: google.maps.Animation.DROP,\n\t\t                title: countries[x].name,\n\t\t                infowindow: iWindow\n\t\t            })\n\t\t        );\n\t\t    }\n\t\t    \n\t\t    for( i in markers ){\n\t\t            \n\t\t        google.maps.event.addListener(markers[i], \"click\", function( ){\n\t\t            \n\t\t            if( typeof lastInfoWindowOpened != \"undefined\"){\n\t\t                lastInfoWindowOpened.close( );\n\t\t            }\n\t\t            \n\t\t            lastInfoWindowOpened = this.infowindow;\n\t\t            \n\t\t            this.infowindow.open(map, this);\n\t\t        });\n\t\t        \n\t\t        \n\t\t        bounds.extend( markers[i].position );\n\t\t        \n\t\t        map.fitBounds( bounds );\n\t\t        \n\t\t\t\tinitialZoom = 1;\n\t\t    }\n\t    }\n\t}\n    /*\n\t*    \n\t* Set up $.colorbox for videos and photos    \n\t*    \n\t*/\n\t\n\tif( $(\".org-photos\").length > 0 ){\n\t\t$(\"a.org-photos\").colorbox({rel: 'group0', scalePhotos: true, maxWidth: \"100%\"} );\n\t}\n\t\n\tif( $(\".org-videos\").length > 0 ){\n\t\t$(\"a.org-videos\").colorbox({iframe: true, innerWidth:640, innerHeight:390});\n\t}\n    \n    /*\n    *\n    * Begin Checkout Process for Current Organization\n    *\n    */\n    \n    \n    var $checkout   = $(\"#organizationCheckout\");\n    var $container  = $(\"#organizationCheckout\").find(\".checkout\");\n    var $donation   = $container.find(\".donation\");\n\n    var org_alias   = \"\";\n    \n    //Action for triggering the org donation lightbox\n    $(\".donate-button\").on({\n        mouseover: function( ){\n            $(this).css('cursor','pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');    \n        },\n        click: function( ){\n            \n            org_alias = $(this).data('alias');\n\n            $checkout.css(\"display\",\"table\");\n        }\n    });\n    \n    //Close out organization checkout\n    $(\".exit-organization-checkout\").on({\n        \n        mouseover: function( ){\n            $(this).css('cursor', 'pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');\n        },\n        click: function( ){\n        \n            //clear any selected incentive\n            $donation.find(\"input\").val( \"\" );\n            \n            //clear all form fields on the checkout page\n            $(\"form[name=donationCheckoutForm]\")[0].reset( );\n\n            $(\"#organizationCheckout\").hide( );\n\n             //$('.fund-project').prop('disabled', 'false');\n        }\n    });\n    \n    /*\n    *\n    * Step 1 ( Donation Amount / Login ) actions \n    *\n    */\n    \n    $donation.find(\".continue\").on(\"click\", function( ){\n        \n        var amount = $donation.find(\"input[name=donationAmt]\").val( );\n        \n        var hasErrors = false;\n        \n        if( isNaN( parseInt( amount ) ) || isNaN( parseFloat( amount  ) ) ){\n           hasErrors = true;\n        }\n        \n        if( ! hasErrors ){\n            \n            $.ajax({\n                url: \"/storeDonation\",\n                method: \"POST\",\n                data: {amount: parseFloat(amount.replace(\",\",\"\")).formatMoney(2, ',', '.'), type: \"organization\"},\n                dataType: \"json\",\n                success: function( resp ){\n                    location.href = '/organization/' + org_alias + '/donation';\n                }\n            });\n        }\n    });\n\n    $(\".upload-icon-cover\").click( function( e ){\n    \t$(\"#imgCoverPic\").trigger(\"click\");\n    });\n\n    $(\".upload-icon-profile\").click( function( e ){\n    \t$(\"#imgProfilePic\").trigger(\"click\");\n    });\n\n    $(\"#imgCoverPic\").on(\"change\", function( e ){\n\n    \tvar parent = $(this).data(\"parent\");\n    \tvar file_data = this.files[0];\n        var form_data = new FormData();\n        form_data.append('file', file_data);\n        form_data.append('type', 'cover');\n        form_data.append('id', orgId);\n        form_data.append('userId', userId);\n\n        var token = $(this).parent( ).find(\"input[name=_token]\").val( );\n\n        form_data.append('_token', token);\n\n        $.ajax({\n        \turl: \"/organization/uploadimage\",\n        \tmethod: \"POST\",\n        \tdata: form_data,\n        \tcontentType: false,\n            cache: false,\n            processData: false,\n            beforeSend: function( ){\n            \t$(\".upload-info\").fadeIn( );\n            },\n            success: function( resp ){\n            \tif( resp.status ){\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-success\").fadeIn( );\n\n            \t\t$(\".\" + parent).css(\"background\", \"url(\" + resp.url + \") no-repeat center center\");\n            \t\t$(\".\" + parent).css(\"background-size\", \"cover\");\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-success\").fadeOut( );\n            \t\t}, 3000);\n\n            \t}else{\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-error\").fadeIn( );\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-error\").fadeOut( );\n            \t\t}, 3000);\n            \t}\n            },\n            error: function( ){\n            \t$(\".upload-info\").fadeOut( );\n        \t\t$(\".upload-error\").fadeIn( );\n\n        \t\tsetTimeout( function( ){\n        \t\t\t$(\".upload-error\").fadeOut( );\n        \t\t}, 3000);\n            }\n\t\t});\n\t});\n\n\t$(\"#imgProfilePic\").on(\"change\", function( e ){\n    \t\n    \tvar file_data = this.files[0];\n        var form_data = new FormData();\n        form_data.append('file', file_data);\n        form_data.append('type', 'logo');\n        form_data.append('id', orgId);\n        form_data.append('userId', userId);\n\n        var token = $(this).parent( ).find(\"input[name=_token]\").val( );\n\n        form_data.append('_token', token);\n\n        $.ajax({\n        \turl: \"/organization/uploadimage\",\n        \tmethod: \"POST\",\n        \tdata: form_data,\n        \tcontentType: false,\n            cache: false,\n            processData: false,\n            beforeSend: function( ){\n            \t$(\".upload-info\").fadeIn( );\n            },\n            success: function( resp ){\n            \tif( resp.status ){\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-success\").fadeIn( );\n\n            \t\t$(\".logo\").prop(\"src\", resp.url );\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-success\").fadeOut( );\n            \t\t}, 3000);\n\n            \t}else{\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-error\").fadeIn( );\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-error\").fadeOut( );\n            \t\t}, 3000);\n            \t}\n            },\n            error: function( ){\n            \t$(\".upload-info\").fadeOut( );\n        \t\t$(\".upload-error\").fadeIn( );\n\n        \t\tsetTimeout( function( ){\n        \t\t\t$(\".upload-error\").fadeOut( );\n        \t\t}, 3000);\n            }\n\t\t});\n    });\n\n\n});","$(function( ){\n    \n    setHeight( );\n    \n    \n    $(\".subCauseName\").on(\"click\", function( ){\n        \n        var cause = $(this).data(\"cause\");\n        \n        $(\".subCauseName\").removeClass(\"active\");\n        \n        $(this).addClass(\"active\");\n        \n        $(\".subcause-description\").addClass(\"hidden\");\n        \n        $(\".subcause-description-\" + cause).removeClass(\"hidden\");\n        \n    });\n    \n     /*\n    *\n    * Begin Checkout Process for Current Cause\n    *\n    */\n    \n    var paypal_username = $(\"input[name=paypalUn]\").val( );\n    var user_id         = $(\"form[name=donationCheckoutForm]\").find(\"input[name=user_id]\").val( );\n    \n    var $checkout   = $(\"#causeCheckout\");\n    var $container  = $(\"#causeCheckout\").find(\".checkout\");\n    var $donation   = $container.find(\".donation\");\n    var $details    = $container.find(\".details\");\n    var $review     = $container.find(\".review\");\n    \n    var steps = [];\n    \n    var number_of_steps = 4;\n    \n    var cause_alias;\n    /*\n    $(\".donate-button\").on(\"click\", function( ){\n\n        location.href = '/cause/' + $(this).data('alias') + '/donation';\n\n    });\n    */\n    \n    //Action for triggering the cause donation lightbox\n    \n    $(\".donate-button\").on({\n        mouseover: function( ){\n            $(this).css('cursor','pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');    \n        },\n        click: function( ){\n            \n            cause_alias = $(this).data('alias');\n            \n            $checkout.css(\"display\",\"table\");\n        }\n    });\n    \n    //Close out cause checkout\n    $(\".exit-cause-checkout\").on({\n        \n        mouseover: function( ){\n            $(this).css('cursor', 'pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');\n        },\n        click: function( ){\n        \n            //destroy steps object \n            steps = [];\n\n            //clear any selected incentive\n            $donation.find(\"input\").val( \"\" );\n            \n            //clear all form fields on the checkout page\n            $(\"form[name=donationCheckoutForm]\")[0].reset( );\n\n            $checkout.hide( );\n\n             //$('.fund-project').prop('disabled', 'false');\n        }\n    });\n    \n    /*\n    *\n    * Step 1 ( Donation Amount / Login ) actions \n    *\n    */\n    \n    $donation.find(\".continue\").on(\"click\", function( ){\n        \n        var amount = $donation.find(\"input[name=donationAmt]\").val( );\n        \n        var hasErrors = false;\n        \n        if( isNaN( parseInt( amount ) ) || isNaN( parseFloat( amount  ) ) ){\n\t       hasErrors = true;\n        }\n        \n        if( ! hasErrors ){\n            \n            $.ajax({\n                url: \"/storeDonation\",\n                method: \"POST\",\n                data: {amount: parseFloat(amount.replace(\",\",\"\")).formatMoney(2, ',', '.'), type: \"cause\"},\n                dataType: \"json\",\n                success: function( resp ){\n                    location.href = '/cause/' + cause_alias + '/donation';\n                }\n            });\n        }\n    });\n});","$(function( ){\n    \n    var filters = {};\n    \n    var filepath = $(\"input[name=filepath]\").val( );\n    $(\"input[name=filepath]\").remove( );\n    \n    $(\".filter-items ul li\").on(\"click\", function( e ){\n        \n        var removeItem = false;\n        \n        if( $(this).hasClass(\"chosen-filter\") ){\n            $(this).removeClass('chosen-filter');\n            removeItem = true;\n        }else{\n            $(this).parent( ).find(\"li\").removeClass('chosen-filter');\n            $(this).addClass('chosen-filter');    \n        }\n        \n        var overlayHeight = $(\".product-loading-overlay\").parent( ).height( );\n        \n        $(\".product-loading-overlay\").css({\n            height: overlayHeight + \"px\",\n            display: \"table\"\n        });\n        \n        if( parseInt( $(this).data(\"amount\") ) > 0 ){\n        \n            var type = $(this).data('filter-type');\n\n            switch( type ){\n\n                case \"price\":\n\n                    if( removeItem ){\n                        delete filters.price;\n                    }else{\n                        var price = $(this).data(\"price\");\n\n                        filters.price = price;    \n                    }\n\n                break;\n                case \"category\":\n\n                    if( removeItem ){\n                        delete filters.cat_id;\n                    }else{\n                        var cat_id = $(this).data(\"cat-id\");\n\n                        filters.cat_id = cat_id    \n                    }\n\n                break;\n                case \"rating\":\n\n                    if( removeItem ){\n                        delete filters.rating;\n                    }else{\n                        var rating = $(this).data(\"rating\");\n\n                        filters.rating = rating;        \n                    }\n\n                break;\n            }\n            \n            $.ajax({\n                method: \"post\",\n                url: \"/products/filter\",\n                data: filters,\n                dataType: \"json\",\n                success: function( resp ){\n\n                    if( resp.status == 1 ){\n\n                        if( resp.data.length == 0 ){\n                        \t$(\".product-loading-overlay\").hide( );\n                        }else{\n\n                            var prdList = new Array( );\n\n                            $.each(resp.data, function(count, item){\n\n                                var html = \"\";\n\n                                html =  \"<div class='col-lg-6 col-md-6 margin-top-10'>\";\n                                html += \"   <div class='product-module'>\";\n                                html += \"       <div class='product-module-top'>\";\n                                html += \"           <a href='/product/\" + item.product_alias + \"'><img src='\" + item.image + \"' align='left' /></a>\";\n                                html += \"           <div class='product-module-name'><a href='/product/\" + item.product_alias + \"'>\" + item.name + \"</a></div>\";\n                                html += \"           <div class='product-module-org-name'>\";\n                                html += \"               <span class='product-price'>\" + item.price + \"</span> from \" + item.org_name.stripSlashes( );  \n                                html += \"           </div>\";\n                                html += \"           <div class='rating'>\";\n\n                                for( var i = 1 ; i < 6 ; i++ ){\n                                    if( i <= item.rating ){\n                                        html += \"       <span class='star fill' >\";\n                                        html += \"          <i data-icon='&#xe017;' class='pwi-icon-star pwi-icon-2em'></i>\";\n                                        html += \"       </span>\";\n                                    }else{\n                                        html += \"       <span class='star' >\";\n                                        html += \"          <i data-icon='&#xe017;' class='pwi-icon-star pwi-icon-2em'></i>\";\n                                        html += \"       </span>\";\n                                    }\n                                }\n                                html += \"           </div>\";\n                                html += \"           <div class='product-module-desc'>\";\n\n                                if( item.descExp.length < 50  ){\n                                    html +=             item.sdesc;\n                                }else{\n                                    for( var i = 0 ; i < item.descExp.length ; i++ ){\n\n                                        if( i != 50 ){\n                                            html += item.descExp[i] + \" \";\n                                        }else{\n                                            html += \"<a href='' class='readmore'>...See More</a>\";\n                                            html += \"<span class='more'>\" + item.descExp[i];\n                                        }\n                                    }\n                                    html += \"</span><a href='#' class='readless'>Show Less</a>\";\n                                }\n\n                                html += \"           </div>\";\n                                html += \"       </div>\";\n                                html += \"   <div style='clear: both;'></div>\";\n                                html += \"   </div>\";\n                                html += \"</div>\";\n\n                                prdList.push( html );\n                            });\n\n                            $(\".product-module-list\")\n                            .html( \"\" )\n                            .html( prdList.join('') );\n\n                            $(\".product-loading-overlay\").hide( );\n                        }\n                    }\n                }\n            });\n        }\n    });\n    \n    /**\n\t*\n\t* Checkout process for products\n\t*\n\t*/\n\n\t$(\".buy-now\").on(\"click\", function( ){\n\t\tvar alias = $(this).data('alias');\n\n\t\tlocation.href = '/product/' + alias + '/purchase';\n\t});\n\t\n\t\n\tvar paypal_username = $(\"input[name=paypalUn]\").val( );\n    var user_id         = $(\"form[name=productCheckoutForm]\").find(\"input[name=user_id]\").val( );\n\n    //Get Project Data\n    \n    var product_name \t= $(\"input[name=product_name]\").val( );\n    var org_name \t\t= $(\"input[name=org_name]\").val( );\n    var $checkout \t\t= $(\"#productCheckout\");\n    var $container \t\t= $(\"#productCheckout\").find(\".checkout\");\n    var $details    \t= $container.find(\".details\");\n    var $review  \t\t= $container.find(\".review\");\n    var product_id \t\t= $(\".add-to-cart\").data('id');\n    \n    var data \t\t\t= {user_id: user_id, id: product_id, shipping: parseFloat( $(\"input[name=shipping]\").val( ) )};\n    \n    var number_of_steps = 3;\n    \n    /**\n\t*\n\t* Initial step to open up the lightbox to continue with the product checkout\n\t*\n\t*/\n    \n    $(\".add-to-cart\").on(\"click\", function( ){\n\t    \n        //$(this).prop('disabled', 'true');\n        \n\t\tvar modifiers = [];\n        var errors    = [];\n        var product_alias = $(this).data('alias');\n        \n        $(\".error\").hide( );\n\n\t\t$(\".product-modifiers select\").each(function( i ){\n\t        \n\t        var name \t\t= $(this).find(\"option:first\").text( );\n\t\t\t\n\t\t\tvar value \t\t= $(this).find(\":selected\").val( );\n\t\t\tvar valueText \t= $(this).find(\":selected\").text( );\n\t\t\t\n\t\t\tif( value == 0 ){\n\t\t\t\terrors.push($(this).attr(\"name\") + \"|\" + \"Please select a \" + name);\n\t\t\t}else{\n\t\t\t\tmodifiers.push(\"<div class='modifier'><b>\" + name.replace(\"Select \", \"\") + \"</b>: \" + valueText + \"</div>\");\n\t\t\t}\n\t\t});\n\t\t\n\t\tif( $(\"select[name=quantity]\").find(\":selected\").val( ) == \"0\" ){\n\t\t\terrors.push(\"quantity|Please Input a Quantity\");\n\t\t}\n\t\t\n\t\tif( errors.length == 0 ){\n\t\t\t\n\t\t\tvar price \t = parseFloat( $(\".price\").data('price') ).formatMoney(2, ',', '.');\n\t\t\t\n\t\t\tvar quantity = parseInt( $(\"select[name=quantity]\").find(\":selected\").val( ) );\n\t\t\t\n\t\t\tlocation.href = \"/product/\" + product_alias + \"/purchase?quantity=\" + quantity + \"&modifiers=\" + encodeURIComponent( data.modifierIds );\n\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tfor(var x in errors){\n\t\t\t\t\n\t\t\t\tvar error = errors[x].split(\"|\");\n\t\t\t\t\n\t\t\t\t$(\".\" + error[0] + \"-error\").html(error[1]).show( );\n\t\t\t}\n\t\t}\n    });\n    \n    /*\n\t*\n\t* Create event for getting quantity amount for selected modifiers\n\t*\n\t*/\n\t\n\tvar modifierOptions = [];\n\tvar combo = \"\";\n\t\n\t$(\".product-modifiers select\").on(\"change\", function( i ){\n\t\t\n\t\tvar allSelected = true;\n\t\t\n\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\n\t\t\tif( parseInt( $(this).find(\":selected\").val( ) ) == 0 ){\n\t\t\t\tallSelected = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif( allSelected ){\n\t\t\t\n\t\t\t$(\".product-modifiers select\").each( function( i ){\n\t\t\t\tmodifierOptions.push( parseInt( $(this).find(\":selected\").val( ) ) );\t\n\t\t\t});\n\t\t\t\n\t\t\tmodifierOptions = modifierOptions.reverse( );\n\t\t\t\t\n\t\t\tcombo = modifierOptions.join( );\n\t\t\t\n\t\t\tdata.modifierIds = combo;\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\tmethod: \"get\",\n\t\t\t\turl: \"/products/getQuantity\",\n\t\t\t\tdata: \"options=\" + combo + \"&id=\" + product_id,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tbeforeSend: function( ){\n\n\t\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\tconsole.log( $(this) );\n\t\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\t\t$(this).remove( );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Getting Quantity ...\");\n\t\t\t\t},\n\t\t\t\tsuccess: function( resp ){\n\t\t\t\t\t$(\"select[name=quantity]\").find(\"option:first\").html(\"Select Quantity\");\n\t\t\t\t\tmodifierOptions = [];\n\t\t\t\t\t\n\t\t\t\t\tif( parseInt( resp.count ) > 0 ){\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor( var i = 1 ; i <= resp.count ; i++ ){\n\t\t\t\t\t\t\t$(\"select[name=quantity]\").append(\"<option value='\" + i + \"'>\" + i + \"</option>\");\n\t\t\t\t\t\t\t$details.find(\"select[name=product-quantity]\").append(\"<option value='\" + i + \"'>\" + i + \"</option>\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tdata.modifierId = resp.modifier_id;\n\t\t\t\t\t\t\n\t\t\t\t\t\t$(\".price\").data(\"price\", resp.price);\n\t\t\t\t\t\t$(\".price\").html(\"$\" + parseFloat( resp.price ) + \".00\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\t\n\t\t\tif( $(\"select[name=quantity]\").length > 1 ){\n\t\t\t\t\n\t\t\t\t$(\"select[name=quantity] option\").each( function( i ){\n\t\t\t\t\t\n\t\t\t\t\tif( i > 0 ){\n\t\t\t\t\t\tremove( $(this) );\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t}\n\t});\n    \n    /*\n\t*    \n\t* Create event for updating quantity on checkout\n\t*   \n\t*/\n    \n    $details.find(\"select[name=product-quantity]\").on(\"change\", function( ){\n\t    \n\t    var value = parseInt( $(this).find(\":selected\").val( ) );\n\t    \n\t    data.quantity = value;\n\t    \n\t    $details.find(\".product-amount\").find(\"span\").html( \"$\" + (data.price * data.quantity) + \".00\");\n\t    \n    });\n    \n    \n    /**\n\t*\n\t* Step 1 Continue checkout     \n\t*    \n\t*/\n    \n    $details.find('.continueCheckout').on(\"click\", function( ){\n\t    \n\t    var formData = $('form[name=productCheckoutForm]').serialize( );\n        \n\t\tvar $button = $(this);\n\t\t\n\t\t$.ajax({\n            url: \"/product/validateCheckout\",\n            method: \"POST\",\n            data: formData,\n            beforeSend: function( ){\n                \n                //clear any error messages\n                $(\".error\").html( \"\" ).addClass('hidden');\n                \n                //change button to show processing\n\t\t\t\t$button.html( \"Validating...\");\n\t\t        $button.prop(\"disabled\", true);\n            },\n            success: function( resp ){\n\t            \n\t            $button.html( \"review order\");\n\t\t        $button.prop(\"disabled\", false);\n\t\t        \n\t\t        if( resp.status ){\n\t\t\t        \n\t\t\t        var $form = $('form[name=productCheckoutForm]');\n\t\t\t        \n\t\t\t        \n\t\t\t        data.first_name\t\t\t= $form.find(\"input[name='first_name']\").val( );\n\t\t\t        data.last_name\t\t\t= $form.find(\"input[name='last_name']\").val( );\n\t\t\t        data.email\t\t\t\t= $form.find(\"input[name='email']\").val( );\n\t\t\t        data.shippingAddress1 \t= $form.find(\"input[name='shippingAddress1']\").val( );\n\t\t\t        data.shippingAddress2 \t= $form.find(\"input[name='shippingAddress2']\").val( );\n\t\t\t        data.shippingcity \t\t= $form.find(\"input[name='shippingCity']\").val( );\n\t\t\t        data.shippingstate\t\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").text( );\n\t\t\t        data.shippingstateId\t= $form.find(\"select[name='shippingState']\").find(\"option:selected\").val( );\n\t\t\t        data.shippingzip\t\t= $form.find(\"input[name='shippingZip']\").val( );\n\t\t\t        data.shippingcountry\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").text( );\n\t\t\t        data.shippingcountryId\t= $form.find(\"select[name='shippingCountry']\").find(\"option:selected\").val( );\n\t\t\t        data.cc_number\t\t\t= $form.find(\"input[name=cc_number]\").val( );\n\t                data.name_on_card  \t\t= $form.find(\"input[name=name_on_card]\").val( );\n\t                data.exp_date\t\t\t= $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( );\n\t                data.ccv \t\t\t\t= $form.find(\"input[name=ccv]\").val( );\n\t\t\t        data.billingaddress1\t= $form.find(\"input[name='billingAddress1']\").val( );\n\t\t\t        data.billingaddress2    = $form.find(\"input[name='billingAddress2']\").val( );\n\t\t\t        data.billingcity\t\t= $form.find(\"input[name='billingCity']\").val( );\n\t\t\t        data.billingstate \t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").text( );\n\t\t\t        data.billingstateId\t\t= $form.find(\"select[name=billingState]\").find(\"option:selected\").val( );\n\t\t\t        data.billingzip\t\t\t= $form.find(\"input[name='billingZip']\").val( );\n\t\t\t        data.billingcountry\t\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").text( );\n\t\t\t        data.billingcountryId\t= $form.find(\"select[name=billingCountry]\").find(\"option:selected\").val( );\n\t\t\t        \n\t\t\t\t\tvar shipping;\n\n\t\t\t\t\tvar cc_mask = data.cc_number.replace(/\\d{12}(\\d{4})/, \"XXXX XXXX XXXX $1\");\n\n\t\t\t\t\tdata.shipping = parseFloat( data.shipping ).formatMoney(2, ',', '.');\n\t\t\t\t\t\n\t\t\t\t\tif( parseInt( data.shipping) == 0 ){\n\t\t\t\t\t\tshipping = 0.00;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tshipping = parseFloat( data.shipping );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar subTotal = parseFloat( data.price ) * parseInt( data.quantity );\n\t\t\t\t\t\n\t\t\t\t\tvar tax = (subTotal/100) * parseFloat( resp.taxCode.tax_percentage );\n\t\t\t\t\t\n\t\t\t\t\tdata.tax = parseFloat(tax).formatMoney(2, ',', '.');\n\t\t\t\t\t\n\t\t\t\t\tvar total = parseFloat(subTotal) + parseFloat( tax ) + parseFloat( data.shipping);\n\n\t\t\t\t\ttotal = total.formatMoney(2, ',', '.');\n\n\t\t\t\t\t$review.find(\".shippingaddress1\").text( data.shippingAddress1 );\n\t\n\t                $review.find(\".shippingaddress2\").text( data.shippingAddress2 );\n\t\n\t                $review.find(\".shippingcity\").text( data.shippingcity );\n\t\n\t                $review.find(\".shippingstate\").text( data.shippingstate );\n\t\n\t                $review.find(\".shippingzip\").text( data.shippingzip );\n\t\n\t                $review.find(\".shippingcountry\").text( data.shippingcountry );\n\n\t                $review.find(\".cc-num\").text( cc_mask );\n\n\t                $review.find(\".cc-name\").text( data.name_on_card );\n\n\t                $review.find(\".cc-expdate\").text( $form.find(\"select[name=exp_date_month]\").find(\"option:selected\").val( ) + \"/\" + $form.find(\"select[name=exp_date_year]\").find(\"option:selected\").val( ) );\n\n\t                $review.find(\".cc-ccv\").text( data.ccv );\n\n\t\t\t\t\t$review.find(\".billingaddress1\").text( data.billingaddress1 );\n\t\n\t                $review.find(\".billingaddress2\").text( data.billingaddress2 );\n\t\n\t                $review.find(\".billingcity\").text( data.billingcity );\n\t\n\t                $review.find(\".billingstate\").text( data.billingstate );\n\t\n\t                $review.find(\".billingzip\").text( data.billingzip );\n\t\n\t                $review.find(\".billingcountry\").text( data.billingcountry );\n\t                \n\t                $review.find(\".item-price\").text( \"$\" + parseFloat(data.price * data.quantity).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".item-tax\").text( \"$\" + parseFloat( tax ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".item-shipping\").text( \"$\" + parseFloat(shipping).formatMoney(2, ',', '.') )\n\t                \n\t                $review.find(\".item-total\").text(\"$\" + parseFloat( total ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".product-amount span\").html( \"$\" + parseFloat( data.price ).formatMoney(2, ',', '.') );\n\t                \n\t                $review.find(\".quantity span\").html( data.quantity );\n\t                \n\t                $review.find(\".total span\").html( parseFloat( subTotal ).formatMoney(2, ',', '.') );\n\n\t                $review.find(\".product-total-amount\").html( \"$\" + total );\n\t                \n\t\t\t\t\t$review.css(\"margin-left\", \"0px\");\n\t                \n\t                $details.css(\"margin-left\", \"-590px\");\t         \n\t                \n\t\t        }else{\n\t\t\t        \n\t\t\t        var errors = resp.errors;\n                    \n                    for( var key in errors ){\n                        $(\".\" + key + \"-error\").html( errors[key] ).removeClass( 'hidden' ).show( );\n                    }\n\n                    $button.html( \"review order\");\n\t\t        \t$button.prop(\"disabled\", false);\n\t\t\t\t}\n            }\n        });\n\t});\n    \n    $review.find(\".edit-button\").on(\"click\", function( ){\n\t    \n\t\t$details.css(\"margin-left\", \"0px\");\n\n        $review.css(\"margin-left\", \"9999999px\");\n\t    \n    });\n    \n    /*\n    *\n    * Actions for step 3 ( Order Review )\n    *\n    */\n    \n    $review.find(\".checkout-button\").on(\"click\", function( ){\n    \n    \tvar order_id = 0;\n    \t\n    \t$.ajax({\n\t    \tmethod: \"post\",\n\t    \turl: \"/products/setPendingTransaction\",\n\t    \tdata: data,\n\t    \tdataType: \"json\",\n\t    \tsuccess: function( resp ){\n\t\t    \t\n\t\t    \torder_id = resp.order_id;\n\t\t    \t\n\t\t    \t //find the paypalStdForm\n                var $checkoutForm = $(\"form[name=paypalStdCheckout]\");\n                \n                //Input values into the form\n                $checkoutForm.find(\"input[name=cmd]\").val(\"_xclick\");\n                $checkoutForm.find(\"input[name=return]\").val(window.location.protocol + \"//\" +  window.location.host + \"/thankyou\");\n                $checkoutForm.find(\"input[name=notify_url]\").val(window.location.protocol + \"//\" +  window.location.host + \"/products/ipn\");\n\n                $checkoutForm.find(\"input[name=amount]\").val( data.price );\n                \n                $checkoutForm.find(\"input[name=quantity]\").val( data.quantity ); //new\n                \n                $checkoutForm.find(\"input[name=shipping]\").val( data.shipping ); //new\n                \n                $checkoutForm.find(\"input[name=tax]\").val( data.tax ); // new\n                \n\t\t\t\t$checkoutForm.find(\"input[name=custom]\").val( order_id );\n\n\t\t\t\t$checkoutForm.find(\"input[name=email]\").val( data.email );\n                \n                $checkoutForm.find(\"input[name=business]\").val( paypal_username );\n                \n                $checkoutForm.find(\"input[name=first_name]\").val( data.first_name );\n                \n                $checkoutForm.find(\"input[name=last_name]\").val( data.last_name );\n                \n                $checkoutForm.find(\"input[name=address1]\").val( data.billingaddress1 );\n                \n                $checkoutForm.find(\"input[name=address2]\").val( data.billingaddress2 );\n                \n                $checkoutForm.find(\"input[name=city]\").val( data.billingcity );\n                \n                $checkoutForm.find(\"input[name=state]\").val( data.billingstate );\n                \n                $checkoutForm.find(\"input[name=zip]\").val( data.billingzip );\n                \n                $checkoutForm.find(\"input[name=country]\").val( data.billingcountry );\n                \n                $checkoutForm.trigger(\"submit\");\n\t\t    \t\n\t\t    \t\n\t    \t}\n    \t});\n    \n    });\n});","$(function( ){\n\t\n\tvar paypal_username = $(\"input[name=paypalUn]\").val( );\n    var user_id         = $(\"form[name=donationCheckoutForm]\").find(\"input[name=user_id]\").val( );\n    \n    //Get Project Data\n    \n    setHeight( );\n    \n    var project_name \t= $(\"input[name=project_name]\").val( );\n    var org_name \t\t= $(\"input[name=org_name]\").val( );\n    var $checkout \t\t= $(\"#crowdFundingCheckout\");\n    var $container \t\t= $(\"#crowdFundingCheckout\").find(\".checkout\");\n    var $incentive \t\t= $container.find(\".incentives\").find(\".incentive\");\n    var $contribute \t= $container.find(\".just-contribute\");\n    \n    var alias           = \"\";\n    var incentiveId     = \"\";\n    \n    //Fund Project Button Action\n    \n    $(\".fund-project\").on(\"click\", function( ){\n        \n        //$(this).prop('disabled', 'true');\n        \n        alias = $(this).data('alias');\n        \n        $checkout.css(\"display\",\"table\");\n        \n    });\n\n    //Individual Incentive click Action\n    $(\".incentive-list\").find(\".incentive\").on(\"click\", function( ){\n\n        incentiveId = $(this).data(\"incentive-id-front\");\n        \n        alias = $(\".fund-project\").data('alias');\n        \n        $container\n        .find(\"[data-step=1]\")\n        .find(\"[data-incentive-id=\" + incentiveId + \"]\")\n        .addClass('selected')\n        .find(\".donation\").slideDown( );\n        \n        $checkout.css(\"display\",\"table\");\n    });\n    \n    /*\n    *\n    * Step 1 ( Incentive/Funding ) actions \n    *\n    */\n    \n    //Select Incentive on first page of checkout\n     $incentive.on(\"click\", function( ){\n\n        if( ! $(this).hasClass('selected') ){\n            $container.find(\".incentive\").each( function( ){\n\n                if( $(this).hasClass('selected') ){\n                    $(this).find('.donation').slideUp( );\n                    $(this).removeClass('selected');\n                }\n            });\n\n            if( $container.find(\".just-contribute\").hasClass('selected') ){\n\n                $(\".just-contribute\").find('.donation').slideUp( );\n                $(\".just-contribute\").removeClass('selected');\n            }\n\n            $(this).addClass('selected');\n            $(this).find(\".donation\").slideDown( );    \n        }\n    });\n    \n    //Select the contribute button on the Incentive Page\n    $contribute.on(\"click\", function( ){\n\n        if( ! $(this).hasClass('selected') ){\n            $container.find(\".incentive\").each( function( ){\n\n                if( $(this).hasClass('selected') ){\n                    $(this).find('.donation').slideUp( );\n                    $(this).removeClass('selected');\n                }\n            });\n\n            $(this).addClass('selected');\n            $(this).find(\".donation\").slideDown( );\n        }\n    });\n    \n    //Select the continue button after selecting an incentive or general funding\n    \n    $incentive.find(\".continue\").on(\"click\",function( ){\n\n        incentiveId =  $container.find(\".selected\").data('incentive-id');\n\n        var amount = $container.find(\".incentive[data-incentive-id=\" + incentiveId + \"]\").find(\"input[name=donationAmt]\").val( );\n        \n        //var needShipping = $container.find(\".incentive[data-incentive-id=\" + incentiveId + \"]\").find(\"input[name=shippingRequired]\").val( );\n        \n        //incentive_name = $container.find(\".incentive[data-incentive-id=\" + incentiveId + \"]\").find(\".title\").text( );\n        \n\t\tvar errors = new Array( );\n\n        if( isNaN( parseFloat( amount ) ) ){\n           // alert('error');\n        }\n\n        if( errors.length == 0 ){\n\n            $.ajax({\n                url: \"/crowdfunding/storeFund\",\n                method: \"post\",\n                data: \"amount=\" + parseFloat(amount.replace(\",\",\"\")).formatMoney(2, ',', '.') + \"&incentive=\" + incentiveId,\n                success: function( resp ){\n\n                    location.href = \"/crowdfunding/\" + alias + \"/fund\";\n                }\n            });\n        }\n    });\n    \n    $contribute.find(\".continue\").on(\"click\", function( ){\n        var amount = $contribute.find(\"input[name=donationAmt]\").val( );\n\n        var errors = new Array( );\n\n        if( isNaN( parseInt( amount ) ) ){\n            //alert('error');\n        }\n\n        if( errors.length == 0 ){\n            \n            $.ajax({\n                url: \"/crowdfunding/storeFund\",\n                method: \"post\",\n                data: \"amount=\" + amount + \"&incentive=\" + incentiveId,\n                success: function( resp ){\n\n                    location.href = \"/crowdfunding/\" + alias + \"/fund\";\n                }\n            });\n        }\n    });\n});","$(document).on(\"pageload\", function( ){\n\n\talert('hi');\n\t\n\tvar hpHeight = $(\".indexWrapper\").height( );\n\n\tconsole.log( hpHeight );\n\n});","/*!\n *\n * jQuery TE 1.4.0 , http://jqueryte.com/\n * Copyright (C) 2013, Fatih Koca (fattih@fattih.com), (http://jqueryte.com/about)\n\n * jQuery TE is provided under the MIT LICENSE.\n *\n*/\n(function(e){e.fn.jqte=function(t){function l(e,t,n,r,i){var s=f.length+1;return f.push({name:e,cls:s,command:t,key:n,tag:r,emphasis:i})}var n=[{title:\"Text Format\"},{title:\"Font Size\"},{title:\"Color\"},{title:\"Bold\",hotkey:\"B\"},{title:\"Italic\",hotkey:\"I\"},{title:\"Underline\",hotkey:\"U\"},{title:\"Ordered List\",hotkey:\".\"},{title:\"Unordered List\",hotkey:\",\"},{title:\"Subscript\",hotkey:\"down arrow\"},{title:\"Superscript\",hotkey:\"up arrow\"},{title:\"Outdent\",hotkey:\"left arrow\"},{title:\"Indent\",hotkey:\"right arrow\"},{title:\"Justify Left\"},{title:\"Justify Center\"},{title:\"Justify Right\"},{title:\"Strike Through\",hotkey:\"K\"},{title:\"Add Link\",hotkey:\"L\"},{title:\"Remove Link\"},{title:\"Cleaner Style\",hotkey:\"Delete\"},{title:\"Horizontal Rule\",hotkey:\"H\"},{title:\"Source\"}];var r=[[\"p\",\"Normal\"],[\"h1\",\"Header 1\"],[\"h2\",\"Header 2\"],[\"h3\",\"Header 3\"],[\"h4\",\"Header 4\"],[\"h5\",\"Header 5\"],[\"h6\",\"Header 6\"],[\"pre\",\"Preformatted\"]];var i=[\"10\",\"12\",\"16\",\"18\",\"20\",\"24\",\"28\"];var s=[\"0,0,0\",\"68,68,68\",\"102,102,102\",\"153,153,153\",\"204,204,204\",\"238,238,238\",\"243,243,243\",\"255,255,255\",null,\"255,0,0\",\"255,153,0\",\"255,255,0\",\"0,255,0\",\"0,255,255\",\"0,0,255\",\"153,0,255\",\"255,0,255\",null,\"244,204,204\",\"252,229,205\",\"255,242,204\",\"217,234,211\",\"208,224,227\",\"207,226,243\",\"217,210,233\",\"234,209,220\",\"234,153,153\",\"249,203,156\",\"255,229,153\",\"182,215,168\",\"162,196,201\",\"159,197,232\",\"180,167,214\",\"213,166,189\",\"224,102,102\",\"246,178,107\",\"255,217,102\",\"147,196,125\",\"118,165,175\",\"111,168,220\",\"142,124,195\",\"194,123,160\",\"204,0,0\",\"230,145,56\",\"241,194,50\",\"106,168,79\",\"69,129,142\",\"61,133,198\",\"103,78,167\",\"166,77,121\",\"153,0,0\",\"180,95,6\",\"191,144,0\",\"56,118,29\",\"19,79,92\",\"11,83,148\",\"53,28,117\",\"116,27,71\",\"102,0,0\",\"120,63,4\",\"127,96,0\",\"39,78,19\",\"12,52,61\",\"7,55,99\",\"32,18,77\",\"76,17,48\"];var o=[\"Web Address\",\"E-mail Address\",\"Picture URL\"];var u=e.extend({status:true,css:\"jqte\",title:true,titletext:n,button:\"OK\",format:true,formats:r,fsize:true,fsizes:i,funit:\"px\",color:true,linktypes:o,b:true,i:true,u:true,ol:true,ul:true,sub:true,sup:true,outdent:true,indent:true,left:true,center:true,right:true,strike:true,link:true,unlink:true,remove:true,rule:true,source:true,placeholder:false,br:true,p:true,change:\"\",focus:\"\",blur:\"\"},t);e.fn.jqteVal=function(t){e(this).closest(\".\"+u.css).find(\".\"+u.css+\"_editor\").html(t)};var a=navigator.userAgent.toLowerCase();if(/msie [1-7]./.test(a))u.title=false;var f=[];l(\"format\",\"formats\",\"\",\"\",false);l(\"fsize\",\"fSize\",\"\",\"\",false);l(\"color\",\"colors\",\"\",\"\",false);l(\"b\",\"Bold\",\"B\",[\"b\",\"strong\"],true);l(\"i\",\"Italic\",\"I\",[\"i\",\"em\"],true);l(\"u\",\"Underline\",\"U\",[\"u\"],true);l(\"ol\",\"insertorderedlist\",\"¾\",[\"ol\"],true);l(\"ul\",\"insertunorderedlist\",\"¼\",[\"ul\"],true);l(\"sub\",\"subscript\",\"(\",[\"sub\"],true);l(\"sup\",\"superscript\",\"&\",[\"sup\"],true);l(\"outdent\",\"outdent\",\"%\",[\"blockquote\"],false);l(\"indent\",\"indent\",\"'\",[\"blockquote\"],true);l(\"left\",\"justifyLeft\",\"\",\"\",false);l(\"center\",\"justifyCenter\",\"\",\"\",false);l(\"right\",\"justifyRight\",\"\",\"\",false);l(\"strike\",\"strikeThrough\",\"K\",[\"strike\"],true);l(\"link\",\"linkcreator\",\"L\",[\"a\"],true);l(\"unlink\",\"unlink\",\"\",[\"a\"],false);l(\"remove\",\"removeformat\",\".\",\"\",false);l(\"rule\",\"inserthorizontalrule\",\"H\",[\"hr\"],false);l(\"source\",\"displaysource\",\"\",\"\",false);return this.each(function(){function B(){if(window.getSelection)return window.getSelection();else if(document.selection&&document.selection.createRange&&document.selection.type!=\"None\")return document.selection.createRange()}function j(e,t){var n,r=B();if(window.getSelection){if(r.anchorNode&&r.getRangeAt)n=r.getRangeAt(0);if(n){r.removeAllRanges();r.addRange(n)}if(!a.match(/msie/))document.execCommand(\"StyleWithCSS\",false,false);document.execCommand(e,false,t)}else if(document.selection&&document.selection.createRange&&document.selection.type!=\"None\"){n=document.selection.createRange();n.execCommand(e,false,t)}q(false,false)}function F(t,n,r){if(v.not(\":focus\"))v.focus();if(window.getSelection){var i=B(),s,o,u;if(i.anchorNode&&i.getRangeAt){s=i.getRangeAt(0);o=document.createElement(t);e(o).attr(n,r);u=s.extractContents();o.appendChild(u);s.insertNode(o);i.removeAllRanges();if(n==\"style\")q(e(o),r);else q(e(o),false)}}else if(document.selection&&document.selection.createRange&&document.selection.type!=\"None\"){var a=document.selection.createRange();var f=a.htmlText;var l=\"<\"+t+\" \"+n+'=\"'+r+'\">'+f+\"</\"+t+\">\";document.selection.createRange().pasteHTML(l)}}function q(e,t){var n=I();n=n?n:e;if(n&&t==false){if(n.parent().is(\"[style]\"))n.attr(\"style\",n.parent().attr(\"style\"));if(n.is(\"[style]\"))n.find(\"*\").attr(\"style\",n.attr(\"style\"))}else if(e&&t&&e.is(\"[style]\")){var r=t.split(\";\");r=r[0].split(\":\");if(e.is(\"[style*=\"+r[0]+\"]\"))e.find(\"*\").css(r[0],r[1]);R(e)}}function R(t){if(t){var t=t[0];if(document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(t);n.select()}else if(window.getSelection){var r=window.getSelection();var n=document.createRange();if(t!=\"undefined\"&&t!=null){n.selectNodeContents(t);r.removeAllRanges();r.addRange(n);if(e(t).is(\":empty\")){e(t).append(\" \");R(e(t))}}}}}function U(){if(!p.data(\"sourceOpened\")){var t=I();var n=\"http://\";W(true);if(t){var r=t.prop(\"tagName\").toLowerCase();if(r==\"a\"&&t.is(\"[href]\")){n=t.attr(\"href\");t.attr(S,\"\")}else F(\"a\",S,\"\")}else y.val(n).focus();g.click(function(t){if(e(t.target).hasClass(u.css+\"_linktypetext\")||e(t.target).hasClass(u.css+\"_linktypearrow\"))X(true)});w.find(\"a\").click(function(){var t=e(this).attr(u.css+\"-linktype\");w.data(\"linktype\",t);E.find(\".\"+u.css+\"_linktypetext\").html(w.find(\"a:eq(\"+w.data(\"linktype\")+\")\").text());V(n);X()});V(n);y.focus().val(n).bind(\"keypress keyup\",function(e){if(e.keyCode==13){z(h.find(\"[\"+S+\"]\"));return false}});b.click(function(){z(h.find(\"[\"+S+\"]\"))})}else W(false)}function z(t){y.focus();R(t);t.removeAttr(S);if(w.data(\"linktype\")!=\"2\")j(\"createlink\",y.val());else{j(\"insertImage\",y.val());v.find(\"img\").each(function(){var t=e(this).prev(\"a\");var n=e(this).next(\"a\");if(t.length>0&&t.html()==\"\")t.remove();else if(n.length>0&&n.html()==\"\")n.remove()})}W();v.trigger(\"change\")}function W(e){Q(\"[\"+S+\"]:not([href])\");h.find(\"[\"+S+\"][href]\").removeAttr(S);if(e){p.data(\"linkOpened\",true);d.show()}else{p.data(\"linkOpened\",false);d.hide()}X()}function X(e){if(e)w.show();else w.hide()}function V(e){var t=w.data(\"linktype\");if(t==\"1\"&&(y.val()==\"http://\"||y.is(\"[value^=http://]\")||!y.is(\"[value^=mailto]\")))y.val(\"mailto:\");else if(t!=\"1\"&&!y.is(\"[value^=http://]\"))y.val(\"http://\");else y.val(e)}function J(t){if(!p.data(\"sourceOpened\")){if(t==\"fSize\")styleField=P;else if(t==\"colors\")styleField=H;K(styleField,true);styleField.find(\"a\").unbind(\"click\").click(function(){var n=e(this).attr(u.css+\"-styleval\");if(t==\"fSize\"){styleType=\"font-size\";n=n+u.funit}else if(t==\"colors\"){styleType=\"color\";n=\"rgb(\"+n+\")\"}var r=G(styleType);F(\"span\",\"style\",styleType+\":\"+n+\";\"+r);K(\"\",false);e(\".\"+u.css+\"_title\").remove();v.trigger(\"change\")})}else K(styleField,false);W(false)}function K(e,t){var n=\"\",r=[{d:\"fsizeOpened\",f:P},{d:\"cpallOpened\",f:H}];if(e!=\"\"){for(var i=0;i<r.length;i++){if(e==r[i][\"f\"])n=r[i]}}if(t){p.data(n[\"d\"],true);n[\"f\"].slideDown(100);for(var i=0;i<r.length;i++){if(n[\"d\"]!=r[i][\"d\"]){p.data(r[i][\"d\"],false);r[i][\"f\"].slideUp(100)}}}else{for(var i=0;i<r.length;i++){p.data(r[i][\"d\"],false);r[i][\"f\"].slideUp(100)}}}function Q(t){h.find(t).each(function(){e(this).before(e(this).html()).remove()})}function G(e){var t=I();if(t&&t.is(\"[style]\")&&t.css(e)!=\"\"){var n=t.css(e);t.css(e,\"\");var r=t.attr(\"style\");t.css(e,n);return r}else return\"\"}function Y(){Z(true);D.find(\"a\").click(function(){e(\"*\",this).click(function(e){e.preventDefault();return false});et(e(this).text());var t=e(this).attr(u.css+\"-formatval\");j(\"formatBlock\",\"<\"+t+\">\");Z(false)})}function Z(e){var t=e?true:false;t=e&&D.data(\"status\")?true:false;if(t||!e)D.data(\"status\",false).slideUp(200);else D.data(\"status\",true).slideDown(200)}function et(e){var t=D.closest(\".\"+u.css+\"_tool\").find(\".\"+u.css+\"_tool_label\").find(\".\"+u.css+\"_tool_text\");if(e.length>10)e=e.substr(0,7)+\"...\";t.html(e)}function tt(e){var t,n,r;t=e.replace(/\\n/gim,\"\").replace(/\\r/gim,\"\").replace(/\\t/gim,\"\").replace(/ /gim,\" \");n=[/\\<span(|\\s+.*?)><span(|\\s+.*?)>(.*?)<\\/span><\\/span>/gim,/<(\\w*[^p])\\s*[^\\/>]*>\\s*<\\/\\1>/gim,/\\<div(|\\s+.*?)>(.*?)\\<\\/div>/gim,/\\<strong(|\\s+.*?)>(.*?)\\<\\/strong>/gim,/\\<em(|\\s+.*?)>(.*?)\\<\\/em>/gim];r=[\"<span$2>$3</span>\",\"\",\"<p$1>$2</p>\",\"<b$1>$2</b>\",\"<i$1>$2</i>\"];for(A=0;A<5;A++){for(var i=0;i<n.length;i++){t=t.replace(n[i],r[i])}}if(!u.p)t=t.replace(/\\<p(|\\s+.*?)>(.*?)\\<\\/p>/ig,\"<br/>$2\");if(!u.br){n=[/\\<br>(.*?)/ig,/\\<br\\/>(.*?)/ig];r=[\"<p>$1</p>\",\"<p>$1</p>\"];for(var i=0;i<n.length;i++){t=t.replace(n[i],r[i])}}if(!u.p&&!u.br)t=t.replace(/\\<p>(.*?)\\<\\/p>/ig,\"<div>$1</div>\");return t}function nt(){var e=v.text()==\"\"&&v.html().length<12?\"\":v.html();l.val(tt(e))}function rt(){v.html(tt(l.val()))}function it(t){var n=false,r=I(),i;if(r){e.each(t,function(t,s){i=r.prop(\"tagName\").toLowerCase();if(i==s)n=true;else{r.parents().each(function(){i=e(this).prop(\"tagName\").toLowerCase();if(i==s)n=true})}});return n}else return false}function st(t){for(var n=0;n<f.length;n++){if(u[f[n].name]&&f[n].emphasis&&f[n].tag!=\"\")it(f[n].tag)?p.find(\".\"+u.css+\"_tool_\"+f[n].cls).addClass(m):e(\".\"+u.css+\"_tool_\"+f[n].cls).removeClass(m)}if(u.format&&e.isArray(u.formats)){var r=false;for(var i=0;i<u.formats.length;i++){var s=[];s[0]=u.formats[i][0];if(u.formats[i][0].length>0&&it(s)){et(u.formats[i][1]);r=true;break}}if(!r)et(u.formats[0][1])}K(\"\",false);Z(false)}if(!e(this).data(\"jqte\")||e(this).data(\"jqte\")==null||e(this).data(\"jqte\")==\"undefined\")e(this).data(\"jqte\",true);else e(this).data(\"jqte\",false);if(!u.status||!e(this).data(\"jqte\")){if(e(this).closest(\".\"+u.css).length>0){var t=e(this).closest(\".\"+u.css).find(\".\"+u.css+\"_editor\").html();var n=\"\";e(e(this)[0].attributes).each(function(){if(this.nodeName!=\"style\")n=n+\" \"+this.nodeName+'=\"'+this.nodeValue+'\"'});var r=e(this).is(\"[data-origin]\")&&e(this).attr(\"data-origin\")!=\"\"?e(this).attr(\"data-origin\"):\"textarea\";var i=\">\"+t;if(r==\"input\"||r==\"option\"){t=t.replace(/\"/g,\"&#34;\").replace(/'/g,\"&#39;\").replace(/</g,\"<\").replace(/>/g,\">\");i='value=\"'+t+'\">'}var o=e(this).clone();e(this).data(\"jqte\",false).closest(\".\"+u.css).before(o).remove();o.replaceWith(\"<\"+r+n+i+\"</\"+r+\">\")}return}var l=e(this);var r=e(this).prop(\"tagName\").toLowerCase();e(this).attr(\"data-origin\",r);var c=e(this).is(\"[value]\")||r==\"textarea\"?e(this).val():e(this).html();c=c.replace(/&#34;/g,'\"').replace(/&#39;/g,\"'\").replace(/</g,\"<\").replace(/>/g,\">\").replace(/&/g,\"&\");e(this).after('<div class=\"'+u.css+'\"></div>');var h=e(this).next(\".\"+u.css);h.html('<div class=\"'+u.css+\"_toolbar\"+'\" role=\"toolbar\" unselectable></div><div class=\"'+u.css+'_linkform\" style=\"display:none\" role=\"dialog\"></div><div class=\"'+u.css+\"_editor\"+'\"></div>');var p=h.find(\".\"+u.css+\"_toolbar\");var d=h.find(\".\"+u.css+\"_linkform\");var v=h.find(\".\"+u.css+\"_editor\");var m=u.css+\"_tool_depressed\";d.append('<div class=\"'+u.css+'_linktypeselect\" unselectable></div><input class=\"'+u.css+'_linkinput\" type=\"text/css\" value=\"\"><div class=\"'+u.css+'_linkbutton\" unselectable>'+u.button+'</div> <div style=\"height:1px;float:none;clear:both\"></div>');var g=d.find(\".\"+u.css+\"_linktypeselect\");var y=d.find(\".\"+u.css+\"_linkinput\");var b=d.find(\".\"+u.css+\"_linkbutton\");g.append('<div class=\"'+u.css+'_linktypeview\" unselectable></div><div class=\"'+u.css+'_linktypes\" role=\"menu\" unselectable></div>');var w=g.find(\".\"+u.css+\"_linktypes\");var E=g.find(\".\"+u.css+\"_linktypeview\");var S=u.css+\"-setlink\";v.after('<div class=\"'+u.css+\"_source \"+u.css+'_hiddenField\"></div>');var x=h.find(\".\"+u.css+\"_source\");l.appendTo(x);if(r!=\"textarea\"){var n=\"\";e(l[0].attributes).each(function(){if(this.nodeName!=\"type\"&&this.nodeName!=\"value\")n=n+\" \"+this.nodeName+'=\"'+this.nodeValue+'\"'});l.replaceWith(\"<textarea \"+n+\">\"+c+\"</textarea>\");l=x.find(\"textarea\")}v.attr(\"contenteditable\",\"true\").html(c);for(var T=0;T<f.length;T++){if(u[f[T].name]){var N=f[T].key.length>0?u.titletext[T].hotkey!=null&&u.titletext[T].hotkey!=\"undefined\"&&u.titletext[T].hotkey!=\"\"?\" (Ctrl+\"+u.titletext[T].hotkey+\")\":\"\":\"\";var C=u.titletext[T].title!=null&&u.titletext[T].title!=\"undefined\"&&u.titletext[T].title!=\"\"?u.titletext[T].title+N:\"\";p.append('<div class=\"'+u.css+\"_tool \"+u.css+\"_tool_\"+f[T].cls+'\" role=\"button\" data-tool=\"'+T+'\" unselectable><a class=\"'+u.css+'_tool_icon\" unselectable></a></div>');p.find(\".\"+u.css+\"_tool[data-tool=\"+T+\"]\").data({tag:f[T].tag,command:f[T].command,emphasis:f[T].emphasis,title:C});if(f[T].name==\"format\"&&e.isArray(u.formats)){var k=u.formats[0][1].length>0&&u.formats[0][1]!=\"undefined\"?u.formats[0][1]:\"\";p.find(\".\"+u.css+\"_tool_\"+f[T].cls).find(\".\"+u.css+\"_tool_icon\").replaceWith('<a class=\"'+u.css+'_tool_label\" unselectable><span class=\"'+u.css+'_tool_text\" unselectable>'+k+'</span><span class=\"'+u.css+'_tool_icon\" unselectable></span></a>');p.find(\".\"+u.css+\"_tool_\"+f[T].cls).append('<div class=\"'+u.css+'_formats\" unselectable></div>');for(var L=0;L<u.formats.length;L++){p.find(\".\"+u.css+\"_formats\").append(\"<a \"+u.css+'-formatval=\"'+u.formats[L][0]+'\" class=\"'+u.css+\"_format\"+\" \"+u.css+\"_format_\"+L+'\" role=\"menuitem\" unselectable>'+u.formats[L][1]+\"</a>\")}p.find(\".\"+u.css+\"_formats\").data(\"status\",false)}else if(f[T].name==\"fsize\"&&e.isArray(u.fsizes)){p.find(\".\"+u.css+\"_tool_\"+f[T].cls).append('<div class=\"'+u.css+'_fontsizes\" unselectable></div>');for(var L=0;L<u.fsizes.length;L++){p.find(\".\"+u.css+\"_fontsizes\").append(\"<a \"+u.css+'-styleval=\"'+u.fsizes[L]+'\" class=\"'+u.css+\"_fontsize\"+'\" style=\"font-size:'+u.fsizes[L]+u.funit+'\" role=\"menuitem\" unselectable>Abcdefgh...</a>')}}else if(f[T].name==\"color\"&&e.isArray(s)){p.find(\".\"+u.css+\"_tool_\"+f[T].cls).append('<div class=\"'+u.css+'_cpalette\" unselectable></div>');for(var A=0;A<s.length;A++){if(s[A]!=null)p.find(\".\"+u.css+\"_cpalette\").append(\"<a \"+u.css+'-styleval=\"'+s[A]+'\" class=\"'+u.css+\"_color\"+'\" style=\"background-color: rgb('+s[A]+')\" role=\"gridcell\" unselectable></a>');else p.find(\".\"+u.css+\"_cpalette\").append('<div class=\"'+u.css+\"_colorSeperator\"+'\"></div>')}}}}w.data(\"linktype\",\"0\");for(var T=0;T<3;T++){w.append(\"<a \"+u.css+'-linktype=\"'+T+'\" unselectable>'+u.linktypes[T]+\"</a>\");E.html('<div class=\"'+u.css+'_linktypearrow\" unselectable></div><div class=\"'+u.css+'_linktypetext\">'+w.find(\"a:eq(\"+w.data(\"linktype\")+\")\").text()+\"</div>\")}var O=\"\";if(/msie/.test(a))O=\"-ms-\";else if(/chrome/.test(a)||/safari/.test(a)||/yandex/.test(a))O=\"-webkit-\";else if(/mozilla/.test(a))O=\"-moz-\";else if(/opera/.test(a))O=\"-o-\";else if(/konqueror/.test(a))O=\"-khtml-\";else O=\"\";if(u.placeholder&&u.placeholder!=\"\"){h.prepend('<div class=\"'+u.css+'_placeholder\" unselectable><div class=\"'+u.css+'_placeholder_text\">'+u.placeholder+\"</div></div>\");var M=h.find(\".\"+u.css+\"_placeholder\");M.click(function(){v.focus()})}h.find(\"[unselectable]\").css(O+\"user-select\",\"none\").addClass(\"unselectable\").attr(\"unselectable\",\"on\").on(\"selectstart mousedown\",false);var _=p.find(\".\"+u.css+\"_tool\");var D=p.find(\".\"+u.css+\"_formats\");var P=p.find(\".\"+u.css+\"_fontsizes\");var H=p.find(\".\"+u.css+\"_cpalette\");var I=function(){var t,n;if(window.getSelection){n=getSelection();t=n.anchorNode}if(!t&&document.selection&&document.selection.createRange&&document.selection.type!=\"None\"){n=document.selection;var r=n.getRangeAt?n.getRangeAt(0):n.createRange();t=r.commonAncestorContainer?r.commonAncestorContainer:r.parentElement?r.parentElement():r.item(0)}if(t){return t.nodeName==\"#text\"?e(t.parentNode):e(t)}else return false};_.unbind(\"click\").click(function(t){if(e(this).data(\"command\")==\"displaysource\"&&!p.data(\"sourceOpened\")){p.find(\".\"+u.css+\"_tool\").addClass(u.css+\"_hiddenField\");e(this).removeClass(u.css+\"_hiddenField\");p.data(\"sourceOpened\",true);l.css(\"height\",v.outerHeight());x.removeClass(u.css+\"_hiddenField\");v.addClass(u.css+\"_hiddenField\");l.focus();W(false);K(\"\",false);Z();if(u.placeholder&&u.placeholder!=\"\")M.hide()}else{if(!p.data(\"sourceOpened\")){if(e(this).data(\"command\")==\"linkcreator\"){if(!p.data(\"linkOpened\"))U();else{W(false);Z(false)}}else if(e(this).data(\"command\")==\"formats\"){if(e(this).data(\"command\")==\"formats\"&&!e(t.target).hasClass(u.css+\"_format\"))Y();K(\"\",false);if(v.not(\":focus\"))v.focus()}else if(e(this).data(\"command\")==\"fSize\"||e(this).data(\"command\")==\"colors\"){if(e(this).data(\"command\")==\"fSize\"&&!e(t.target).hasClass(u.css+\"_fontsize\")||e(this).data(\"command\")==\"colors\"&&!e(t.target).hasClass(u.css+\"_color\"))J(e(this).data(\"command\"));Z(false);if(v.not(\":focus\"))v.focus()}else{if(v.not(\":focus\"))v.focus();j(e(this).data(\"command\"),null);K(\"\",false);Z(false);X();e(this).data(\"emphasis\")==true&&!e(this).hasClass(m)?e(this).addClass(m):e(this).removeClass(m);x.addClass(u.css+\"_hiddenField\");v.removeClass(u.css+\"_hiddenField\")}}else{p.data(\"sourceOpened\",false);p.find(\".\"+u.css+\"_tool\").removeClass(u.css+\"_hiddenField\");x.addClass(u.css+\"_hiddenField\");v.removeClass(u.css+\"_hiddenField\")}if(u.placeholder&&u.placeholder!=\"\")v.html()!=\"\"?M.hide():M.show()}v.trigger(\"change\")}).hover(function(t){if(u.title&&e(this).data(\"title\")!=\"\"&&(e(t.target).hasClass(u.css+\"_tool\")||e(t.target).hasClass(u.css+\"_tool_icon\"))){e(\".\"+u.css+\"_title\").remove();h.append('<div class=\"'+u.css+'_title\"><div class=\"'+u.css+'_titleArrow\"><div class=\"'+u.css+'_titleArrowIcon\"></div></div><div class=\"'+u.css+'_titleText\">'+e(this).data(\"title\")+\"</div></div>\");var n=e(\".\"+u.css+\"_title:first\");var r=n.find(\".\"+u.css+\"_titleArrowIcon\");var i=e(this).position();var s=i.left+e(this).outerWidth()-n.outerWidth()/2-e(this).outerWidth()/2;var o=i.top+e(this).outerHeight()+5;n.delay(400).css({top:o,left:s}).fadeIn(200)}},function(){e(\".\"+u.css+\"_title\").remove()});var ot=null;v.bind(\"keypress keyup keydown drop cut copy paste DOMCharacterDataModified DOMSubtreeModified\",function(){if(!p.data(\"sourceOpened\"))e(this).trigger(\"change\");X();if(e.isFunction(u.change))u.change();if(u.placeholder&&u.placeholder!=\"\")e(this).text()!=\"\"?M.hide():M.show()}).bind(\"change\",function(){if(!p.data(\"sourceOpened\")){clearTimeout(ot);ot=setTimeout(nt,10)}}).keydown(function(e){if(e.ctrlKey){for(var t=0;t<f.length;t++){if(u[f[t].name]&&e.keyCode==f[t].key.charCodeAt(0)){if(f[t].command!=\"\"&&f[t].command!=\"linkcreator\")j(f[t].command,null);else if(f[t].command==\"linkcreator\")U();return false}}}}).bind(\"mouseup keyup\",st).focus(function(){if(e.isFunction(u.focus))u.focus();h.addClass(u.css+\"_focused\");if(/opera/.test(a)){var t=document.createRange();t.selectNodeContents(v[0]);t.collapse(false);var n=window.getSelection();n.removeAllRanges();n.addRange(t)}}).focusout(function(){_.removeClass(m);K(\"\",false);Z(false);X();if(e.isFunction(u.blur))u.blur();h.removeClass(u.css+\"_focused\");if(e.isArray(u.formats))et(u.formats[0][1])});l.bind(\"keydown keyup\",function(){setTimeout(rt,0);e(this).height(e(this)[0].scrollHeight);if(e(this).val()==\"\")e(this).height(0)}).focus(function(){h.addClass(u.css+\"_focused\")}).focusout(function(){h.removeClass(u.css+\"_focused\")})})}})(jQuery)","<script type='text/javascript'>\n    $(function( ){\n\n        /**\n        General Information Modal JS Events\n        **/\n\n        /** Set up text editor options **/\n        var jqteOptions = {\n            format: false,\n            sub:    false,\n            sup:    false,\n            ol:     false,\n            ul:     false,\n            source: false,\n            link:   false,\n            class: \"jqteOverRide\", \n        };\n\n        var userId = \"\";\n\n        /** Check if userId is populated.  If so, populate Above variable **/\n        if( $(\"input[name=userId]\").length > 0 ){\n            userId = $(\"input[name=userId]\").val( );\n        }\n\n        orgId = $(\"input[name=orgId]\").val( );\n\n        /** Set up text editor for Brief Description **/\n        $(\"textarea[name=brief-description]\").jqte(jqteOptions);\n\n        /** Set up text editor for Mission Statement **/\n        $(\"textarea[name=mission-statement]\").jqte(jqteOptions);\n\n        /** Set up text editor for About Us **/\n        $(\"textarea[name=about-us]\").jqte(jqteOptions);    \n\n        /** Event for Saving General Info **/\n        $(\".save-general-info\").on(\"click\", function( ){\n\n\n            var missionStatement = $(\"textarea[name=mission-statement]\").val( )\n            \n            var aboutUs             = $(\"textarea[name=about-us]\").val( );\n\n            var briefDescription    = $(\"textarea[name=brief-description\").val( );\n\n            var orgName             = $(\"input[name=org-name\").val( );\n\n            $.ajax({\n                url: \"/organization/updateGeneralInfo\",\n                method: \"POST\",\n                data: encodeURI( \"missionStatement=\" + missionStatement + \"&aboutUs=\" + aboutUs + \"&briefDescription=\" + briefDescription + \"&orgName=\" + orgName + \"&orgId=\" + orgId),\n                dataType: \"json\",\n                beforeSend: function( ){\n\n                },\n                success: function( resp ){\n                    if( resp.status ){\n                        $(\".upload-generalInfo-success\").show( );\n\n                        $(\".org-header\").find('.header-content').find('.org-name').html( orgName );\n                        $(\".about-us\").find(\".mission-content\").html( missionStatement );\n                        $(\".about-us\").find(\".aboutUs-content\").html( aboutUs );\n                    }else{\n                        $(\".upload-generalInfo-error\").find(\".error-list\").html( resp.error );\n                        $(\".upload-generalInfo-error\").show( );\n                    }\n                }\n            });\n        });\n\n        $(\".generalInfoModal\").on(\"hide.bs.modal\", function( ){\n            $(\".upload-generalInfo-success\").hide( );\n            $(\".upload-generalInfo-error\").find(\".error-list\").html( \"\" );\n            $(\".upload-generalInfo-error\").hide( );\n        });\n\n\n        /**\n        Cause Modal\n        **/\n\n        var cause = {};\n        var subcauses = [];\n        var countries = [];\n        var xhr = null;\n        var action = \"\";\n        var causeChanges = false;\n\n        $(\"input[name=country-text]\").on(\"keyup\", function( ){\n\n            var parent = $(this).parent( );\n\n            var inputCoords = $(this).offset( );\n\n            var inputWidth  = $(this).width( ) + 24;\n\n            var inputHeight = $(this).height( ) + 12;\n\n            var tmpCountry = {};\n\n            if( $(this).val( ).length >= 3 ){\n                var query = $(this).val( );\n\n                if( xhr ){\n                    if( xhr.readyState != 4 ){\n                        xhr.abort( );\n                    }\n                }\n\n                xhr = $.ajax({\n                    url: \"/findCountry/\" + query,\n                    dataType: \"json\",\n                    beforeSend: function( ){\n                        $(\"input[name=country-text]\").css({\n                           background: \"url(/images/loading1.gif) top right no-repeat\",\n                           backgroundSize: \"contain\" \n                        });\n                    },\n                    success: function( resp ){\n\n                        $(\"input[name=country-text]\").css(\"background\", \"\");\n\n                        var countryList = \"<div style='top: \" + inputHeight + \"px; width: \" + inputWidth + \"px;' class='country-search-container'>\";\n\n                        for( x in resp ){\n                            countryList += \"<div class='country-selection' data-country-id='\" + resp[x].country_id + \"'>\" + resp[x].country_name + \"</div>\";\n                        }\n                        countryList += \"</div>\";\n\n                        parent.append( countryList );\n                    }\n                });\n            }\n        });\n\n        $(\"textarea[name=cause-description-textarea]\").jqte(jqteOptions);    \n\n\n        //event for clicking on a cause (adding)\n        $(\"input[name=cause-option]\").on(\"change\", function( ){\n\n            var causeId = $(this).prop(\"id\").split(\"-\");\n\n            causeId = causeId[2];\n\n            if( $(\".currentCauseList\").find(\"div[data-org-cause=\" + causeId + \"]\").length > 0 ){\n                $(\".currentCauseList\").find(\"div[data-org-cause=\" + causeId + \"]\").trigger(\"click\");\n\n            }else{\n\n\n                cause = {};\n                subcauses = [];\n                countries = [];\n                action = \"add\";\n\n                clearSubCauses( );\n\n                clearOtherCauses( causeId );\n\n                clearCountries( );\n\n                cause.cause_id = causeId;\n\n                $(\".availableSubCauseList\").find(\"label\").hide( );\n\n                $(\".availableSubCauseList\").find(\"label[data-parent-id=\" + causeId + \"]\").show( );\n\n                $(\".cause-action\").html( \"Add New Cause\").addClass(\"btn-primary\").removeClass('btn-success');\n\n                $(\"textarea[name=cause-description-textarea]\").jqteVal(\"\");\n\n                if( $(\".subCauseWrapper\").hasClass(\"hidden\") ){\n                    $(\".subCauseWrapper\").removeClass( \"hidden\" );\n                }    \n            }\n        });\n\n        //event for clicking on an already selected Cause ( Updating )\n        $(\".org-cause\").on({\n            click: function( ){\n\n                cause = {};\n                subcauses = [];\n                countries = [];\n                action = \"update\";\n\n                $(\".main-cause-heading\").html( \"Update \" + $(this).find(\".cause-title\").html( ) );\n\n                clearSubCauses( );\n\n                var causeId = $(this).data(\"org-cause\");\n                var orgCauseId = $(this).data(\"org-cause-id\");\n\n                cause.cause_id = causeId;\n                cause.org_cause_id = orgCauseId;\n\n                clearOtherCauses( causeId );\n\n                clearCountries( );\n\n                $(\".availableCauseList label\").each( function( ){\n                    \n                    if( $(this).find(\"input[type=radio]\").prop(\"id\") == \"cause-option-\" + causeId ){\n\n                        $(this).find(\"input[type=radio]\").prop(\"checked\", true);\n\n                        $(this).find(\"input[type=radio]\").parent( ).addClass('active');\n\n                        $(\".availableSubCauseList\").find(\"label[data-parent-id=\" + causeId + \"]\").show( );\n\n                        if( $(\".subCauseWrapper\").hasClass(\"hidden\") ){\n                            $(\".subCauseWrapper\").removeClass( \"hidden\" );\n                        }\n\n                        $(\"textarea[name=cause-description-textarea]\").jqteVal( $(\".currentCauseList\").find(\".org-cause[data-org-cause=\" + causeId + \"]\").find(\".cause-text\").html( ) );\n\n                        $(\".cause-action\").html( \"Update Cause Data \").addClass(\"btn-success\").removeClass('btn-primary');\n                    }\n                });\n\n                $(this).find(\".sub-cause-list span\").each( function( ){\n\n                    var subCauseId = $(this).data('subcause-id');\n\n                    $(\".availableSubCauseList label\").find(\"input[type=checkbox][id=sub-cause-option-\" + subCauseId + \"]\").prop(\"checked\", true);\n\n                    $(\".availableSubCauseList label\").find(\"input[type=checkbox][id=sub-cause-option-\" + subCauseId + \"]\").parent( ).addClass('active');\n                });\n\n                $(this).find(\".cause-country-list span\").each( function( ){\n\n\n                    var id = $(this).data('cause-country');\n                    var name = $(this).html( );\n\n                     countryPill = \"<div class='country-pill'><button class='btn btn-primary' type='button' data-country-id='\" + id + \"' data-country-name='\" + name + \"'>\" + name + \"<span class='badge'>X</span></div>\";\n\n                     countries.push( {id: id, name: name});\n\n                     $(\".country-list\").append( countryPill ).show( ); \n                });\n            },\n            mouseover: function( ){\n                $(this).find(\".cause-remove-button\").removeClass('hidden');\n            },\n            mouseleave: function( ){\n                $(this).find(\".cause-remove-button\").addClass('hidden');\n            }\n        });\n\n        $(\".cause-remove-button\").on(\"click\", function( ){\n\n            var _token = $(\"input[name=_token]\").val( );\n\n            $.ajax({\n                url: \"/organization/removeCause\",\n                method: \"POST\",\n                data: \"causeId=\" + $(this).find(\"button\").data(\"cause-id\") + \"&orgId=\" + orgId + \"&_token=\" + _token,\n                dataType: \"json\",\n                sucess: function( resp ){\n\n                    if( resp.status ){\n\n                        causeChanges = true;\n                        $(\".org-cause[data-org-cause]\").remove( );\n\n                        //clear causes\n                        clearOtherCauses( 0 );\n                        //clear subcauses\n                        clearSubCauses( );\n                        //clear countries\n                        clearCountries( );\n                        //clear textarea\n                        $(\"textarea[name=cause-description-textarea]\").jqteVal( \"\" );\n                        //update page causes\n\n                    }\n                }\n            });\n        });\n\n        //Event for clicking a sub-cause\n        $(\"input[name=sub-cause-option]\").on(\"change\", function( ){\n\n            if( $(this).is(\":checked\") ){\n                var subCauseId = $(this).prop(\"id\").split(\"-\")[3];\n\n                subcauses.push( subCauseId );\n            }else{\n                var index = subcauses.splice( subcauses.indexOf( subCauseId ), 1);\n            }\n        });\n\n        //event for clicking on a country that is in the country list\n        $(document).on(\"click\", \".country-selection\", function( ){\n\n            tmpCountry = {};\n\n            tmpCountry = {\"name\": $(this).text( ), \"id\": $(this).data('country-id')};\n            \n            $(\".country-search-container\").remove( );\n\n            $(\"input[name=country-text]\").val( tmpCountry.name );\n        });\n\n        //Add the country chosen from above event\n        $(\"#add-country\").on(\"click\", function( ){\n\n            var countryPill = \"<div class='country-pill'>\";\n\n            countries.push( tmpCountry ); \n\n            countryPill += \"<button class='btn btn-primary' type='button' data-country-id='\" + tmpCountry.id + \"' data-country-name='\" + tmpCountry.name + \"'>\" + tmpCountry.name + \"<span class='badge remove-country'>X</span></div>\";\n\n            tmpCountry = {};\n\n            $(\"input[name=country-text]\").val( \"\" );\n\n            $(\".country-list\").append( countryPill ).show( );    \n            \n        });\n\n        $(\".cause-action\").on(\"click\", function( ){\n\n            var _token = $(\"input[name=_token\").val( );\n\n            cause.sub_causes = subcauses;\n\n            cause.countries = countries;\n\n            cause.desc = $(\"textarea[name=cause-description-textarea]\").val( );\n\n            cause.action = action;\n\n            cause.orgId  = orgId;\n\n            cause._token = _token;\n\n            var url = \"\";\n\n            if( action == \"add\" ){\n                url = \"/organization/addCause\";\n            }else{\n\n                url = \"/organization/updateCause\";\n            }\n\n            $.ajax({\n                url: url,\n                method: 'POST',\n                data: cause,\n                dataType: 'json',\n                beforeSend: function( ){\n\n                },\n                success: function( resp ){\n\n                    if( resp.status ){\n\n                        causeChanges = true;\n\n                        var subCauseList = \"\";\n                        var countryList = \"\";\n\n                        if( cause.action == \"update\" ){\n                            //update 'selected causes'\n                            $(\".availableSubCauseList label\").each( function( ){\n\n                                if( $(this).find(\"input[type=checkbox]\").is(\":checked\") ){\n\n                                    var subCauseId = $(this).find(\"input[type=checkbox]\").prop(\"id\").split(\"-\")[3];\n\n                                    if( subCauseList == \"\" ){\n                                        subCauseList = \"<span class='org-sub-cause' data-subcause-id='\" + subCauseId + \"'>\" + $(this).find(\".cause-name\").html( ) + \"</span>\";\n                                    }else{\n                                        subCauseList += \", \" + \"<span class='org-sub-cause' data-subcause-id='\" + subCauseId + \"'>\" + $(this).find(\".cause-name\").html( ) + \"</span>\";\n                                    }\n                                }\n                            });\n\n                            $(\".org-cause[data-org-cause=\" + cause.cause_id + \"]\")\n                            .find(\".sub-cause-list\")\n                            .html( subCauseList );\n\n\n                            $(\".country-list .country-pill\").each(function( ){\n\n                                if( countryList == \"\" ){\n                                    countryList = \"<span class='org-cause-country' data-cause-country='\" + $(this).find(\"button\").data(\"country-id\") + \"'>\" + $(this).find(\"button\").data(\"country-name\") + \"</span>\";\n                                }else{\n                                    countryList += \"<span class='org-cause-country' data-cause-country='\" + $(this).find(\"button\").data(\"country-id\") + \"'>,\" + $(this).find(\"button\").data(\"country-name\") + \"</span>\";\n                                }\n                            });\n\n                            $(\".org-cause[data-org-cause=\" + cause.cause_id + \"]\")\n                            .find(\".cause-country-list\")\n                            .html( countryList );\n\n                            \n                        }else{\n\n                            var $causeEl = $(\".availableCauseList label\").find( \"input[type=radio]:checked\").parent( );\n\n                            var causeName = $causeEl.find(\".cause-name\").text( );\n                            var causeIcon = $causeEl\n                                            .find(\".cause-icon\")\n                                            .find(\"i\")\n                                            .prop(\"class\")\n                                            .split(\" \")[0];\n\n                            $(\".availableSubCauseList label\").each( function( ){\n\n                                if( $(this).find(\"input[type=checkbox]\").is(\":checked\") ){\n\n                                    var subCauseId = $(this).find(\"input[type=checkbox]\").prop(\"id\").split(\"-\")[3];\n\n                                    if( subCauseList == \"\" ){\n                                        subCauseList = \"<span class='org-sub-cause' data-subcause-id='\" + subCauseId + \"'>\" + $(this).find(\".cause-name\").html( ) + \"</span>\";\n                                    }else{\n                                        subCauseList += \", \" + \"<span class='org-sub-cause' data-subcause-id='\" + subCauseId + \"'>\" + $(this).find(\".cause-name\").html( ) + \"</span>\";\n                                    }\n                                }\n                            });\n\n                            $(\".country-list .country-pill\").each(function( ){\n\n                                if( countryList == \"\" ){\n                                    countryList = \"<span class='org-cause-country' data-cause-country='\" + $(this).find(\"button\").data(\"country-id\") + \"'>\" + $(this).find(\"button\").data(\"country-name\") + \"</span>\";\n                                }else{\n                                    countryList += \"<span class='org-cause-country' data-cause-country='\" + $(this).find(\"button\").data(\"country-id\") + \"'>,\" + $(this).find(\"button\").data(\"country-name\") + \"</span>\";\n                                }\n                            });\n\n                            var newCause = \"<div class='col-lg-3 col-md-3 col-sm-3 org-cause' data-org-cause='\" + cause.cause_id + \"' data-org-cause-id='\" + resp.org_cse_id + \"'>\";\n\n                            newCause += \"<div class='row'>\";\n                            newCause += \"   <div class='col-lg-3 col-md-3 col-sm-3'>\";\n                            newCause += \"       <i class='\" + causeIcon + \" pwi-icon-2em'></i>\";\n                            newCause += \"   </div>\";\n                            newCause += \"   <div class='col-lg-9 col-lg-9 col-sm-9' >\";\n                            newCause += \"       <div class='cause-title' >\" + causeName + \"</div>\";\n                            newCause += \"       <div class='sub-cause-list'>\" + subCauseList + \"</div>\";\n                            newCause += \"       <div class='cause-country-list'>\" + countryList + \"</div>\";\n                                \n                                            \n                            newCause += \"    </div>\"\n                            newCause += \"</div>\";\n                            newCause += \"<div class='hidden cause-remove-button text-center row'>\";\n                            newCause += \"   <div class='col-lg-12 col-md-12 col-sm-12'>\";\n                            newCause += \"       <button type='button' class='btn btn-danger padding-2 margin-top-2' data-toggle='button' aria-pressed='false' autocomplete='off' data-cause-id='\" + cause.cause_id + \"'>Remove Cause</button>\";\n                            newCause += \"   </div>\";\n                            newCause += \"</div>\";\n                            newCause += \" <div class='cause-text' id='org-cause-description'>\" + cause.desc +\"</div>\"\n                            newCause += \"</div>\";\n\n                            $(\".currentCauseList\").append( newCause );\n                        }\n\n                        //clear causes\n                        clearOtherCauses( 0 );\n                        //clear subcauses\n                        clearSubCauses( );\n                        //clear countries\n                        clearCountries( );\n                        //clear textarea\n                        $(\"textarea[name=cause-description-textarea]\").jqteVal( \"\" );\n\n                        cause = {};\n                        subcauses = [];\n                        countries = [];\n                    }else{\n\n                    }\n                }\n            });\n        });\n\n        $(\"#orgCauseModal\").on(\"hidden.bs.modal\", function( ){\n\n            if( causeChanges ){\n                location.reload( );\n            }else{\n                //clear causes\n                clearOtherCauses( 0 );\n                //clear subcauses\n                clearSubCauses( );\n                //clear countries\n                clearCountries( );\n                //clear textarea\n                $(\"textarea[name=cause-description-textarea]\").jqteVal( \"\" );\n\n                cause       = {};   \n                subcauses   = [];\n                countries   = [];\n            }\n        });\n\n        $(document).on(\"click\", \".remove-country\", function(){\n\n            var countryId = $(this).parent( ).data('country-id');\n            $(this).parent( ).parent( ).remove( );\n\n            for( x in countries ){\n                if( countries[x][\"id\"] == countryId ){\n                    countries.splice(x, 1);\n                }\n            }\n\n            if( countries.length == 0 ){\n                $(\".country-list\").hide( );\n            }\n        });\n\n        /** End Cause Modal **/\n\n        /** Begin Contact Info Modal **/\n\n        $(\".save-contact-info\").on(\"click\", function( ){\n\n            var queryString = $(\"form[name=contact-form-update]\").serialize( );\n\n            $.ajax({\n                url: \"/organization/updateContactInfo\",\n                method: \"POST\",\n                data: queryString,\n                dataType: \"json\",\n                beforeSend: function( ){\n\n                },\n                success: function( resp ){\n\n                    if( resp.status ){\n\n                        var $form = $(\"form[name=contact-form-update]\");\n\n                        var orgWebUrl = $form.find(\"input[name=org_web_url]\").val( );\n\n                        if( orgWebUrl.length > 30 ){\n\n                            $(\"#orgWebUrl\").find(\"a\").html( orgWebUrl.substring( 0, 29 ) + \"...\");\n                        }else{\n                            $(\"#orgWebUrl\").find(\"a\").html( orgWebUrl );\n                        }\n\n                        if( $(\"#orgWebUrl\").parent( ).hasClass('hidden') && orgWebUrl != \"\" ){\n                            $(\"#orgWebUrl\").parent( ).removeClass('hidden');\n                        }else if( ( ! $(\"#orgWebUrl\").parent( ).hasClass('hidden') ) && orgWebUrl == \"\" )  {\n                            $(\"#orgWebUrl\").parent( ).addClass('hidden');\n                        }\n\n                        $(\"#orgPhone\").html( $form.find(\"input[name=org_phone]\").val( ) );\n\n                        if( $(\"#orgPhone\").parent( ).hasClass('hidden') && $form.find(\"input[name=org_phone]\").val( ) != \"\" ){\n                            $(\"#orgPhone\").parent( ).removeClass( 'hidden' );\n                        }else if( ( ! $(\"#orgPhone\").parent( ).hasClass('hidden') ) && $form.find(\"input[name=org_phone]\").val( ) == \"\" ){\n                            $(\"#orgPhone\").parent( ).addClass(\"hidden\");\n                        } \n\n                        $(\"#orgEmail\").html( $form.find(\"input[name=org_email]\").val( ) );\n\n                        var address = $form.find(\"input[name=org_address1]\").val( ) + \"<br >\";\n\n                        if( $form.find(\"input[name=org_address2]\").val( ) != \"\" ){\n                            address += $form.find(\"input[name=org_address2]\").val( ) + \"<br />\";\n                        }\n\n                        address += $form.find(\"input[name=org_city]\").val( ) + \", \" + resp.state + \" \" + $form.find(\"input[name=org_zip]\").val( );\n\n                        $(\"#orgStreetAddress\").html( address );\n\n                        $(\".upload-contactInfo-success\").show( );\n                    }else{\n                        $(\".upload-contactInfo-error\").show( );\n                    }\n                }\n            });\n        });\n\n        $(\".contactInfoModal\").on(\"hide.bs.modal\", function( ){\n            $(\".upload-contactInfo-success\").show( );\n            $(\".upload-contactInfo-error\").show( );\n        });\n\n        /** End Contact Info **/\n        /** Photo/Video Upload **/\n\n        $hasChangedMedia = false;\n\n        $(\".droppable-box\").on(\"drag dragstart dragend dragover dragenter dragleave drop\", function( e ){\n            e.preventDefault( );\n            e.stopPropagation( );\n        })\n        .on('drop', function( e ){\n            var droppedFile = e.originalEvent.dataTransfer.files;\n\n            var form_data = new FormData();\n            form_data.append('file', droppedFile[0]);\n            form_data.append('type', 'photo');\n            form_data.append('id', orgId);\n            form_data.append('userId', userId);\n\n            var token = $(document).find(\"input[name=_token]\").val( );\n\n            form_data.append('_token', token);\n            \n            $.ajax({\n                url: \"/organization/uploadimage\",\n                method: \"POST\",\n                data: form_data,\n                contentType: false,\n                cache: false,\n                processData: false,\n                beforeSend: function( ){\n                    $(\".upload-photo-info\").fadeIn( );\n                    $(\".upload-photo-success\").hide( );\n                    $(\".upload-photo-error\").hide( );\n                },\n                success: function( resp ){\n\n                    hasChangedMedia = true;\n\n                    $(\".upload-photo-info\").fadeOut( );\n                    \n                    if( resp.status ){\n                        \n                        $(\".upload-photo-success\").fadeIn( );\n\n                        var newElement = \"<div class='box' style='background: url(\" + resp.url + \") top left no-repeat; background-size: cover;'></div>\";\n\n                        $(\".photo_list\").find(\"div:first\").after( newElement );\n\n                        setTimeout( function( ){\n                            $(\".upload-photo-success\").fadeOut( );\n                        }, 3000);\n\n                    }else{\n                        \n                        $(\".upload-photo-error\").fadeIn( );\n\n                        setTimeout( function( ){\n                            $(\".upload-photo-error\").fadeOut( );\n                        }, 3000);\n                    }\n\n                }\n            });\n        }).on('click', function( e ){\n            $(\"#orgPic\").trigger(\"click\");\n        });\n\n        $(\"#orgPic\").on(\"change\", function( ){\n\n            var file_data = this.files[0];\n            var form_data = new FormData();\n            form_data.append('file', file_data);\n            form_data.append('type', 'photo');\n            form_data.append('id', orgId);\n            form_data.append('userId', userId);\n            \n            var token = $(document).find(\"input[name=_token]\").val( );\n\n            form_data.append('_token', token);\n\n            $.ajax({\n                url: \"/organization/uploadimage\",\n                method: \"POST\",\n                data: form_data,\n                contentType: false,\n                cache: false,\n                processData: false,\n                beforeSend: function( ){\n                    $(\".upload-photo-info\").fadeIn( );\n                    $(\".upload-photo-success\").hide( );\n                    $(\".upload-photo-error\").hide( );\n                },\n                success: function( resp ){\n\n                    hasChangedMedia = true;\n\n                    $(\".upload-photo-info\").fadeOut( );\n\n                    if( resp.status ){\n                        \n                        $(\".upload-photo-success\").fadeIn( );\n\n                        var newElement = \"<div class='box' style='background: url(\" + resp.url + \") top left no-repeat; background-size: cover;'></div>\";\n\n                        $(\".photo_list\").find(\"div:first\").after( newElement );\n\n                        setTimeout( function( ){\n                            $(\".upload-photo-success\").fadeOut( );\n                        }, 3000);\n\n                    }else{\n                        \n                        $(\".upload-photo-error\").fadeIn( );\n\n                        setTimeout( function( ){\n                            $(\".upload-photo-error\").fadeOut( );\n                        }, 3000);\n                    }\n                },\n                error: function( ){\n                    $(\".upload-photo-error\").fadeIn( );\n\n                    setTimeout( function( ){\n                        $(\".upload-photo-error\").fadeOut( );\n                    }, 3000);\n                }\n            });\n        });\n\n        $(\".save-video\").on(\"click\", function( ){\n\n            $.ajax({\n                url: \"/organization/saveVideo\",\n                method: \"POST\",\n                data: \"videoUrl=\" + $(\"input[name=video_url]\").val( ) + \"&_token=\" + $(document).find(\"input[name=_token]\").val( ) + \"&orgId=\" + orgId,\n                dataType: \"json\",\n                beforeSend: function( ){\n                    $(\".upload-video-info\").show( );\n                },\n                success: function( resp ){\n                    \n                    $(\".upload-video-info\").hide( );\n\n                    if( resp.status ){\n\n                        hasChangedMedia = true;\n\n                        $(\".video-list div:first\").prepend(\"<div class='box' style='background: url( \" + resp.img + \" ) top left no-repeat; background-size: cover;'></div>\");\n\n                        $(\".upload-video-success\").find(\".msg\").html(\" Your video has been successfully uploaded.\").fadeIn );\n\n                        $(\"input[name=video_url]\").val( \"\" );\n\n                        setTimeout( function( ){\n                            $(\".upload-video-success\").fadeOut( );\n                        }, 3000);\n\n                    }else{\n\n                        $(\".upload-video-error\").find(\".msg\").append( \"<br />\" + resp.msg );\n                        $(\".upload-photo-error\").fadeIn( );\n\n                        setTimeout( function( ){\n                            $(\".upload-video-error\").find(\".msg\").html( \"There was an error saving your video\" );\n                            $(\".upload-photo-error\").fadeOut( );\n                        }, 5000);\n                    }\n                }\n            });\n        });\n\n        $(\".box\").on({\n            mouseenter: function( ){\n                $(this).find(\".overlay\").show( );\n            },\n            mouseleave: function( ){\n                $(this).find(\".overlay\").hide( );\n            }\n        });\n\n        $(\".remove-photo\").on(\"click\", function( ){\n\n            var $parentBox = $(this).parent( ).parent( );\n\n            var fileId = $(this).data('file-id');\n\n            $.ajax({\n                url: \"/organization/removePhoto\",\n                method: \"POST\",\n                data: \"fileId=\" + fileId + \"&orgId=\" + orgId + \"&_token=\" + $(document).find(\"input[name=_token]\").val( ),\n                dataType: \"json\",\n                success: function( resp ){\n\n                    hasChangedMedia = true;\n\n                    if( resp.status ){\n                        $parentBox.remove( );    \n                    }else{\n                        $(\".upload-photo-error\").find(\".msg\").html(\"There was an error deleting the photo.\");\n                        $(\".upload-photo-error\").fadeIn( );\n\n                        setTimeout( function( ){\n                            $(\".upload-photo-error\").find(\".msg\").html(\"There was an error uploading your photo.\");\n                            $(\".upload-photo-error\").fadeOut( ) ;\n                        }, 3000);\n                    }\n                }\n            });\n        });\n\n        $(\"#mediaModal\").on(\"hide.bs.modal\", function( ){\n\n            if( hasChangedMedia ){\n                location.reload( );    \n            }\n        });\n\n        $(\"#mediaModal\").on(\"show.bs.modal\", function( e ){\n\n            console.log( e );\n            e.preventDefault( );\n            e.stopPropagation( );\n\n        });\n\n\n        function clearSubCauses( ){\n            $(\".availableSubCauseList label\").each( function( ){\n                $(this).find(\"input[type=radio]\").prop(\"checked\", false);\n                $(this).removeClass(\"active\");\n                $(this).hide( );\n            });\n        }\n\n        function clearOtherCauses( id ){\n            $(\".availableCauseList label\").each( function( ){\n\n                if( id > 0 ){\n\n                    var thisCauseId = $(this).find(\"input[type=radio]\").prop(\"id\").split(\"-\")[2];\n\n                    if( thisCauseId != id ){\n                        $(this).find(\"input[type=radio]\").prop(\"checked\", false);\n                        $(this).find(\"input[type=radio]\").parent( ).removeClass('active');\n                    }\n                }else{\n                    $(this).find(\"input[type=radio]\").prop(\"checked\", false);\n                    $(this).find(\"input[type=radio]\").parent( ).removeClass('active');\n                }\n            });\n        }\n\n        function clearCountries( ){\n            $(\".country-list\").html(\"\").hide( );\n        }\n    });\n</script>"],"sourceRoot":"/source/"}