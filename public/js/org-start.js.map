{"version":3,"sources":["org-start.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"org-start.js","sourcesContent":["$(function( ){\n    \n    var lastInfoWindowOpened;\n    var orgId = $(\"input[name=orgId]\").val( );\n    var userId = \"\";\n\n    if( $(\"input[name=userId]\").length > 0 ){\n    \tuserId = $(\"input[name=userId]\").val( );\n    }\n    \n    setHeight( );\n    \n    /* Trigger Country Causes to Toggle */\n    \n    $(\".cause-name\").on(\"click\", function( ){\n        \n        var cause = $(this).data(\"cause\");\n        \n        $(\".cause-name\").removeClass(\"active\");\n        \n        $(this).addClass(\"active\");\n        \n        $(\".cause-description\").addClass(\"hidden\");\n        \n        $(\".\" + cause + \"-description\").removeClass(\"hidden\");\n        \n    });\n    \n\t/* End Country Causes to Toggle */\n    \n    /* Impact Areas Map */\n    \n    var bounds      = new google.maps.LatLngBounds( );\n    var infowindow  = new google.maps.InfoWindow( );\n    var markers     = new Array( );\n    var infoWindows = new Array( );\n    \n    var countries = new Array( );\n    \n\tif( $(\".area-list .row\").length > 0 ){\n\t    \n\t    $(\".area-list .row\").each( function( ){\n\t        \n\t        $obj = new Object( );\n\t        \n\t        $obj.name = $(this).find(\".country-name\").text( );\n\t        \n\t        $obj.lat = parseFloat( $(this).find(\"input[name=lat]\").val( ) );\n\t        $obj.lng = parseFloat( $(this).find(\"input[name=lng]\").val( ) );\n\t        \n\t        $obj.alias = $(this).find(\"input[name=alias]\").val( );\n\t        \n\t        countries.push( $obj );\n\t        \n\t    });\n\t    \n\t    var mapCanvas = document.getElementById('map');\n\t    \n\t\n\t    var mapOptions = {\n\t      zoom: 3,\n\t      center: new google.maps.LatLng( countries[0].lat, countries[0].lng), \n\t      mapTypeId: google.maps.MapTypeId.ROADMAP,\n\t      styles: styles,\n\t      animatedZoom: true\n\t    }\n\t    \n\t    var map = new google.maps.Map(mapCanvas, mapOptions);\n\t    \n\t    map.addListener(\"mouseover\", function( ){\n\t\t        \n\t       map.setOptions({disableDefaultUI: false});\n\t    });\n\t\n\t    map.addListener(\"mouseout\", function( ){\n\t\n\t       map.setOptions({disableDefaultUI: true\t});\n\t    });\n\t    \n\t    if( countries.length == 1 ){\n\t\t    \n\t\t    var iWindow = new google.maps.InfoWindow({\n\t\t               content: \"<b>\" + countries[0].name + \"</b><br /><a href='/country/\" + countries[0].alias + \"'>View Country</a>\"});\n\t\t               \n\t\t    var marker = new google.maps.Marker({\n\t\t                position: {lat: countries[0].lat, lng: countries[0].lng},\n\t\t                map: map,\n\t\t                animation: google.maps.Animation.DROP,\n\t\t                title: countries[0].name,\n\t\t                infowindow: iWindow\n\t\t            });\n\t\t            \n\t\t    google.maps.event.addListener(marker, \"click\", function( ){\n\t\t        this.infowindow.open(map, this);\n\t\t    });\n\n\t\t    \n\t    }else{\n\t\t    for( x in countries ){\n\t        \n\t\t        var iWindow =  new google.maps.InfoWindow({\n\t\t               content: \"<b>\" + countries[x].name + \"</b><br /><a href='/country/\" + countries[x].alias + \"'>View Country</a>\"\n\t\t            });\n\t\t        \n\t\t        markers.push( new google.maps.Marker({\n\t\t                position: {lat: countries[x].lat, lng: countries[x].lng},\n\t\t                map: map,\n\t\t                animation: google.maps.Animation.DROP,\n\t\t                title: countries[x].name,\n\t\t                infowindow: iWindow\n\t\t            })\n\t\t        );\n\t\t    }\n\t\t    \n\t\t    for( i in markers ){\n\t\t            \n\t\t        google.maps.event.addListener(markers[i], \"click\", function( ){\n\t\t            \n\t\t            if( typeof lastInfoWindowOpened != \"undefined\"){\n\t\t                lastInfoWindowOpened.close( );\n\t\t            }\n\t\t            \n\t\t            lastInfoWindowOpened = this.infowindow;\n\t\t            \n\t\t            this.infowindow.open(map, this);\n\t\t        });\n\t\t        \n\t\t        \n\t\t        bounds.extend( markers[i].position );\n\t\t        \n\t\t        map.fitBounds( bounds );\n\t\t        \n\t\t\t\tinitialZoom = 1;\n\t\t    }\n\t    }\n\t}\n    /*\n\t*    \n\t* Set up $.colorbox for videos and photos    \n\t*    \n\t*/\n\t\n\tif( $(\".org-photos\").length > 0 ){\n\t\t$(\"a.org-photos\").colorbox({rel: 'group0', scalePhotos: true, maxWidth: \"100%\"} );\n\t}\n\t\n\tif( $(\".org-videos\").length > 0 ){\n\t\t$(\"a.org-videos\").colorbox({iframe: true, innerWidth:640, innerHeight:390});\n\t}\n    \n    /*\n    *\n    * Begin Checkout Process for Current Organization\n    *\n    */\n    \n    \n    var $checkout   = $(\"#organizationCheckout\");\n    var $container  = $(\"#organizationCheckout\").find(\".checkout\");\n    var $donation   = $container.find(\".donation\");\n\n    var org_alias   = \"\";\n    \n    //Action for triggering the org donation lightbox\n    $(\".donate-button\").on({\n        mouseover: function( ){\n            $(this).css('cursor','pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');    \n        },\n        click: function( ){\n            \n            org_alias = $(this).data('alias');\n\n            $checkout.css(\"display\",\"table\");\n        }\n    });\n    \n    //Close out organization checkout\n    $(\".exit-organization-checkout\").on({\n        \n        mouseover: function( ){\n            $(this).css('cursor', 'pointer');\n        },\n        mouseleave: function( ){\n            $(this).css('cursor', 'auto');\n        },\n        click: function( ){\n        \n            //clear any selected incentive\n            $donation.find(\"input\").val( \"\" );\n            \n            //clear all form fields on the checkout page\n            $(\"form[name=donationCheckoutForm]\")[0].reset( );\n\n            $(\"#organizationCheckout\").hide( );\n\n             //$('.fund-project').prop('disabled', 'false');\n        }\n    });\n    \n    /*\n    *\n    * Step 1 ( Donation Amount / Login ) actions \n    *\n    */\n    \n    $donation.find(\".continue\").on(\"click\", function( ){\n        \n        var amount = $donation.find(\"input[name=donationAmt]\").val( );\n        \n        var hasErrors = false;\n        \n        if( isNaN( parseInt( amount ) ) || isNaN( parseFloat( amount  ) ) ){\n           hasErrors = true;\n        }\n        \n        if( ! hasErrors ){\n            \n            $.ajax({\n                url: \"/storeDonation\",\n                method: \"POST\",\n                data: {amount: parseFloat(amount.replace(\",\",\"\")).formatMoney(2, ',', '.'), type: \"organization\"},\n                dataType: \"json\",\n                success: function( resp ){\n                    location.href = '/organization/' + org_alias + '/donation';\n                }\n            });\n        }\n    });\n\n    $(\".upload-icon-cover\").click( function( e ){\n    \t$(\"#imgCoverPic\").trigger(\"click\");\n    });\n\n    $(\".upload-icon-profile\").click( function( e ){\n    \t$(\"#imgProfilePic\").trigger(\"click\");\n    });\n\n    $(\"#imgCoverPic\").on(\"change\", function( e ){\n\n    \tvar parent = $(this).data(\"parent\");\n    \tvar file_data = this.files[0];\n        var form_data = new FormData();\n        form_data.append('file', file_data);\n        form_data.append('type', 'cover');\n        form_data.append('id', orgId);\n        form_data.append('userId', userId);\n\n        var token = $(this).parent( ).find(\"input[name=_token]\").val( );\n\n        form_data.append('_token', token);\n\n        $.ajax({\n        \turl: \"/organization/uploadimage\",\n        \tmethod: \"POST\",\n        \tdata: form_data,\n        \tcontentType: false,\n            cache: false,\n            processData: false,\n            beforeSend: function( ){\n            \t$(\".upload-info\").fadeIn( );\n            },\n            success: function( resp ){\n            \tif( resp.status ){\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-success\").fadeIn( );\n\n            \t\t$(\".\" + parent).css(\"background\", \"url(\" + resp.url + \") no-repeat center center\");\n            \t\t$(\".\" + parent).css(\"background-size\", \"cover\");\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-success\").fadeOut( );\n            \t\t}, 3000);\n\n            \t}else{\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-error\").fadeIn( );\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-error\").fadeOut( );\n            \t\t}, 3000);\n            \t}\n            },\n            error: function( ){\n            \t$(\".upload-info\").fadeOut( );\n        \t\t$(\".upload-error\").fadeIn( );\n\n        \t\tsetTimeout( function( ){\n        \t\t\t$(\".upload-error\").fadeOut( );\n        \t\t}, 3000);\n            }\n\t\t});\n\t});\n\n\t$(\"#imgProfilePic\").on(\"change\", function( e ){\n    \t\n    \tvar file_data = this.files[0];\n        var form_data = new FormData();\n        form_data.append('file', file_data);\n        form_data.append('type', 'logo');\n        form_data.append('id', orgId);\n        form_data.append('userId', userId);\n\n        var token = $(this).parent( ).find(\"input[name=_token]\").val( );\n\n        form_data.append('_token', token);\n\n        $.ajax({\n        \turl: \"/organization/uploadimage\",\n        \tmethod: \"POST\",\n        \tdata: form_data,\n        \tcontentType: false,\n            cache: false,\n            processData: false,\n            beforeSend: function( ){\n            \t$(\".upload-info\").fadeIn( );\n            },\n            success: function( resp ){\n            \tif( resp.status ){\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-success\").fadeIn( );\n\n            \t\t$(\".logo\").prop(\"src\", resp.url );\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-success\").fadeOut( );\n            \t\t}, 3000);\n\n            \t}else{\n            \t\t$(\".upload-info\").fadeOut( );\n            \t\t$(\".upload-error\").fadeIn( );\n\n            \t\tsetTimeout( function( ){\n            \t\t\t$(\".upload-error\").fadeOut( );\n            \t\t}, 3000);\n            \t}\n            },\n            error: function( ){\n            \t$(\".upload-info\").fadeOut( );\n        \t\t$(\".upload-error\").fadeIn( );\n\n        \t\tsetTimeout( function( ){\n        \t\t\t$(\".upload-error\").fadeOut( );\n        \t\t}, 3000);\n            }\n\t\t});\n    });\n\n\n});"],"sourceRoot":"/source/"}