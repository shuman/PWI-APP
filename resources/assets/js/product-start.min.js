$(function(){var e={},a=$("input[name=filepath]").val();$("input[name=filepath]").remove(),$(".filter-items ul li").on("click",function(){var i=!1;$(this).hasClass("chosen-filter")?($(this).removeClass("chosen-filter"),i=!0):($(this).parent().find("li").removeClass("chosen-filter"),$(this).addClass("chosen-filter"));var t=$(".product-loading-overlay").parent().height();if($(".product-loading-overlay").css({height:t+"px",display:"table"}),parseInt($(this).data("amount"))>0){var l=$(this).data("filter-type");switch(l){case"price":if(i)delete e.price;else{var r=$(this).data("price");e.price=r}break;case"category":if(i)delete e.cat_id;else{var c=$(this).data("cat-id");e.cat_id=c}break;case"rating":if(i)delete e.rating;else{var d=$(this).data("rating");e.rating=d}}$.ajax({method:"post",url:"/products/filter",data:e,dataType:"json",success:function(e){if(1==e.status)if(0==e.data.length);else{var s=new Array;$.each(e.data,function(e,i){console.dir(i);var t="";t="<div class='col-lg-6 col-md-6 margin-top-10'>",t+="   <div class='product-module'>",t+="       <div class='product-module-top'>",t+="           <img src='"+a+i.image+"' align='left' />",t+="           <div class='product-module-name'>"+i.name+"</div>",t+="           <div class='product-module-org-name'>",t+="               <span class='product-price'>"+i.price+"</span> from "+i.org_name.stripSlashes(),t+="           </div>",t+="           <div class='rating'>";for(var l=1;6>l;l++)l<=i.rating?(t+="       <span class='star fill' >",t+="          <i data-icon='&#xe017;' class='icon pwi-icon-2em'></i>",t+="       </span>"):(t+="       <span class='star' >",t+="          <i data-icon='&#xe017;' class='icon pwi-icon-2em'></i>",t+="       </span>");if(t+="           </div>",t+="           <div class='product-module-desc'>",i.descExp.length<50)t+=i.sdesc;else{for(var l=0;l<i.descExp.length;l++)50!=l?t+=i.descExp[l]+" ":(t+="<a href='' class='readmore'>...See More</a>",t+="<span class='more'>"+i.descExp[l]);t+="</span><a href='#' class='readless'>Show Less</a>"}t+="           </div>",t+="       </div>",t+="   <div style='clear: both;'></div>",t+="   </div>",t+="</div>",s.push(t)}),$(".product-module-list").html("").html(s.join("")),$(".product-loading-overlay").hide()}}})}})});